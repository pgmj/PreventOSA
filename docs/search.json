[
  {
    "objectID": "index.html#bakgrund",
    "href": "index.html#bakgrund",
    "title": "Prevents enkät för organisatorisk och social arbetsmiljö",
    "section": "Bakgrund",
    "text": "Bakgrund\nRISE Research Institutes of Sweden har fått i uppdrag att utvärdera och vidareutveckla Prevents enkät om organisatorisk och social arbetsmiljö (OSA). Efter ett förarbete kring frågeställningar och svarskategorier skickades en pilotenkät ut med 52 frågor uppdelade på nio olika områden:\n\nArbetets organisering\nArbetsbelastning och krav\nMöjlighet att påverka\nSocialt stöd\nÅterhämtning\nLedarskap\nKunskaper och utveckling\nKränkande beteenden\nPsykologisk trygghet\n\nEfter datainsamlingen har en psykometrisk analys genomförts. Den finns dokumenterad i kapitel 3-11 (se menyn till vänster). Första steget var att analysera varje område separat för att se hur frågorna fungerade tillsammans inom respektive område. Se Sektion 1.2 för en utförligare beskrivning av vilka psykometriska kriterier som använts som utgångspunkt i analyserna.\nDärefter utfördes en explorativ analys genom att kombinera items (frågor i enkäten) från olika områden för att se om det fanns möjlighet att ta fram andra sammansättningar av items. Till grund för detta explorativa arbete låg dels kvalitativa resonemang om vilka items som kunde tänkas mäta samma underliggande fenomen (oberoende den initiala kategoriseringen), samt utfallet från en konfirmatorisk faktoranalys, se Sektion 11.1.4.\nRISE har ocskå tagit fram förslag på hur data från enkäten kan visualiseras på ett sätt som både gör enkätresultaten lättillgängliga och samtidigt är statistiskt korrekta. Visualiseringsförslagen gavs både för indexvärden för de fall där frågorna på ett område möjliggjort beräkning av mätvärden (se Sektion 14.3), och svarsdata för varje fråga inom ett område (se Sektion 14.5).\nAllt material utom frågorna om “Kränkande beteenden” har publicerats under den öppna licensen Creative Commons Attribution 4.0 International som innebär att det är fritt att dela, använda och vidareutveckla materialet, även för kommersiella syften, så länge hänvisning ges till rapporten och Prevents OSA-enkät som källa.\nGällande frågorna om “kränkande beteenden” så har de delvis tagits från *The Short Negative Acts Questionnaire” (Notelaers et al. 2019), se https://www.uib.no/en/rg/bbrg/44045/naq för mera information om rättigheter och villkor för användning."
  },
  {
    "objectID": "index.html#referenser",
    "href": "index.html#referenser",
    "title": "Prevents enkät för organisatorisk och social arbetsmiljö",
    "section": "Referenser",
    "text": "Referenser\n\n\n\n\nNotelaers, Guy, Beatrice Van der Heijden, Helge Hoel, and Ståle Einarsen. 2019. “Measuring Bullying at Work with the Short-Negative Acts Questionnaire: Identification of Targets and Criterion Validity.” Work & Stress 33 (1): 58–75. https://doi.org/10.1080/02678373.2018.1457736."
  },
  {
    "objectID": "sammanfattning.html#introduktion",
    "href": "sammanfattning.html#introduktion",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "Introduktion",
    "text": "Introduktion\nÖvergripande målsättningar:\n\nGenomföra psykometriska analyser för att utvärdera i vilken grad enkätfrågorna i dess nuvarande form kan utgöra tillförlitliga mätningar av de olika OSA-områden som de avser att mäta. Resultaten av analyserna användes sedan för att identifiera den kombination av items som fungerade bäst och kunde ligga till grund för beräkning av mätvärden inom ett område/index (“indexvärde”). Dessa mätvärden är betydligt mer tillförlitliga än enskilda frågor och utgör ett bättre underlag för jämförelser över tid eller mellan grupper.\nUtforska om nya kombinationer av items från olika områden kunde sättas samman med lika bra eller bättre mätegenskaper. Detta gjordes utifrån både kvalitativa resonemang om vilka items som kunde antas mäta samma underliggande fenomen (oberoende den initiala kategoriseringen) och resultat från en konfirmatorisk faktoranalys (korsladdningar och residualkorrelationer).\nGe förslag på hur data från enkäten kan visualiseras på ett sätt som gör enkätresultaten lättillgängliga och användbara för slutanvändaren. Visualiseringsförslagen gavs både för mätvärden inom ett område (som förutsätter att psykometriska kriterier uppfylls) och för återgivning av svarsfördelningar för enskilda frågor. All visualisering bygger på att resultaten ska presenteras på gruppnivå."
  },
  {
    "objectID": "sammanfattning.html#svarskategorier",
    "href": "sammanfattning.html#svarskategorier",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.1 Svarskategorier",
    "text": "1.1 Svarskategorier\nTre varianter på svarskategorier har använts i enkäten. I förekommande fall har justeringar av svarskategorierna gjorts efter analys, se respektive delskalas fullständiga analys för detaljer.\nFör området Arbetets organisering användes följande fyra svarsalternativ:\n\nInstämmer helt och hållet\nInstämmer till stor del\nInstämmer till viss del\nInstämmer inte alls\n\nFöljande fem svarsalternativ användes för området Kränkande beteenden:\n\nAldrig\nDet har hänt\nVarje månad\nVarje vecka\nDagligen\n\nFör resterande sju områden användes följande sex svarsalternativ:\n\nAlltid\nMycket ofta\nGanska ofta\nIbland\nSällan\nAldrig"
  },
  {
    "objectID": "sammanfattning.html#sec-psykometriskaKriterier",
    "href": "sammanfattning.html#sec-psykometriskaKriterier",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.2 Psykometriska kriterier",
    "text": "1.2 Psykometriska kriterier\nRISE har tagit fram fem grundläggande psykometriska kriterier som har varit utgångspunkt för analysarbetet. Artikeln finns fritt tillgänglig som preprint (Johansson et al. 2023) och innehåller både en enklare och mera fördjupad beskrivning av kriterierna.\nNedan finns en förenklad beskrivning av psykometriska kriterier som kommer från RISE rapport till MFoF om uppföljning av föräldraskapsstöd (Preuter, Johansson, and Bokström 2022):\n\nNär enkäter konstrueras och utvärderas bedöms dess psykometriska egenskaper, ofta kopplade till begreppen reliabilitet och validitet. Förenklat kan man säga att reliabilitet beskriver hur väl något mäts (vilken precision mätverktyget har), medan validitet beskriver hur väl innehållet i frågorna och svarskategorierna fångar det man avser att mäta. Dock råder i allmänhet oklara definitioner av begreppen och kriterier för huruvida dessa mätegenskaper uppfylls eller inte. Det medför att även enkäter som i forskningsartiklar beskrivs som “validerade” eller att de har “god reliabilitet” inte nödvändigtvis uppfyller vad som kan anses vara grundläggande kriterier. En mera omfattande beskrivning av de grundläggande psykometriska kriterierna återfinns i Bilaga 3 (separat dokument). Nedan listas kriterierna. Var och en av dem kräver psykometrisk analys av insamlade data för att bedöma.\nLista över grundläggande psykometriska kriterier:\n\nSvarskategorierna fungerar som avsett\nFrågorna fungerar likadant för olika grupper (kön, ålder, etc)\nUnidimensionalitet (utan för starkt korrelerade residualer)\nFrågornas svårighetsgrad passar målgruppens egenskaper/förmågor\nReliabilitet/mätosäkerheter över skalans omfång är adekvat, sett till användningsområdet\nOmvandlingstabell till intervallskala\n\nKriterierna ovan är ställda för att säkerställa att det är lämpligt att använda summapoäng från en enkät/skala. Summapoängen bör i sin tur användas tillsammans med en omvandlingstabell till intervallskala innan några statistiska eller matematiska beräkningar görs. Tyvärr är det mycket vanligt att forskningsstudier enbart redovisar Cronbach’s alpha som ett mått på reliabilitet och/eller kvalitet på en enkät. Det är dessvärre gravt otillräckligt för att bedöma mätegenskaper hos ett mätverktyg, eftersom Cronbach’s alpha inte ger information om något av kriterierna ovan."
  },
  {
    "objectID": "sammanfattning.html#noteringar-om-analysprocessen",
    "href": "sammanfattning.html#noteringar-om-analysprocessen",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.3 Noteringar om analysprocessen",
    "text": "1.3 Noteringar om analysprocessen\nInom varje område har samtliga frågor/items lagts in i en analys. Ambitionen har varit att ta fram ett index med så goda mätegenskaper som möjligt, och att eliminera items som varit problematiska utifrån ovan nämnda psykometriska kriterier.\nRasch-analyser visade att sex av nio områden av organisatorisk och social arbetsmiljö uppfyllde de psykometriska kriterierna i tillräcklig grad och kan användas för att ta fram indexvärden. De sex områden som fungerade godkänt - efter exkludering av items som inte passade mätmodellen enligt ovan nämnda kriterier - var “Arbetsbelastning och krav”, “Möjlighet att påverka”, “Stöd”, “Återhämtning”, “Ledarskap” och “Psykologisk trygghet”. Resterande tre områden visade sig inte fungera lika bra och rekommenderas därför att revideras innan de kan användas för att ta fram indexvärden. Frågor från samtliga områden kan presenteras i form av svarsfördelning på enskilda frågor."
  },
  {
    "objectID": "sammanfattning.html#noteringar-om-sammanfattningen-av-resultat",
    "href": "sammanfattning.html#noteringar-om-sammanfattningen-av-resultat",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.4 Noteringar om sammanfattningen av resultat",
    "text": "1.4 Noteringar om sammanfattningen av resultat\nI denna sammanfattning redovisas både samtliga items inom respektive område, och den sammansättning items som har visat sig fungera bäst utifrån psykometriska kriterierna. Den optimala uppsättningen items är markerade med grönt. För de sex områden som uppvisade tillräckligt god psykometrisk kvalitet länkas också till information om reliabilitet och “targeting” (hur väl frågorna matchar respondenterna), eftersom dessa faktorer är relevanta för användningen av frågorna.\nEtt vanligt problem i analyserna har varit residualkorrelationer. Det innebär att par av items är för lika varandra och inte enskilt medför tillräckligt mycket unik information till indexvärdet. I stället finns risk för att indexvärden skulle bli oproportionerligt påverkade om båda items behålls i indexet. I regel tas ett item bort, utifrån beaktande av varje items mätegenskaper.\nKomplett dokumentation av psykometriska analyser för respektive indexområde finns tillgängligt i menyn till vänster på denna sida. Den kompletta källkoden som visar hur analyserna gjorts finns fritt tillgänglig på GitHub. Eftersom även anonyma rådata tillgängliggjorts är det möjligt att granska och reproducera våra analyser. All mjukvara som använts för analyserna bygger på öppen källkod och är fritt tillgängliga."
  },
  {
    "objectID": "sammanfattning.html#arbetets-organisering",
    "href": "sammanfattning.html#arbetets-organisering",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.5 Arbetets organisering",
    "text": "1.5 Arbetets organisering\n\n1.5.1 Items\n\n\nCode\narborg.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^ao\")) %>% # byt ut abk mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^ao\")) %>%# byt ut abk mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^ao\")) %>% # byt ut abk mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(arborg.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ao1 \n    Jag vet vilka arbetsuppgifter jag har. \n  \n  \n    ao2 \n    Jag vet hur mitt arbete ska utföras. \n  \n  \n    ao3 \n    Jag vet vilka resultat som jag ska uppnå med mitt arbete. \n  \n  \n    ao4 \n    Det finns tydliga mål för min arbetsgrupp. \n  \n  \n    ao5 \n    Det finns tydliga mål för min organisation. \n  \n\n\n\n\n\n\n\n1.5.2 Svarskategorier\n\nInstämmer helt och hållet\nInstämmer till stor del\nInstämmer till viss del\nInstämmer inte alls"
  },
  {
    "objectID": "sammanfattning.html#arbetsbelastning-och-krav",
    "href": "sammanfattning.html#arbetsbelastning-och-krav",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.6 Arbetsbelastning och krav",
    "text": "1.6 Arbetsbelastning och krav\n\n1.6.1 Items\n\n\nCode\narbkrv.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^abk\")) %>% # byt ut abk mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^abk\")) %>%# byt ut abk mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^abk\")) %>% # byt ut abk mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(arbkrv.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    abk1 \n    Min arbetsbelastning är rimlig. \n  \n  \n    abk2 \n    Jag hinner med mina arbetsuppgifter inom min arbetstid. \n  \n  \n    abk3 \n    Mitt arbete är lagom omväxlande. \n  \n  \n    abk4 \n    Jag upplever att andras krav på mig är rimliga. \n  \n  \n    abk5 \n    Jag kan få hjälp om min arbetsbelastning är för hög. \n  \n  \n    abk6 \n    Mitt arbete är fritt från psykiskt påfrestande arbetsuppgifter. \n  \n\n\n\n\n\n\n\n1.6.2 Svarskategorier\n\nAlltid\nMycket ofta\nGanska ofta\nIbland\nSällan\nAldrig\n\n\n\n1.6.3 Reliabilitet\nSe Figur 3.2 för områdets reliabilitet.\n\n\n1.6.4 Targeting\nSe Figur 3.1 för matchning mellan respondenter och items."
  },
  {
    "objectID": "sammanfattning.html#möjlighet-att-påverka",
    "href": "sammanfattning.html#möjlighet-att-påverka",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.7 Möjlighet att påverka",
    "text": "1.7 Möjlighet att påverka\n\n1.7.1 Items\n\n\nCode\nmpvrk.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^mp\")) %>% # byt ut mp mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^mp\")) %>%# byt ut mp mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^mp\")) %>% # byt ut mp mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(mpvrk.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    mp1 \n    Jag har de resurser som behövs för att kunna utföra mina arbetsuppgifter. \n  \n  \n    mp2 \n    Jag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras. \n  \n  \n    mp3 \n    Jag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter. \n  \n  \n    mp4 \n    Jag kan påverka beslut som rör mina arbetsuppgifter. \n  \n  \n    mp5 \n    Jag kan själv bestämma min arbetstakt. \n  \n\n\n\n\n\n\n\n1.7.2 Svarskategorier\n\nAlltid\nMycket ofta\nGanska ofta\nIbland\nSällan\nAldrig\n\n\n\n1.7.3 Reliabilitet\nSe Figur 4.2 för områdets reliabilitet.\n\n\n1.7.4 Targeting\nSe Figur 4.1 för matchning mellan respondenter och items."
  },
  {
    "objectID": "sammanfattning.html#socialt-stöd",
    "href": "sammanfattning.html#socialt-stöd",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.8 Socialt stöd",
    "text": "1.8 Socialt stöd\n\n1.8.1 Items\n\n\nCode\nstd.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^st\")) %>% # byt ut mp mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^st\")) %>%# byt ut mp mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^st\")) %>% # byt ut mp mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(std.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    st1 \n    Jag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet. \n  \n  \n    st2 \n    Det finns personer på mitt arbete som jag kan prata förtroligt med. \n  \n  \n    st3 \n    Vi samarbetar bra på min arbetsplats. \n  \n  \n    st4 \n    Jag visar uppskattning till mina kollegor för deras arbetsinsatser. \n  \n  \n    st5 \n    Mina kollegor visar uppskattning för mina arbetsinsatser. \n  \n  \n    st6 \n    Jag får tekniskt stöd vid behov. \n  \n  \n    st7 \n    Jag kan få handledning i mitt arbete om jag behöver det. \n  \n\n\n\n\n\n\n\n1.8.2 Svarskategorier\n\nAlltid\nMycket ofta\nGanska ofta\nIbland\nSällan\nAldrig\n\n\n\n1.8.3 Reliabilitet\nSe Figur 5.2 för områdets reliabilitet.\n\n\n1.8.4 Targeting\nSe Figur 5.1 för matchning mellan respondenter och items."
  },
  {
    "objectID": "sammanfattning.html#återhämtning",
    "href": "sammanfattning.html#återhämtning",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.9 Återhämtning",
    "text": "1.9 Återhämtning\n\n1.9.1 Items\n\n\nCode\nrec.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^å\")) %>% # byt ut mp mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^å\")) %>%# byt ut mp mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^å\")) %>% # byt ut mp mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(rec.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    å1 \n    Jag kan använda raster till att koppla av från arbetet. \n  \n  \n    å2 \n    Jag har möjlighet att arbeta i lugnare takt efter arbetsintensiva perioder. \n  \n  \n    å3 \n    Jag har tid för reflektion över hur jag har utfört arbetet. \n  \n  \n    å4 \n    Jag har ork kvar för att göra andra saker efter arbetsdagens slut. \n  \n  \n    å5 \n    Jag kan lägga tankar på arbetet åt sidan på min lediga tid. \n  \n\n\n\n\n\n\n\n1.9.2 Svarskategorier\n\nAlltid\nMycket ofta\nGanska ofta\nIbland\nSällan\nAldrig\n\n\n\n1.9.3 Reliabilitet\nSe Figur 6.2 för områdets reliabilitet.\n\n\n1.9.4 Targeting\nSe Figur 6.1 för matchning mellan respondenter och items."
  },
  {
    "objectID": "sammanfattning.html#ledarskap",
    "href": "sammanfattning.html#ledarskap",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.10 Ledarskap",
    "text": "1.10 Ledarskap\n\n1.10.1 Items\n\n\nCode\nldrskp.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^ls\")) %>% # byt ut mp mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^ls\")) %>%# byt ut mp mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^ls\")) %>% # byt ut mp mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(ldrskp.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ls1 \n    Min chef ger mig återkoppling på hur jag utför arbetet. \n  \n  \n    ls2 \n    Min chef har en god uppfattning om min arbetsbelastning. \n  \n  \n    ls3 \n    Min chef agerar om jag har allt för mycket arbete att utföra. \n  \n  \n    ls4 \n    Min chef ser till att alla kommer till tals. \n  \n  \n    ls5 \n    Min chef hanterar konflikter på ett bra sätt. \n  \n  \n    ls6 \n    Min chef och jag har tillräckligt med avstämningar. \n  \n\n\n\n\n\n\n\n1.10.2 Svarskategorier\n\nAlltid\nMycket ofta\nGanska ofta\nIbland\nSällan\nAldrig\n\n\n\n1.10.3 Reliabilitet\nSe Figur 7.2 för områdets reliabilitet.\n\n\n1.10.4 Targeting\nSe Figur 7.1 för matchning mellan respondenter och items."
  },
  {
    "objectID": "sammanfattning.html#kunskap-och-utveckling",
    "href": "sammanfattning.html#kunskap-och-utveckling",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.11 Kunskap och utveckling",
    "text": "1.11 Kunskap och utveckling\n\n1.11.1 Items\n\n\nCode\nknskputv.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^ku\")) %>% # byt ut abk mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^ku\")) %>%# byt ut abk mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^ku\")) %>% # byt ut abk mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(knskputv.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ku1 \n    Mina kunskaper och färdigheter är till nytta i mitt arbete. \n  \n  \n    ku2 \n    Jag har tillräckligt med kunskap/färdigheter för att kunna utföra mina arbetsuppgifter. \n  \n  \n    ku3 \n    Jag har möjlighet att lära mig nya saker när arbetsuppgifterna kräver det. \n  \n  \n    ku4 \n    Jag har möjlighet till långsiktig kompetensutveckling i mitt arbete. \n  \n\n\n\n\n\n\n\n1.11.2 Svarskategorier\n\nAlltid\nMycket ofta\nGanska ofta\nIbland\nSällan\nAldrig"
  },
  {
    "objectID": "sammanfattning.html#kränkande-beteenden",
    "href": "sammanfattning.html#kränkande-beteenden",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.12 Kränkande beteenden",
    "text": "1.12 Kränkande beteenden\n\n1.12.1 Items\n\n\nCode\nkrbet.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^kb\")) %>% # byt ut abk mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^kb\")) %>%# byt ut abk mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^kb\")) %>% # byt ut abk mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(krbet.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    kb1 \n    Blivit utsatt för att någon undanhåller information som har påverkat din prestation. \n  \n  \n    kb2 \n    Blivit utsatt för skvaller eller rykten spridda om dig. \n  \n  \n    kb3 \n    Blivit ignorerad eller exkluderad. \n  \n  \n    kb4 \n    Fått kränkande eller stötande kommentarer om dig som person, dina attityder eller ditt privatliv. \n  \n  \n    kb5 \n    Blivit utskälld eller varit föremål för andras aggressiva utbrott. \n  \n  \n    kb6 \n    Blivit påmind om dina felsteg eller misstag. \n  \n  \n    kb7 \n    Blivit utsatt för ett otrevligt bemötande när du närmar dig andra. \n  \n\n\n\n\n\n\n\n1.12.2 Svarskategorier\n\nAldrig\nDet har hänt\nVarje månad\nVarje vecka\nDagligen"
  },
  {
    "objectID": "sammanfattning.html#psykologisk-trygghet",
    "href": "sammanfattning.html#psykologisk-trygghet",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.13 Psykologisk trygghet",
    "text": "1.13 Psykologisk trygghet\n\n1.13.1 Items\n\n\nCode\npsyktry.nr <- itemlabels %>%\n  filter(str_detect(itemnr,\"^pt\")) %>% # byt ut mp mot önskvärd indexförkortning\n  rownames_to_column() %>%\n  filter(itemnr %in% c(final.items %>% \n           filter(str_detect(itemnr,\"^pt\")) %>%# byt ut mp mot önskvärd indexförkortning\n           pull(itemnr))\n         )%>%\n  pull(rowname) %>%\n  as.numeric()\n\nitemlabels %>%\n  filter(str_detect(itemnr,\"^pt\")) %>% # byt ut mp mot önskvärd indexförkortning\n  select(!Index) %>%\n  kbl_rise() %>%\n  row_spec(psyktry.nr, background = \"#008332\", color = \"white\") \n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    pt1 \n    Jag har en positiv känsla när jag kommer till jobbet. \n  \n  \n    pt2 \n    Jag känner mig delaktig i gemenskapen på min arbetsplats. \n  \n  \n    pt3 \n    Jag kan begå misstag utan att det hålls emot mig. \n  \n  \n    pt4 \n    Jag kan öppet diskutera olika typer av svårigheter. \n  \n  \n    pt5 \n    Jag blir inkluderad även om jag tycker annorlunda. \n  \n  \n    pt6 \n    Mina ansträngningar värdesätts. \n  \n  \n    pt7 \n    Mina idéer ges tid och uppmärksamhet. \n  \n\n\n\n\n\n\n\n1.13.2 Svarskategorier\n\nAlltid\nMycket ofta\nGanska ofta\nIbland\nSällan\nAldrig\n\n\n\n1.13.3 Reliabilitet\nSe Figur 10.2 för områdets reliabilitet.\n\n\n1.13.4 Targeting\nSe Figur 10.1 för matchning mellan respondenter och items."
  },
  {
    "objectID": "sammanfattning.html#explorativa-analyser",
    "href": "sammanfattning.html#explorativa-analyser",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.14 Explorativa analyser",
    "text": "1.14 Explorativa analyser\nFör att undersöka om kombinationer av items från olika arbetsmiljöområden förbättrade den psykometriska kvaliteten genomfördes även explorativa analyser. Till att börja med testades en sammanfogning av områdena “Arbetsbelastning och krav” och “Återhämtning”. Följande kombinationer av items visade sig fungera tillsammans:\n\nJag upplever att andras krav på mig är rimliga. (arbetsbelastning och krav)\nJag kan få hjälp om min arbetsbelastning är för hög. (arbetsbelastning och krav)\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter. (arbetsbelastning och krav)\nJag har möjlighet att arbeta i lugnare takt efter arbetsintensiva perioder. (återhämtning)\nJag har ork kvar för att göra andra saker efter arbetsdagens slut. (återhämtning)\nJag kan lägga tankar på arbetet åt sidan på min lediga tid. (återhämtning)\n\nDessa items är tillsynes tematiskt lika och skulle kunna passa under begreppet ’Arbetsbelastning’.\nEn ytterligare explorativ analys gjordes genom att slå ihop områdena “Psykologisk trygghet”, “Stöd” och “Möjlighet att påverka”. Följande kombinationer av items visade sig fungera bra tillsammans:\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter. (möjlighet att påverka)\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet. (stöd)\nDet finns personer på mitt arbete som jag kan prata förtroligt med. (stöd)\nMina kollegor visar uppskattning för mina arbetsinsatser. (stöd)\nJag kan begå misstag utan att det hålls emot mig. (psykologisk trygghet)\nJag kan öppet diskutera olika typer av svårigheter. (psykologisk trygghet)\nJag blir inkluderad även om jag tycker annorlunda. (psykologisk trygghet)\n\nDessa items skulle potentiellt kunna rymmas inom begreppet ’Psykologisk trygghet’."
  },
  {
    "objectID": "sammanfattning.html#visualisering",
    "href": "sammanfattning.html#visualisering",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.15 Visualisering",
    "text": "1.15 Visualisering\n\n1.15.1 Fördelning av övergripande mätvärden\nUppdelat per område/index där det varit möjligt att estimera mätvärden.\n\n\nCode\ndf.scores <- read.csv(\"02_arbkrv/scored.csv\") %>%\n  select(score) %>%\n  rename(`Arbetsbelastning och krav` = score) %>%\n  add_column(id = seq_along(1:nrow(.)))\n\ndf.scores <- read.csv(\"03_mpvrk/scored.csv\") %>%\n  select(score) %>%\n  rename(`Möjlighet att påverka` = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores <- read.csv(\"04_std/scored.csv\") %>%\n  select(score) %>%\n  rename(Stöd = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores <- read.csv(\"05_rec/scored.csv\") %>%\n  select(score) %>%\n  rename(Återhämtning = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores <- read.csv(\"06_ldrskp/scored.csv\") %>%\n  select(score) %>%\n  rename(Ledarskap = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores <- read.csv(\"09_psyktry/scored.csv\") %>%\n  select(score) %>%\n  rename(`Psykologisk trygghet` = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores$id <- NULL\n\n\n\n\nCode\nlibrary(skimr)\nskim(df.scores)\n\n\n\n\n\nData summary\n\n\n\n\nName\n\n\ndf.scores\n\n\n\n\nNumber of rows\n\n\n511\n\n\n\n\nNumber of columns\n\n\n6\n\n\n\n\n_______________________\n\n\n\n\n\n\nColumn type frequency:\n\n\n\n\n\n\nnumeric\n\n\n6\n\n\n\n\n________________________\n\n\n\n\n\n\nGroup variables\n\n\nNone\n\n\n\n\n\nVariable type: numeric\n\n\n\n\n\nskim_variable\n\n\nn_missing\n\n\ncomplete_rate\n\n\nmean\n\n\nsd\n\n\np0\n\n\np25\n\n\np50\n\n\np75\n\n\np100\n\n\nhist\n\n\n\n\n\n\nPsykologisk trygghet\n\n\n42\n\n\n0.92\n\n\n2.54\n\n\n1.38\n\n\n-1.29\n\n\n1.68\n\n\n2.74\n\n\n4.00\n\n\n4\n\n\n▁▂▃▅▇\n\n\n\n\nLedarskap\n\n\n34\n\n\n0.93\n\n\n1.31\n\n\n1.61\n\n\n-4.00\n\n\n0.21\n\n\n1.28\n\n\n2.31\n\n\n4\n\n\n▁▁▅▇▅\n\n\n\n\nÅterhämtning\n\n\n23\n\n\n0.95\n\n\n1.21\n\n\n1.37\n\n\n-4.00\n\n\n0.34\n\n\n1.09\n\n\n2.23\n\n\n4\n\n\n▁▁▅▇▃\n\n\n\n\nStöd\n\n\n25\n\n\n0.95\n\n\n1.54\n\n\n1.16\n\n\n-1.78\n\n\n0.75\n\n\n1.34\n\n\n2.11\n\n\n4\n\n\n▁▂▇▅▃\n\n\n\n\nMöjlighet att påverka\n\n\n9\n\n\n0.98\n\n\n1.73\n\n\n1.38\n\n\n-2.32\n\n\n0.89\n\n\n1.71\n\n\n2.84\n\n\n4\n\n\n▁▃▇▇▇\n\n\n\n\nArbetsbelastning och krav\n\n\n0\n\n\n1.00\n\n\n0.97\n\n\n1.07\n\n\n-3.50\n\n\n0.43\n\n\n0.89\n\n\n1.37\n\n\n4\n\n\n▁▁▇▆▁\n\n\n\n\n\n\n\n\n\nCode\n# #| fig-height: 6\nlibrary(ggpp)\nlibrary(ggdist)\nlibrary(stringr)\ndf.scores %>%\n  pivot_longer(everything()) %>%\n  rename(item = name,\n         score = value) %>%\nggplot(\n  data = .,\n  aes(x = score, y = item, group = item, fill = item)\n  ) +\n  stat_slab(\n    side = \"right\", show.legend = F,\n    scale = 2, # defines the height that a slab can reach\n    alpha = 0.9,\n    #position = position_dodge(width = .6), # distance between elements for dodging\n    aes(fill_ramp = after_stat(level), fill = item),\n        .width = c(.50, .75, 1)\n  ) +\n  scale_fill_ramp_discrete(from = \"black\", aesthetics = \"fill_ramp\") +\n  stat_summary(fun.data = \"mean_cl_boot\",show.legend = F, size = .4,\n               position = position_dodge2nudge(x=.05,width = .8)) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 12)) +\n  theme_minimal() +\n  theme_rise() +\n  coord_cartesian(xlim = c(-4,4)) +\n  scale_fill_brewer(palette = \"Dark2\",\n                    guide = \"none\") +\n  labs(\n    title = \"Mätvärden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart punkt indikerar medelvärde. Det färgade fältet i mitten visar var 50% av respondenterna återfinns.\",\n    y = \"\",\n    x = \"Mätvärden\"\n  )"
  },
  {
    "objectID": "sammanfattning.html#referenser",
    "href": "sammanfattning.html#referenser",
    "title": "1  Introduktion och sammanfattning av resultat",
    "section": "1.16 Referenser",
    "text": "1.16 Referenser\n\n\n\n\nJohansson, Magnus, Marit Preuter, Simon Karlsson, Marie-Louise Möllerberg, Hanna Svensson, and Jeanette Melin. 2023. “Valid and Reliable? Basic and Expanded Recommendations for Psychometric Reporting and Quality Assessment.” https://doi.org/10.31219/osf.io/3htzc.\n\n\nPreuter, Marit, Magnus Johansson, and Tomas Bokström. 2022. Strukturer och indikatorer för uppföljning av föräldraskapsstöd. RISE rapport 2022:70. RISE Research Institutes of Sweden. http://urn.kb.se/resolve?urn=urn:nbn:se:ri:diva-59978."
  },
  {
    "objectID": "01_arborg/01_arborg.html#items",
    "href": "01_arborg/01_arborg.html#items",
    "title": "2  Arbetets organisation",
    "section": "2.1 Items",
    "text": "2.1 Items\n\n\nCode\nkbl_rise(itemlabels, options = \"hover\", width = 45)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ao1 \n    Jag vet vilka arbetsuppgifter jag har. \n  \n  \n    ao2 \n    Jag vet hur mitt arbete ska utföras. \n  \n  \n    ao3 \n    Jag vet vilka resultat som jag ska uppnå med mitt arbete. \n  \n  \n    ao4 \n    Det finns tydliga mål för min arbetsgrupp. \n  \n  \n    ao5 \n    Det finns tydliga mål för min organisation."
  },
  {
    "objectID": "01_arborg/01_arborg.html#bakgrundsdata",
    "href": "01_arborg/01_arborg.html#bakgrundsdata",
    "title": "2  Arbetets organisation",
    "section": "2.2 Bakgrundsdata",
    "text": "2.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n2.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"ao\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0005\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0005\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n2.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nInstämmer helt och hållet\n\n\n1429\n\n\n52.9\n\n\n\n\nInstämmer till stor del \n\n\n904\n\n\n33.5\n\n\n\n\nInstämmer till viss del \n\n\n313\n\n\n11.6\n\n\n\n\nInstämmer inte alls \n\n\n54\n\n\n2.0\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Instämmer inte alls'=0;\n                                            'Instämmer till viss del' =1;\n                                            'Instämmer till stor del'=2;\n                                            'Instämmer helt och hållet'=3\",\n                                            as.factor = FALSE)))\n\n\n\n\n2.2.3 Descriptives - all items\n\nTile plotStacked barsBarplotsFördelning av summerade svar\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nRIrawdist(df.omit.na)\n\n\n\n\n\n\n\n\nVi har väldigt få svar i de lägsta svarskategorierna för items 1-3, men det kan bero på underlaget. Tillsvidare slår vi ihop de två lägsta svarskategorierna för dessa items för att kunna utföra analyserna.\n\n\nCode\n#Temporärt slå ihop svarskategorier så att analyserna funkar\n\ndf.omit.na$ao1<-recode(df.omit.na$ao1,\"0=0;1=0;2=1;3=2\",as.factor=FALSE)\ndf.omit.na$ao2<-recode(df.omit.na$ao2,\"0=0;1=0;2=1;3=2\",as.factor=FALSE)\ndf.omit.na$ao3<-recode(df.omit.na$ao3,\"0=0;1=0;2=1;3=2\",as.factor=FALSE)"
  },
  {
    "objectID": "01_arborg/01_arborg.html#rasch-analys-1",
    "href": "01_arborg/01_arborg.html#rasch-analys-1",
    "title": "2  Arbetets organisation",
    "section": "2.3 Rasch-analys 1",
    "text": "2.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nao1\n\n\nJag vet vilka arbetsuppgifter jag har.\n\n\n\n\nao2\n\n\nJag vet hur mitt arbete ska utföras.\n\n\n\n\nao3\n\n\nJag vet vilka resultat som jag ska uppnå med mitt arbete.\n\n\n\n\nao4\n\n\nDet finns tydliga mål för min arbetsgrupp.\n\n\n\n\nao5\n\n\nDet finns tydliga mål för min organisation.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM(df.omit.na, samplesize = 250, nsamples = 32)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    ao1 \n    0.847 \n    0.815 \n    -1.473 \n    -2.121 \n  \n  \n    ao2 \n    1.101 \n    1.033 \n    0.971 \n    0.379 \n  \n  \n    ao3 \n    0.683 \n    0.678 \n    -2.989 \n    -3.58 \n  \n  \n    ao4 \n    0.712 \n    0.726 \n    -3.072 \n    -2.86 \n  \n  \n    ao5 \n    0.984 \n    0.987 \n    -0.18 \n    -0.166 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    2.13 \n  \n  \n    1.10 \n  \n  \n    0.91 \n  \n  \n    0.87 \n  \n  \n    0.00 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    ao1 \n    ao2 \n    ao3 \n    ao4 \n    ao5 \n  \n \n\n  \n    ao1 \n     \n     \n     \n     \n     \n  \n  \n    ao2 \n    0.14 \n     \n     \n     \n     \n  \n  \n    ao3 \n    -0.05 \n    0.08 \n     \n     \n     \n  \n  \n    ao4 \n    -0.32 \n    -0.47 \n    -0.33 \n     \n     \n  \n  \n    ao5 \n    -0.46 \n    -0.53 \n    -0.33 \n    0.14 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.012, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\", xlims = c(-5,5))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-6,6))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nVi testar att ta bort ao2 eftersom detta item har residualkorrelationer med både ao1 och ao3.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"ao2\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items))"
  },
  {
    "objectID": "01_arborg/01_arborg.html#rasch-analys-2",
    "href": "01_arborg/01_arborg.html#rasch-analys-2",
    "title": "2  Arbetets organisation",
    "section": "2.4 Rasch-analys 2",
    "text": "2.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nao1\n\n\nJag vet vilka arbetsuppgifter jag har.\n\n\n\n\nao3\n\n\nJag vet vilka resultat som jag ska uppnå med mitt arbete.\n\n\n\n\nao4\n\n\nDet finns tydliga mål för min arbetsgrupp.\n\n\n\n\nao5\n\n\nDet finns tydliga mål för min organisation.\n\n\n\n\n\n\n\nItem fit\n\n\n\n\nCode\nRIitemfitPCM(df2, samplesize = 250, nsamples = 32)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    ao1 \n    1.034 \n    0.948 \n    0.34 \n    -0.334 \n  \n  \n    ao3 \n    0.844 \n    0.779 \n    -1.534 \n    -2.503 \n  \n  \n    ao4 \n    0.621 \n    0.622 \n    -4.508 \n    -4.427 \n  \n  \n    ao5 \n    0.844 \n    0.844 \n    -1.638 \n    -1.617 \n  \n\n\n\n\n\n\n2.4.1 PCA\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.84 \n  \n  \n    1.16 \n  \n  \n    0.99 \n  \n  \n    0.01 \n  \n\n\n\n\n\n\n\n2.4.2 Residual correlations\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    ao1 \n    ao3 \n    ao4 \n    ao5 \n  \n \n\n  \n    ao1 \n     \n     \n     \n     \n  \n  \n    ao3 \n    0.04 \n     \n     \n     \n  \n  \n    ao4 \n    -0.35 \n    -0.38 \n     \n     \n  \n  \n    ao5 \n    -0.52 \n    -0.41 \n    -0.05 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.081, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n2.4.3 1st contrast loadings\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n2.4.4 Targeting\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n2.4.5 Item hierarchy\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n2.4.6 Person fit\n\n\nCode\nRIpfit(df2)\n\n\n\n\n\n\n\n\n\n\n\n\nDet finns inte längre något problem med residualkorrelationer. Dock finns det fortfarande en något låg item fit för ao4 och en bristfällig matchning mellan items och respondenter. Vi går vidare och undersöker DIF och reliabilitet."
  },
  {
    "objectID": "01_arborg/01_arborg.html#dif-analysis",
    "href": "01_arborg/01_arborg.html#dif-analysis",
    "title": "2  Arbetets organisation",
    "section": "2.5 DIF-analysis",
    "text": "2.5 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\nIngen DIF baserat på kön, ålder, bransch eller hemarbete."
  },
  {
    "objectID": "01_arborg/01_arborg.html#reliability",
    "href": "01_arborg/01_arborg.html#reliability",
    "title": "2  Arbetets organisation",
    "section": "2.6 Reliability",
    "text": "2.6 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nReliabiliteten är låg och kommer inte upp i önskvärda nivåer någonstans på skalan. Vi går därför inte vidare och tar fram mätvärden. Frågorna i detta område bör enbart redovisas med svarsfördelning för frågorna enskilt och ej summeras på något vis."
  },
  {
    "objectID": "01_arborg/01_arborg.html#rekommenderade-items",
    "href": "01_arborg/01_arborg.html#rekommenderade-items",
    "title": "2  Arbetets organisation",
    "section": "2.7 Rekommenderade items",
    "text": "2.7 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 45, options = \"hover\") %>% \n  row_spec(2, background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttaget item markerat med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ao1 \n    Jag vet vilka arbetsuppgifter jag har. \n  \n  \n    ao2 \n    Jag vet hur mitt arbete ska utföras. \n  \n  \n    ao3 \n    Jag vet vilka resultat som jag ska uppnå med mitt arbete. \n  \n  \n    ao4 \n    Det finns tydliga mål för min arbetsgrupp. \n  \n  \n    ao5 \n    Det finns tydliga mål för min organisation. \n  \n\n\nNotera: \n\n Borttaget item markerat med färg."
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#items",
    "href": "02_arbkrv/02_arbkrv.html#items",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.1 Items",
    "text": "3.1 Items\n\n\nCode\nitemlabels %>% \n  kbl_rise(width = 60)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    abk1 \n    Min arbetsbelastning är rimlig. \n  \n  \n    abk2 \n    Jag hinner med mina arbetsuppgifter inom min arbetstid. \n  \n  \n    abk3 \n    Mitt arbete är lagom omväxlande. \n  \n  \n    abk4 \n    Jag upplever att andras krav på mig är rimliga. \n  \n  \n    abk5 \n    Jag kan få hjälp om min arbetsbelastning är för hög. \n  \n  \n    abk6 \n    Mitt arbete är fritt från psykiskt påfrestande arbetsuppgifter."
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#bakgrundsdata",
    "href": "02_arbkrv/02_arbkrv.html#bakgrundsdata",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.2 Bakgrundsdata",
    "text": "3.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n3.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"abk\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0006\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0006\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n3.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n520\n\n\n17.0\n\n\n\n\nMycket ofta\n\n\n927\n\n\n30.2\n\n\n\n\nGanska ofta\n\n\n799\n\n\n26.1\n\n\n\n\nIbland \n\n\n440\n\n\n14.4\n\n\n\n\nSällan \n\n\n304\n\n\n9.9\n\n\n\n\nAldrig \n\n\n76\n\n\n2.5\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\n\n\n3.2.3 Descriptives - all items\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nabk1\n\n\nMin arbetsbelastning är rimlig.\n\n\n\n\nabk2\n\n\nJag hinner med mina arbetsuppgifter inom min arbetstid.\n\n\n\n\nabk3\n\n\nMitt arbete är lagom omväxlande.\n\n\n\n\nabk4\n\n\nJag upplever att andras krav på mig är rimliga.\n\n\n\n\nabk5\n\n\nJag kan få hjälp om min arbetsbelastning är för hög.\n\n\n\n\nabk6\n\n\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter.\n\n\n\n\n\n\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVi har väldigt få svar i lägsta kategorierna för item abk3. Vi slår därför ihop svarskategori 0 (aldrig) och 1 (sällan) för detta item så att efterföljande analyser kan utföras.\n\n\nCode\ndf.omit.na$abk3 <- recode(df.omit.na$abk3, \"1=0;2=1;3=2;4=3;5=4\", as.factor = FALSE)"
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#rasch-analys-1",
    "href": "02_arbkrv/02_arbkrv.html#rasch-analys-1",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.3 Rasch-analys 1",
    "text": "3.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nabk1\n\n\nMin arbetsbelastning är rimlig.\n\n\n\n\nabk2\n\n\nJag hinner med mina arbetsuppgifter inom min arbetstid.\n\n\n\n\nabk3\n\n\nMitt arbete är lagom omväxlande.\n\n\n\n\nabk4\n\n\nJag upplever att andras krav på mig är rimliga.\n\n\n\n\nabk5\n\n\nJag kan få hjälp om min arbetsbelastning är för hög.\n\n\n\n\nabk6\n\n\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df.omit.na, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    abk1 \n    0.58 \n    0.576 \n    -5.515 \n    -5.651 \n  \n  \n    abk2 \n    0.682 \n    0.697 \n    -3.853 \n    -3.916 \n  \n  \n    abk3 \n    1.223 \n    1.194 \n    1.79 \n    2.102 \n  \n  \n    abk4 \n    0.603 \n    0.619 \n    -4.924 \n    -4.86 \n  \n  \n    abk5 \n    0.991 \n    0.983 \n    -0.147 \n    -0.24 \n  \n  \n    abk6 \n    1.068 \n    1.056 \n    1.093 \n    0.695 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.92 \n  \n  \n    1.39 \n  \n  \n    1.20 \n  \n  \n    0.89 \n  \n  \n    0.58 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    abk1 \n    abk2 \n    abk3 \n    abk4 \n    abk5 \n    abk6 \n  \n \n\n  \n    abk1 \n     \n     \n     \n     \n     \n     \n  \n  \n    abk2 \n    0.46 \n     \n     \n     \n     \n     \n  \n  \n    abk3 \n    -0.34 \n    -0.41 \n     \n     \n     \n     \n  \n  \n    abk4 \n    -0.07 \n    -0.1 \n    0.07 \n     \n     \n     \n  \n  \n    abk5 \n    -0.22 \n    -0.19 \n    -0.18 \n    -0.3 \n     \n     \n  \n  \n    abk6 \n    -0.28 \n    -0.33 \n    -0.15 \n    -0.1 \n    -0.28 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.037, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nDen initiala analysen visar att items abk1, abk2 och abk4 visar något låg item fit sett till rekommenderade tröskelvärden. Det finns en mycket hög residualkorrelation mellan abk1 och abk2, samt problem med oordnade trösklar för samma två items. Vi tar bort abk1 eftersom den har lägre item fit, och slår samman svarskategorierna Ibland och Sällan för abk2.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"abk1\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!any_of(removed_items)) %>% \n  mutate(abk2 = car::recode(abk2,\"2=1;3=2;4=3;5=4\"))\n\n\n\n3.3.1 Analysis of response categories\n\n\nCode\nRIitemCats(df2, items = c(\"abk2\",\"abk3\"))\n\n\n\n\n\n\n\n\n\n\n\n\nAvstånden mellan tröskel 1 och 2 för abk3 är så små att vi slår samman de två lägsta svarskategorierna för abk3.\n\n\nCode\ndf2$abk3 = car::recode(df2$abk3,\"1=0;2=1;3=2;4=3;5=4\")\nRIitemCats(df2, items = \"abk3\")"
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#rasch-analys-2",
    "href": "02_arbkrv/02_arbkrv.html#rasch-analys-2",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.4 Rasch-analys 2",
    "text": "3.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nabk2\n\n\nJag hinner med mina arbetsuppgifter inom min arbetstid.\n\n\n\n\nabk3\n\n\nMitt arbete är lagom omväxlande.\n\n\n\n\nabk4\n\n\nJag upplever att andras krav på mig är rimliga.\n\n\n\n\nabk5\n\n\nJag kan få hjälp om min arbetsbelastning är för hög.\n\n\n\n\nabk6\n\n\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchyReliability\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    abk2 \n    0.779 \n    0.769 \n    -2.62 \n    -2.796 \n  \n  \n    abk3 \n    1.078 \n    1.044 \n    0.69 \n    0.572 \n  \n  \n    abk4 \n    0.562 \n    0.57 \n    -5.673 \n    -5.718 \n  \n  \n    abk5 \n    0.858 \n    0.866 \n    -1.375 \n    -1.721 \n  \n  \n    abk6 \n    0.896 \n    0.895 \n    -1.455 \n    -1.213 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.50 \n  \n  \n    1.34 \n  \n  \n    1.30 \n  \n  \n    0.85 \n  \n  \n    0.01 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    abk2 \n    abk3 \n    abk4 \n    abk5 \n    abk6 \n  \n \n\n  \n    abk2 \n     \n     \n     \n     \n     \n  \n  \n    abk3 \n    -0.32 \n     \n     \n     \n     \n  \n  \n    abk4 \n    0.05 \n    0.01 \n     \n     \n     \n  \n  \n    abk5 \n    -0.12 \n    -0.26 \n    -0.33 \n     \n     \n  \n  \n    abk6 \n    -0.21 \n    -0.25 \n    -0.14 \n    -0.37 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.006, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\n\nCode\nRItif(df2)\n\n\n\n\n\n\n\n\nAnalysen visar att abk4 nu har ännu lägre item fit och den tas därför bort.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"abk1\", \"abk4\")\n\n# select all items except those removed\ndf2 <- df2 %>%\n  select(!any_of(removed_items))"
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#rasch-analys-3",
    "href": "02_arbkrv/02_arbkrv.html#rasch-analys-3",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.5 Rasch-analys 3",
    "text": "3.5 Rasch-analys 3\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nabk2\n\n\nJag hinner med mina arbetsuppgifter inom min arbetstid.\n\n\n\n\nabk3\n\n\nMitt arbete är lagom omväxlande.\n\n\n\n\nabk5\n\n\nJag kan få hjälp om min arbetsbelastning är för hög.\n\n\n\n\nabk6\n\n\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchyPerson fit\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    abk2 \n    0.732 \n    0.727 \n    -3.424 \n    -3.658 \n  \n  \n    abk3 \n    1.005 \n    0.983 \n    0.108 \n    0.015 \n  \n  \n    abk5 \n    0.669 \n    0.673 \n    -3.947 \n    -4.356 \n  \n  \n    abk6 \n    0.765 \n    0.772 \n    -3.004 \n    -2.93 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.54 \n  \n  \n    1.31 \n  \n  \n    1.14 \n  \n  \n    0.01 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    abk2 \n    abk3 \n    abk5 \n    abk6 \n  \n \n\n  \n    abk2 \n     \n     \n     \n     \n  \n  \n    abk3 \n    -0.26 \n     \n     \n     \n  \n  \n    abk5 \n    -0.1 \n    -0.26 \n     \n     \n  \n  \n    abk6 \n    -0.16 \n    -0.22 \n    -0.4 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.035, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\n#| label: fig-arbkrv-targ\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIpfit(df2)\n\n\n\n\n\n\n\n\n\n\n\n\n3.5.1 Targeting\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\nFigur 3.1: Targeting för området Arbetsbelastning och krav\n\n\n\n\nDet kvarstår smärre problem med låg item fit, men överlag fungerar denna uppsättning items acceptabelt."
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#reliability-1",
    "href": "02_arbkrv/02_arbkrv.html#reliability-1",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.6 Reliability",
    "text": "3.6 Reliability\n\n\nCode\nRItif(df2)\n\n\n\n\n\nFigur 3.2: Reliabilitet för området Arbetsbelastning och krav\n\n\n\n\nVi kommer senare att utforska möjligheten att slå ihop items från ‘arbetsbelastning och krav’ och ‘återhämtning’ i den explorativa analysdelen, se Sektion 12.2."
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#item-parametrar",
    "href": "02_arbkrv/02_arbkrv.html#item-parametrar",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.7 Item-parametrar",
    "text": "3.7 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Threshold 3 \n    Threshold 4 \n    Threshold 5 \n    Item location \n  \n \n\n  \n    abk2 \n    -2.05 \n    0.38 \n    0.97 \n    2.76 \n    NA \n    0.52 \n  \n  \n    abk3 \n    -0.65 \n    -0.23 \n    1.31 \n    NA \n    NA \n    0.14 \n  \n  \n    abk5 \n    -1.16 \n    0.22 \n    0.99 \n    1.15 \n    1.78 \n    0.6 \n  \n  \n    abk6 \n    -0.94 \n    -0.03 \n    0.36 \n    1.20 \n    2.67 \n    0.65"
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#transformeringstabell",
    "href": "02_arbkrv/02_arbkrv.html#transformeringstabell",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.8 Transformeringstabell",
    "text": "3.8 Transformeringstabell\n\n\nCode\nRIscoreSE(df2, width = 50, sdx = 7)\n\n\n\n\n \n  \n    Ordinal sum score \n    Logit score \n    Logit std.error \n  \n \n\n  \n    0 \n    -3.501 \n    1.603 \n  \n  \n    1 \n    -2.161 \n    0.953 \n  \n  \n    2 \n    -1.472 \n    0.752 \n  \n  \n    3 \n    -1.003 \n    0.649 \n  \n  \n    4 \n    -0.639 \n    0.588 \n  \n  \n    5 \n    -0.334 \n    0.548 \n  \n  \n    6 \n    -0.063 \n    0.522 \n  \n  \n    7 \n    0.188 \n    0.506 \n  \n  \n    8 \n    0.425 \n    0.496 \n  \n  \n    9 \n    0.656 \n    0.494 \n  \n  \n    10 \n    0.886 \n    0.498 \n  \n  \n    11 \n    1.121 \n    0.511 \n  \n  \n    12 \n    1.373 \n    0.534 \n  \n  \n    13 \n    1.660 \n    0.574 \n  \n  \n    14 \n    2.009 \n    0.638 \n  \n  \n    15 \n    2.473 \n    0.744 \n  \n  \n    16 \n    3.151 \n    0.942 \n  \n  \n    17 \n    4.000 \n    1.305 \n  \n\n\n\n\n\n\n3.8.1 Estimering av mätvärden\n\n\nCode\ndf2$score <- RIestThetas(df2)\nwrite.csv(df2, \"scored.csv\")\nsummary(df2$score)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n-3.5007  0.4254  0.8856  0.9669  1.3734  4.0000 \n\n\n\n\nCode\n#df2 <- read_csv(\"05_rec/scored.csv\")\n\nggplot(\n  data = df2,\n  aes(x = score, y = 0, fill = factor(score))\n  ) +\n  geom_dotplot(color = \"white\", \n                dotsize = 1,\n                binwidth = 0.12) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n    # errorbar has brackets at the endpoints\n  geom_errorbar(\n    aes(\n      xmin = mean(score) - sd(score),\n      xmax = mean(score) + sd(score),\n      y = 0,\n      width = 0.025\n    ),\n    color = \"black\"\n  ) +\n  coord_cartesian(xlim = c(-4,4)) +\n  theme_minimal(base_family = \"Lato\") +\n  theme_rise() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Mätvärden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde, strecken runt indikerar en standardavvikelse.\",\n    y = \"Antal respondenter\",\n    x = \"Mätvärden\"\n  ) +\n  theme(\n    #axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank()\n  )"
  },
  {
    "objectID": "02_arbkrv/02_arbkrv.html#rekommenderade-items",
    "href": "02_arbkrv/02_arbkrv.html#rekommenderade-items",
    "title": "3  Arbetsbelastning och krav",
    "section": "3.9 Rekommenderade items",
    "text": "3.9 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 50,\n           options = \"hover\") %>% \n  row_spec(c(1,4), background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttagna item markerade med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    abk1 \n    Min arbetsbelastning är rimlig. \n  \n  \n    abk2 \n    Jag hinner med mina arbetsuppgifter inom min arbetstid. \n  \n  \n    abk3 \n    Mitt arbete är lagom omväxlande. \n  \n  \n    abk4 \n    Jag upplever att andras krav på mig är rimliga. \n  \n  \n    abk5 \n    Jag kan få hjälp om min arbetsbelastning är för hög. \n  \n  \n    abk6 \n    Mitt arbete är fritt från psykiskt påfrestande arbetsuppgifter. \n  \n\n\nNotera: \n\n Borttagna item markerade med färg.\n\n\n\n\n\n\n3.9.1 Förändringar i svarskategorier\n\nabk3 - Aldrig+Sällan+Ibland\nabk2 - Sällan+Ibland\n\n\n\nCode\ndf.omit.na$abk3 <- recode(df.omit.na$abk3,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf2$abk3 = car::recode(df2$abk3,\"1=0;2=1;3=2;4=3\")\n\ndf2$abk2 = car::recode(df2$abk2,\"2=1;3=2;4=3;5=4\")"
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#items",
    "href": "03_mpvrk/03_mpvrk.html#items",
    "title": "4  Möjlighet att påverka",
    "section": "4.1 Items",
    "text": "4.1 Items\n\n\nCode\nitemlabels %>% \n  kbl_rise(width = 60)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    mp1 \n    Jag har de resurser som behövs för att kunna utföra mina arbetsuppgifter. \n  \n  \n    mp2 \n    Jag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras. \n  \n  \n    mp3 \n    Jag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter. \n  \n  \n    mp4 \n    Jag kan påverka beslut som rör mina arbetsuppgifter. \n  \n  \n    mp5 \n    Jag kan själv bestämma min arbetstakt."
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#bakgrundsdata",
    "href": "03_mpvrk/03_mpvrk.html#bakgrundsdata",
    "title": "4  Möjlighet att påverka",
    "section": "4.2 Bakgrundsdata",
    "text": "4.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n4.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"mp\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenter som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0007\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0007\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n4.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n542\n\n\n21.6\n\n\n\n\nMycket ofta\n\n\n1011\n\n\n40.3\n\n\n\n\nGanska ofta\n\n\n588\n\n\n23.4\n\n\n\n\nIbland \n\n\n241\n\n\n9.6\n\n\n\n\nSällan \n\n\n106\n\n\n4.2\n\n\n\n\nAldrig \n\n\n22\n\n\n0.9\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\n\n\n4.2.3 Descriptives - all items\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVi har väldigt få svar i lägsta svarskategorierna, speciellt för item mp1 och mp3. Vi slår därför ihop de två lägsta svarskategorierna för mp1 och mp3.\n\n\nCode\ndf.omit.na$mp1<-recode(df.omit.na$mp1,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$mp3<-recode(df.omit.na$mp3,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)"
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#rasch-analys-1",
    "href": "03_mpvrk/03_mpvrk.html#rasch-analys-1",
    "title": "4  Möjlighet att påverka",
    "section": "4.3 Rasch-analys 1",
    "text": "4.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nmp1\n\n\nJag har de resurser som behövs för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp2\n\n\nJag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras.\n\n\n\n\nmp3\n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp4\n\n\nJag kan påverka beslut som rör mina arbetsuppgifter.\n\n\n\n\nmp5\n\n\nJag kan själv bestämma min arbetstakt.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df.omit.na, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    mp1 \n    0.925 \n    0.884 \n    -0.698 \n    -1.079 \n  \n  \n    mp2 \n    0.842 \n    0.819 \n    -1.683 \n    -1.961 \n  \n  \n    mp3 \n    0.817 \n    0.84 \n    -1.88 \n    -1.709 \n  \n  \n    mp4 \n    0.691 \n    0.696 \n    -3.581 \n    -3.377 \n  \n  \n    mp5 \n    0.824 \n    0.822 \n    -2.019 \n    -2.032 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.71 \n  \n  \n    1.27 \n  \n  \n    1.21 \n  \n  \n    0.81 \n  \n  \n    0.00 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    mp1 \n    mp2 \n    mp3 \n    mp4 \n    mp5 \n  \n \n\n  \n    mp1 \n     \n     \n     \n     \n     \n  \n  \n    mp2 \n    -0.17 \n     \n     \n     \n     \n  \n  \n    mp3 \n    -0.23 \n    -0.21 \n     \n     \n     \n  \n  \n    mp4 \n    -0.32 \n    -0.35 \n    0.12 \n     \n     \n  \n  \n    mp5 \n    -0.15 \n    -0.1 \n    -0.48 \n    -0.23 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.012, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nDet finns en residualkorrelation mellan mp3 och mp4 långt över det rekommenderade tröskelvärdet. Eftersom mp4 visar låg item fit exkluderas detta item från fortsatta analyser.\nDet finns problem med oordnade svarskategorier. Vi slår samman de två lägsta svarskategorierna (T1 och T2 i targeting-figuren) för item 2 och de två näst lägsta (T2 och T3) för item 5.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"mp4\")\n\ndf.omit.na$mp2<-recode(df.omit.na$mp2,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$mp5<-recode(df.omit.na$mp5,\"2=1;3=2;4=3;5=4\",as.factor=FALSE)\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!any_of(removed_items))\n\n\n\n4.3.1 Analysis of response categories\n\n\nCode\nRIitemCats(df2, items = \"all\")"
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#rasch-analys-2",
    "href": "03_mpvrk/03_mpvrk.html#rasch-analys-2",
    "title": "4  Möjlighet att påverka",
    "section": "4.4 Rasch-analys 2",
    "text": "4.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nmp1\n\n\nJag har de resurser som behövs för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp2\n\n\nJag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras.\n\n\n\n\nmp3\n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp5\n\n\nJag kan själv bestämma min arbetstakt.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM(df2, samplesize = 250, nsamples = 32)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    mp1 \n    0.792 \n    0.756 \n    -2.42 \n    -2.948 \n  \n  \n    mp2 \n    0.718 \n    0.71 \n    -3.268 \n    -3.282 \n  \n  \n    mp3 \n    0.903 \n    0.887 \n    -0.999 \n    -1.202 \n  \n  \n    mp5 \n    0.725 \n    0.707 \n    -3.384 \n    -3.669 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.45 \n  \n  \n    1.39 \n  \n  \n    1.15 \n  \n  \n    0.01 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    mp1 \n    mp2 \n    mp3 \n    mp5 \n  \n \n\n  \n    mp1 \n     \n     \n     \n     \n  \n  \n    mp2 \n    -0.32 \n     \n     \n     \n  \n  \n    mp3 \n    -0.28 \n    -0.26 \n     \n     \n  \n  \n    mp5 \n    -0.19 \n    -0.14 \n    -0.39 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.064, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\n\n4.4.1 Targeting\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\nFigur 4.1: Targeting för området Möjlighet att påverka\n\n\n\n\nDet finns inte längre något problem med residualkorrelationer. Flera items (mp1, mp2 och mp5) har något låg ZSTD item, medan MSQ ser ok ut. Vi går vidare och undersöker DIF och reliabilitet."
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#dif-analysis",
    "href": "03_mpvrk/03_mpvrk.html#dif-analysis",
    "title": "4  Möjlighet att påverka",
    "section": "4.5 DIF-analysis",
    "text": "4.5 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\nInga problem i DIF-analysen baserat på kön, ålder, bransch eller hemarbete."
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#reliability",
    "href": "03_mpvrk/03_mpvrk.html#reliability",
    "title": "4  Möjlighet att påverka",
    "section": "4.6 Reliability",
    "text": "4.6 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nFigur 4.2: Reliabilitet för området Möjlighet att påverka\n\n\n\n\nReliabiliteten kommer inte riktigt upp i önskad nivå, men eftersom det avsedda användningsområdet enbart är på gruppnivå kan detta vara tillräckligt nära."
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#person-fit",
    "href": "03_mpvrk/03_mpvrk.html#person-fit",
    "title": "4  Möjlighet att påverka",
    "section": "4.7 Person fit",
    "text": "4.7 Person fit\n\n\nCode\nRIpfit(df2)"
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#item-parametrar",
    "href": "03_mpvrk/03_mpvrk.html#item-parametrar",
    "title": "4  Möjlighet att påverka",
    "section": "4.8 Item-parametrar",
    "text": "4.8 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Threshold 3 \n    Threshold 4 \n    Item location \n  \n \n\n  \n    mp1 \n    -0.86 \n    0.04 \n    1.21 \n    3.96 \n    1.09 \n  \n  \n    mp2 \n    -1.33 \n    -0.13 \n    0.84 \n    3.33 \n    0.68 \n  \n  \n    mp3 \n    -0.82 \n    -0.62 \n    0.43 \n    2.63 \n    0.4 \n  \n  \n    mp5 \n    -2.37 \n    0.70 \n    1.46 \n    3.75 \n    0.88"
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#transformeringstabell",
    "href": "03_mpvrk/03_mpvrk.html#transformeringstabell",
    "title": "4  Möjlighet att påverka",
    "section": "4.9 Transformeringstabell",
    "text": "4.9 Transformeringstabell\n\n\nCode\nRIscoreSE(df2, width = 50, score_range = c(-4,5))\n\n\n\n\n \n  \n    Ordinal sum score \n    Logit score \n    Logit std.error \n  \n \n\n  \n    0 \n    -3.726 \n    1.646 \n  \n  \n    1 \n    -2.316 \n    0.971 \n  \n  \n    2 \n    -1.606 \n    0.765 \n  \n  \n    3 \n    -1.132 \n    0.667 \n  \n  \n    4 \n    -0.757 \n    0.616 \n  \n  \n    5 \n    -0.425 \n    0.589 \n  \n  \n    6 \n    -0.109 \n    0.580 \n  \n  \n    7 \n    0.208 \n    0.581 \n  \n  \n    8 \n    0.537 \n    0.593 \n  \n  \n    9 \n    0.888 \n    0.614 \n  \n  \n    10 \n    1.272 \n    0.645 \n  \n  \n    11 \n    1.710 \n    0.688 \n  \n  \n    12 \n    2.227 \n    0.744 \n  \n  \n    13 \n    2.838 \n    0.807 \n  \n  \n    14 \n    3.531 \n    0.887 \n  \n  \n    15 \n    4.354 \n    1.046 \n  \n  \n    16 \n    5.000 \n    1.264 \n  \n\n\n\n\n\n\n4.9.1 Estimering av mätvärden\n\n\nCode\ndf2$score <- RIestThetas(df2, theta_range = c(-4,5))\nwrite.csv(df2, \"scored.csv\")\nsummary(df2$score)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n-2.3163  0.8879  1.7096  1.8079  2.8383  5.0000 \n\n\n\n\nCode\nggplot(\n  data = df2,\n  aes(x = score, y = 0, fill = factor(score))\n  ) +\n  geom_dotplot(color = \"white\", \n                dotsize = 1,\n                binwidth = 0.12) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n    # errorbar has brackets at the endpoints\n  geom_errorbar(\n    aes(\n      xmin = mean(score) - sd(score),\n      xmax = mean(score) + sd(score),\n      y = 0,\n      width = 0.025\n    ),\n    color = \"black\"\n  ) +\n  theme_minimal(base_family = \"Lato\") +\n  theme_rise() +\n  coord_cartesian(xlim = c(-4,5)) +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Mätvärden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde, strecken runt indikerar en standardavvikelse.\",\n    y = \"Antal respondenter\",\n    x = \"Mätvärden\"\n  ) +\n  theme(\n    #axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank()\n  )"
  },
  {
    "objectID": "03_mpvrk/03_mpvrk.html#rekommenderade-items",
    "href": "03_mpvrk/03_mpvrk.html#rekommenderade-items",
    "title": "4  Möjlighet att påverka",
    "section": "4.10 Rekommenderade items",
    "text": "4.10 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 50,\n           options = \"hover\") %>% \n  row_spec(c(4), background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttagna item markerade med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    mp1 \n    Jag har de resurser som behövs för att kunna utföra mina arbetsuppgifter. \n  \n  \n    mp2 \n    Jag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras. \n  \n  \n    mp3 \n    Jag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter. \n  \n  \n    mp4 \n    Jag kan påverka beslut som rör mina arbetsuppgifter. \n  \n  \n    mp5 \n    Jag kan själv bestämma min arbetstakt. \n  \n\n\nNotera: \n\n Borttagna item markerade med färg.\n\n\n\n\n\n\n4.10.1 Förändringar i svarskategorier\n\n\nCode\ndf.omit.na$mp1<-recode(df.omit.na$mp1,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$mp3<-recode(df.omit.na$mp3,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n\ndf.omit.na$mp2<-recode(df.omit.na$mp2,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$mp5<-recode(df.omit.na$mp5,\"2=1;3=2;4=3;5=4\",as.factor=FALSE)"
  },
  {
    "objectID": "04_std/04_std.html#items",
    "href": "04_std/04_std.html#items",
    "title": "5  Stöd",
    "section": "5.1 Items",
    "text": "5.1 Items\n\n\nCode\nitemlabels %>% \n  kbl_rise(width = 60)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    st1 \n    Jag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet. \n  \n  \n    st2 \n    Det finns personer på mitt arbete som jag kan prata förtroligt med. \n  \n  \n    st3 \n    Vi samarbetar bra på min arbetsplats. \n  \n  \n    st4 \n    Jag visar uppskattning till mina kollegor för deras arbetsinsatser. \n  \n  \n    st5 \n    Mina kollegor visar uppskattning för mina arbetsinsatser. \n  \n  \n    st6 \n    Jag får tekniskt stöd vid behov. \n  \n  \n    st7 \n    Jag kan få handledning i mitt arbete om jag behöver det."
  },
  {
    "objectID": "04_std/04_std.html#bakgrundsdata",
    "href": "04_std/04_std.html#bakgrundsdata",
    "title": "5  Stöd",
    "section": "5.2 Bakgrundsdata",
    "text": "5.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n5.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"st\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0008\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0008\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n5.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n947\n\n\n27.8\n\n\n\n\nMycket ofta\n\n\n1149\n\n\n33.8\n\n\n\n\nGanska ofta\n\n\n727\n\n\n21.4\n\n\n\n\nIbland \n\n\n375\n\n\n11.0\n\n\n\n\nSällan \n\n\n146\n\n\n4.3\n\n\n\n\nAldrig \n\n\n58\n\n\n1.7\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\n\n\n5.2.3 Descriptives - all items\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVi har väldigt få svar i lägsta kategorierna, i synnerhet för item st4. Vi slår därför ihop svarskategori 0 (aldrig) och 1 (sällan) för st4.\n\n\nCode\n#Temporärt slå ihop svarskategorier så att analyserna funkar\n\n# df.omit.na$st1<-recode(df.omit.na$st1,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n# df.omit.na$st2<-recode(df.omit.na$st2,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n# df.omit.na$st3<-recode(df.omit.na$st3,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$st4 <- recode(df.omit.na$st4,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n# df.omit.na$st5<-recode(df.omit.na$st5,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n# df.omit.na$st6<-recode(df.omit.na$st6,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n# df.omit.na$st4<-recode(df.omit.na$st4,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)"
  },
  {
    "objectID": "04_std/04_std.html#rasch-analys-1",
    "href": "04_std/04_std.html#rasch-analys-1",
    "title": "5  Stöd",
    "section": "5.3 Rasch-analys 1",
    "text": "5.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst3\n\n\nVi samarbetar bra på min arbetsplats.\n\n\n\n\nst4\n\n\nJag visar uppskattning till mina kollegor för deras arbetsinsatser.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\nst6\n\n\nJag får tekniskt stöd vid behov.\n\n\n\n\nst7\n\n\nJag kan få handledning i mitt arbete om jag behöver det.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df.omit.na, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    st1 \n    0.721 \n    0.763 \n    -2.854 \n    -2.512 \n  \n  \n    st2 \n    0.837 \n    0.853 \n    -1.392 \n    -1.449 \n  \n  \n    st3 \n    0.698 \n    0.678 \n    -3.334 \n    -3.558 \n  \n  \n    st4 \n    0.961 \n    1.013 \n    -0.474 \n    0.201 \n  \n  \n    st5 \n    0.905 \n    0.876 \n    -1.194 \n    -1.388 \n  \n  \n    st6 \n    1.092 \n    1.008 \n    0.953 \n    0.006 \n  \n  \n    st7 \n    0.961 \n    0.907 \n    -0.377 \n    -1.016 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    2.15 \n  \n  \n    1.37 \n  \n  \n    1.05 \n  \n  \n    0.96 \n  \n  \n    0.84 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    st1 \n    st2 \n    st3 \n    st4 \n    st5 \n    st6 \n    st7 \n  \n \n\n  \n    st1 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    -0.09 \n     \n     \n     \n     \n     \n     \n  \n  \n    st3 \n    -0.14 \n    0.07 \n     \n     \n     \n     \n     \n  \n  \n    st4 \n    -0.39 \n    -0.14 \n    0.02 \n     \n     \n     \n     \n  \n  \n    st5 \n    -0.36 \n    -0.08 \n    -0.01 \n    0.37 \n     \n     \n     \n  \n  \n    st6 \n    0.02 \n    -0.29 \n    -0.25 \n    -0.3 \n    -0.27 \n     \n     \n  \n  \n    st7 \n    0.14 \n    -0.33 \n    -0.26 \n    -0.28 \n    -0.37 \n    -0.03 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.058, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nDen initiala analysen indikerar problem med dimensionalitet (PCA eigenvalue > 2 och en tydlig uppdelning i 1st contrast loadings).\nDet finns även residualkorrelationer över rekommenderade tröskelvärden (st2 och st3, st4 och st5, samt st1 och st7).\nEftersom st4 både sticker ut både tematiskt (fokuserar på det egna beteendet till skillnad från resterande items) samt har en stark residualkorrelation med st5, tas detta item bort från vidare analys.\nFlera items har problem med de lägsta svarskategorierna. Vi avvaktar lite med åtgärd.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"st4\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!any_of(removed_items))"
  },
  {
    "objectID": "04_std/04_std.html#rasch-analys-2",
    "href": "04_std/04_std.html#rasch-analys-2",
    "title": "5  Stöd",
    "section": "5.4 Rasch-analys 2",
    "text": "5.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst3\n\n\nVi samarbetar bra på min arbetsplats.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\nst6\n\n\nJag får tekniskt stöd vid behov.\n\n\n\n\nst7\n\n\nJag kan få handledning i mitt arbete om jag behöver det.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    st1 \n    0.66 \n    0.702 \n    -3.655 \n    -3.208 \n  \n  \n    st2 \n    0.837 \n    0.861 \n    -1.548 \n    -1.424 \n  \n  \n    st3 \n    0.719 \n    0.72 \n    -2.902 \n    -2.987 \n  \n  \n    st5 \n    1.048 \n    1.003 \n    0.534 \n    -0.21 \n  \n  \n    st6 \n    1.018 \n    0.968 \n    0.16 \n    -0.233 \n  \n  \n    st7 \n    0.88 \n    0.861 \n    -1.309 \n    -1.466 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.86 \n  \n  \n    1.25 \n  \n  \n    1.06 \n  \n  \n    0.94 \n  \n  \n    0.88 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    st1 \n    st2 \n    st3 \n    st5 \n    st6 \n    st7 \n  \n \n\n  \n    st1 \n     \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    -0.15 \n     \n     \n     \n     \n     \n  \n  \n    st3 \n    -0.19 \n    0.07 \n     \n     \n     \n     \n  \n  \n    st5 \n    -0.35 \n    -0.04 \n    0.05 \n     \n     \n     \n  \n  \n    st6 \n    -0.05 \n    -0.35 \n    -0.27 \n    -0.24 \n     \n     \n  \n  \n    st7 \n    0.08 \n    -0.39 \n    -0.28 \n    -0.33 \n    -0.1 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.032, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df2, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nVi har två kluster av items, ett med items 1, 6 och 7 som handlar om mera praktiskt stöd i arbetet, och ett med items 2, 3 och 5 som handlar om socialt stöd.\nEftersom st3 har något hög residualkorrelation med både st2 och st5 tar vi bort st3 från vidare analys.\nVi slår samman de två lägsta svarskategorierna för st1 eftersom de är oordnade.\nÄven st2 har problem, men i mitten av skalan. Vi slår därför samman svarskategori 0+1 och 2+3.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"st4\", \"st3\")\n\n# select all items except those removed\ndf2 <- df2 %>%\n  select(!any_of(removed_items)) %>%\n  mutate(\n    st1 = recode(st1, \"1=0;2=1;3=2;4=3;5=4\"),\n    st2 = recode(st2, \"1=0;2=1;3=1;4=2;5=3\")\n  )"
  },
  {
    "objectID": "04_std/04_std.html#rasch-analys-3",
    "href": "04_std/04_std.html#rasch-analys-3",
    "title": "5  Stöd",
    "section": "5.5 Rasch-analys 3",
    "text": "5.5 Rasch-analys 3\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\nst6\n\n\nJag får tekniskt stöd vid behov.\n\n\n\n\nst7\n\n\nJag kan få handledning i mitt arbete om jag behöver det.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    st1 \n    0.612 \n    0.633 \n    -4.585 \n    -4.364 \n  \n  \n    st2 \n    0.859 \n    0.872 \n    -1.336 \n    -1.641 \n  \n  \n    st5 \n    1.065 \n    1.033 \n    0.865 \n    0.206 \n  \n  \n    st6 \n    0.889 \n    0.861 \n    -1.17 \n    -1.382 \n  \n  \n    st7 \n    0.765 \n    0.749 \n    -2.764 \n    -2.974 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.68 \n  \n  \n    1.32 \n  \n  \n    1.14 \n  \n  \n    0.86 \n  \n  \n    0.00 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    st1 \n    st2 \n    st5 \n    st6 \n    st7 \n  \n \n\n  \n    st1 \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    -0.05 \n     \n     \n     \n     \n  \n  \n    st5 \n    -0.35 \n    0.03 \n     \n     \n     \n  \n  \n    st6 \n    -0.13 \n    -0.3 \n    -0.28 \n     \n     \n  \n  \n    st7 \n    0.01 \n    -0.36 \n    -0.37 \n    -0.21 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.001, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df2, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\n\n5.5.1 Targeting\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\nFigur 5.1: Targeting för området Stöd\n\n\n\n\nAnalysen visar att st1 har en något låg item fit, men ändå över MSQ 0.6. Det finns också två residualkorrelationer som går strax över gränsvärdet, men ligger mycket nära. Vi gör inga ytterligare åtgärder."
  },
  {
    "objectID": "04_std/04_std.html#dif-analysis",
    "href": "04_std/04_std.html#dif-analysis",
    "title": "5  Stöd",
    "section": "5.6 DIF-analysis",
    "text": "5.6 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\nIngen DIF baserat på kön, ålder, bransch och hemarbete över rekommenderade gränsvärden."
  },
  {
    "objectID": "04_std/04_std.html#reliability",
    "href": "04_std/04_std.html#reliability",
    "title": "5  Stöd",
    "section": "5.7 Reliability",
    "text": "5.7 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nFigur 5.2: Reliabilitet för området Stöd\n\n\n\n\nReliabiliteten kommer upp i önskade nivåer på vissa delar av skalan. Vi går vidare och plockar ut item-parametrar och en konverteringstabell."
  },
  {
    "objectID": "04_std/04_std.html#person-fit",
    "href": "04_std/04_std.html#person-fit",
    "title": "5  Stöd",
    "section": "5.8 Person fit",
    "text": "5.8 Person fit\n\n\nCode\nRIpfit(df2)"
  },
  {
    "objectID": "04_std/04_std.html#item-parametrar",
    "href": "04_std/04_std.html#item-parametrar",
    "title": "5  Stöd",
    "section": "5.9 Item-parametrar",
    "text": "5.9 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Threshold 3 \n    Threshold 4 \n    Threshold 5 \n    Item location \n  \n \n\n  \n    st1 \n    -0.84 \n    -0.07 \n    0.49 \n    2.04 \n    NA \n    0.4 \n  \n  \n    st2 \n    -1.00 \n    1.03 \n    1.35 \n    NA \n    NA \n    0.46 \n  \n  \n    st5 \n    -1.99 \n    -0.89 \n    0.45 \n    1.27 \n    2.90 \n    0.35 \n  \n  \n    st6 \n    -1.21 \n    -0.35 \n    0.31 \n    1.21 \n    2.34 \n    0.46 \n  \n  \n    st7 \n    -0.36 \n    0.54 \n    0.85 \n    1.51 \n    2.63 \n    1.04"
  },
  {
    "objectID": "04_std/04_std.html#transformeringstabell",
    "href": "04_std/04_std.html#transformeringstabell",
    "title": "5  Stöd",
    "section": "5.10 Transformeringstabell",
    "text": "5.10 Transformeringstabell\n\n\nCode\nRIscoreSE(df2 , width = 50)\n\n\n\n\n \n  \n    Ordinal sum score \n    Logit score \n    Logit std.error \n  \n \n\n  \n    0 \n    -3.575 \n    1.503 \n  \n  \n    1 \n    -2.384 \n    0.899 \n  \n  \n    2 \n    -1.778 \n    0.719 \n  \n  \n    3 \n    -1.348 \n    0.625 \n  \n  \n    4 \n    -1.007 \n    0.567 \n  \n  \n    5 \n    -0.720 \n    0.527 \n  \n  \n    6 \n    -0.467 \n    0.498 \n  \n  \n    7 \n    -0.238 \n    0.478 \n  \n  \n    8 \n    -0.025 \n    0.463 \n  \n  \n    9 \n    0.176 \n    0.452 \n  \n  \n    10 \n    0.369 \n    0.446 \n  \n  \n    11 \n    0.559 \n    0.444 \n  \n  \n    12 \n    0.747 \n    0.445 \n  \n  \n    13 \n    0.938 \n    0.450 \n  \n  \n    14 \n    1.135 \n    0.460 \n  \n  \n    15 \n    1.343 \n    0.474 \n  \n  \n    16 \n    1.568 \n    0.496 \n  \n  \n    17 \n    1.819 \n    0.525 \n  \n  \n    18 \n    2.107 \n    0.567 \n  \n  \n    19 \n    2.451 \n    0.628 \n  \n  \n    20 \n    2.889 \n    0.725 \n  \n  \n    21 \n    3.510 \n    0.909 \n  \n  \n    22 \n    4.000 \n    1.107 \n  \n\n\n\n\n\n\n5.10.1 Estimering av mätvärden\n\n\nCode\ndf2$score <- RIestThetas(df2)\nwrite.csv(df2, \"scored.csv\")\nsummary(df2$score)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n-1.7780  0.7471  1.3430  1.5359  2.1066  4.0000 \n\n\n\n\nCode\nggplot(\n  data = df2,\n  aes(x = score, y = 0, fill = factor(score))\n  ) +\n  geom_dotplot(color = \"white\", \n                dotsize = 1,\n                binwidth = 0.11) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n    # errorbar has brackets at the endpoints\n  geom_errorbar(\n    aes(\n      xmin = mean(score) - sd(score),\n      xmax = mean(score) + sd(score),\n      y = 0,\n      width = 0.025\n    ),\n    color = \"black\"\n  ) +\n  theme_minimal(base_family = \"Lato\") +\n  theme_rise() +\n  coord_cartesian(xlim = c(-4,4)) +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Mätvärden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde, strecken runt indikerar en standardavvikelse.\",\n    y = \"Antal respondenter\",\n    x = \"Mätvärden\"\n  ) +\n  theme(\n    #axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank()\n  )"
  },
  {
    "objectID": "04_std/04_std.html#rekommenderade-items",
    "href": "04_std/04_std.html#rekommenderade-items",
    "title": "5  Stöd",
    "section": "5.11 Rekommenderade items",
    "text": "5.11 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 50,\n           options = \"hover\") %>% \n  row_spec(c(3,4), background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttagna item markerade med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    st1 \n    Jag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet. \n  \n  \n    st2 \n    Det finns personer på mitt arbete som jag kan prata förtroligt med. \n  \n  \n    st3 \n    Vi samarbetar bra på min arbetsplats. \n  \n  \n    st4 \n    Jag visar uppskattning till mina kollegor för deras arbetsinsatser. \n  \n  \n    st5 \n    Mina kollegor visar uppskattning för mina arbetsinsatser. \n  \n  \n    st6 \n    Jag får tekniskt stöd vid behov. \n  \n  \n    st7 \n    Jag kan få handledning i mitt arbete om jag behöver det. \n  \n\n\nNotera: \n\n Borttagna item markerade med färg.\n\n\n\n\n\n\n5.11.1 Förändringar i svarskategorier\n\n\nCode\nst1 = recode(st1, \"1=0;2=1;3=2;4=3;5=4\")\nst2 = recode(st2, \"1=0;2=1;3=1;4=2;5=3\")\n\n\nTest med Stöd delad i två?"
  },
  {
    "objectID": "05_rec/05_rec.html#items",
    "href": "05_rec/05_rec.html#items",
    "title": "6  Återhämtning",
    "section": "6.1 Items",
    "text": "6.1 Items\n\n\nCode\nitemlabels %>% \n  kbl_rise(width = 60)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    å1 \n    Jag kan använda raster till att koppla av från arbetet. \n  \n  \n    å2 \n    Jag har möjlighet att arbeta i lugnare takt efter arbetsintensiva perioder. \n  \n  \n    å3 \n    Jag har tid för reflektion över hur jag har utfört arbetet. \n  \n  \n    å4 \n    Jag har ork kvar för att göra andra saker efter arbetsdagens slut. \n  \n  \n    å5 \n    Jag kan lägga tankar på arbetet åt sidan på min lediga tid."
  },
  {
    "objectID": "05_rec/05_rec.html#bakgrundsdata",
    "href": "05_rec/05_rec.html#bakgrundsdata",
    "title": "6  Återhämtning",
    "section": "6.2 Bakgrundsdata",
    "text": "6.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n6.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"å\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0009\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0009\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n6.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n261\n\n\n10.7\n\n\n\n\nMycket ofta\n\n\n562\n\n\n23.0\n\n\n\n\nGanska ofta\n\n\n624\n\n\n25.6\n\n\n\n\nIbland \n\n\n538\n\n\n22.0\n\n\n\n\nSällan \n\n\n363\n\n\n14.9\n\n\n\n\nAldrig \n\n\n92\n\n\n3.8\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\n\n\n6.2.3 Descriptives - all items\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVi har tillräckligt med svar i samtliga svarskategorier och fortsätter därför till analysen utan omkodning."
  },
  {
    "objectID": "05_rec/05_rec.html#rasch-analys-1",
    "href": "05_rec/05_rec.html#rasch-analys-1",
    "title": "6  Återhämtning",
    "section": "6.3 Rasch-analys 1",
    "text": "6.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nå1\n\n\nJag kan använda raster till att koppla av från arbetet.\n\n\n\n\nå2\n\n\nJag har möjlighet att arbeta i lugnare takt efter arbetsintensiva perioder.\n\n\n\n\nå3\n\n\nJag har tid för reflektion över hur jag har utfört arbetet.\n\n\n\n\nå4\n\n\nJag har ork kvar för att göra andra saker efter arbetsdagens slut.\n\n\n\n\nå5\n\n\nJag kan lägga tankar på arbetet åt sidan på min lediga tid.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df.omit.na, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    å1 \n    0.82 \n    0.814 \n    -2.173 \n    -2.133 \n  \n  \n    å2 \n    0.669 \n    0.673 \n    -4.089 \n    -4.187 \n  \n  \n    å3 \n    0.665 \n    0.676 \n    -4.351 \n    -4.176 \n  \n  \n    å4 \n    0.82 \n    0.813 \n    -2.206 \n    -2.185 \n  \n  \n    å5 \n    1.172 \n    1.129 \n    1.902 \n    1.392 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.82 \n  \n  \n    1.34 \n  \n  \n    1.01 \n  \n  \n    0.82 \n  \n  \n    0.00 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    å1 \n    å2 \n    å3 \n    å4 \n    å5 \n  \n \n\n  \n    å1 \n     \n     \n     \n     \n     \n  \n  \n    å2 \n    -0.15 \n     \n     \n     \n     \n  \n  \n    å3 \n    -0.2 \n    0.21 \n     \n     \n     \n  \n  \n    å4 \n    -0.34 \n    -0.26 \n    -0.21 \n     \n     \n  \n  \n    å5 \n    -0.25 \n    -0.45 \n    -0.45 \n    -0.09 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.019, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nÖverlag ser analysens utfall bra ut (förutom något låg item fit för å2 och å3). Dock finns en stor residualkorrelation mellan å2 och å3. Båda har något låg item fit och utifrån targeting tar vi bort item å2, eftersom svarströskel 4 (T4) för å3 fyller ut en region där vi annars saknar svarströsklar.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"å2\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items))"
  },
  {
    "objectID": "05_rec/05_rec.html#rasch-analys-2",
    "href": "05_rec/05_rec.html#rasch-analys-2",
    "title": "6  Återhämtning",
    "section": "6.4 Rasch-analys 2",
    "text": "6.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nå1\n\n\nJag kan använda raster till att koppla av från arbetet.\n\n\n\n\nå3\n\n\nJag har tid för reflektion över hur jag har utfört arbetet.\n\n\n\n\nå4\n\n\nJag har ork kvar för att göra andra saker efter arbetsdagens slut.\n\n\n\n\nå5\n\n\nJag kan lägga tankar på arbetet åt sidan på min lediga tid.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    å1 \n    0.758 \n    0.748 \n    -2.788 \n    -2.862 \n  \n  \n    å3 \n    0.718 \n    0.727 \n    -3.511 \n    -3.51 \n  \n  \n    å4 \n    0.703 \n    0.706 \n    -3.818 \n    -3.777 \n  \n  \n    å5 \n    0.932 \n    0.922 \n    -0.806 \n    -0.896 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.59 \n  \n  \n    1.39 \n  \n  \n    1.02 \n  \n  \n    0.00 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    å1 \n    å3 \n    å4 \n    å5 \n  \n \n\n  \n    å1 \n     \n     \n     \n     \n  \n  \n    å3 \n    -0.13 \n     \n     \n     \n  \n  \n    å4 \n    -0.39 \n    -0.16 \n     \n     \n  \n  \n    å5 \n    -0.35 \n    -0.47 \n    -0.21 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.084, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\n\n6.4.1 Targeting\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\nFigur 6.1: Targeting för området Återhämtning\n\n\n\n\nFörutom en något låg item fit för å1, å3 och å4 (zstd) ser analysens utfall bra ut. Vi går vidare till att undersöka DIF och reliabilitet."
  },
  {
    "objectID": "05_rec/05_rec.html#dif-analysis",
    "href": "05_rec/05_rec.html#dif-analysis",
    "title": "6  Återhämtning",
    "section": "6.5 DIF-analysis",
    "text": "6.5 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\nInga problem med DIF baserat på kön, ålder, bransch och hemarbete."
  },
  {
    "objectID": "05_rec/05_rec.html#reliability",
    "href": "05_rec/05_rec.html#reliability",
    "title": "6  Återhämtning",
    "section": "6.6 Reliability",
    "text": "6.6 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nFigur 6.2: Reliabilitet för området Återhämtning\n\n\n\n\nReliabiliteten kommer upp i önskade nivåer på vissa delar av skalan. Vi går vidare och tar fram item-parametrar och en konverteringstabell."
  },
  {
    "objectID": "05_rec/05_rec.html#person-fit",
    "href": "05_rec/05_rec.html#person-fit",
    "title": "6  Återhämtning",
    "section": "6.7 Person fit",
    "text": "6.7 Person fit\n\n\nCode\nRIpfit(df2)"
  },
  {
    "objectID": "05_rec/05_rec.html#item-parametrar",
    "href": "05_rec/05_rec.html#item-parametrar",
    "title": "6  Återhämtning",
    "section": "6.8 Item-parametrar",
    "text": "6.8 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Threshold 3 \n    Threshold 4 \n    Threshold 5 \n    Item location \n  \n \n\n  \n    å1 \n    -1.73 \n    0.22 \n    0.89 \n    1.33 \n    3.19 \n    0.78 \n  \n  \n    å3 \n    -2.11 \n    0.11 \n    1.02 \n    2.36 \n    3.21 \n    0.92 \n  \n  \n    å4 \n    -1.97 \n    -0.24 \n    0.66 \n    1.76 \n    3.19 \n    0.68 \n  \n  \n    å5 \n    -1.57 \n    -0.15 \n    0.86 \n    1.50 \n    3.37 \n    0.8 \n  \n\n\n\n\n\nCode\n#RIitemparams(df2, \"itemParams_rec.csv\")"
  },
  {
    "objectID": "05_rec/05_rec.html#transformeringstabell",
    "href": "05_rec/05_rec.html#transformeringstabell",
    "title": "6  Återhämtning",
    "section": "6.9 Transformeringstabell",
    "text": "6.9 Transformeringstabell\n\n\nCode\nRIscoreSE(df2, width = 50, sdx = 10, score_range = c(-3,4))\n\n\n\n\n \n  \n    Ordinal sum score \n    Logit score \n    Logit std.error \n  \n \n\n  \n    0 \n    -3.000 \n    1.069 \n  \n  \n    2 \n    -2.014 \n    0.808 \n  \n  \n    3 \n    -1.458 \n    0.719 \n  \n  \n    4 \n    -0.989 \n    0.658 \n  \n  \n    5 \n    -0.587 \n    0.611 \n  \n  \n    6 \n    -0.240 \n    0.574 \n  \n  \n    7 \n    0.064 \n    0.545 \n  \n  \n    8 \n    0.339 \n    0.526 \n  \n  \n    9 \n    0.595 \n    0.514 \n  \n  \n    10 \n    0.842 \n    0.509 \n  \n  \n    11 \n    1.088 \n    0.512 \n  \n  \n    12 \n    1.341 \n    0.521 \n  \n  \n    13 \n    1.611 \n    0.537 \n  \n  \n    14 \n    1.905 \n    0.560 \n  \n  \n    15 \n    2.230 \n    0.589 \n  \n  \n    16 \n    2.593 \n    0.627 \n  \n  \n    17 \n    3.003 \n    0.680 \n  \n  \n    18 \n    3.491 \n    0.766 \n  \n\n\n\n\n\n\n6.9.1 Estimering av mätvärden\n\n\nCode\ndf2$score <- RIestThetas(df2, theta_range = c(-3,4))\nwrite.csv(df2, \"scored.csv\")\nsummary(df2$score)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n-3.0000  0.3393  1.0880  1.2141  2.2301  4.0000 \n\n\n\n\nCode\n#df2 <- read_csv(\"05_rec/scored.csv\")\n\nggplot(\n  data = df2,\n  aes(x = score, y = 0, fill = factor(score))\n  ) +\n  geom_dotplot(color = \"white\", \n                dotsize = 1,\n                binwidth = 0.12) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n    # errorbar has brackets at the endpoints\n  geom_errorbar(\n    aes(\n      xmin = mean(score) - sd(score),\n      xmax = mean(score) + sd(score),\n      y = 0,\n      width = 0.025\n    ),\n    color = \"black\"\n  ) +\n  theme_minimal(base_family = \"Lato\") +\n  theme_rise() +\n  coord_cartesian(xlim = c(-3,4)) +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Mätvärden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde, strecken runt indikerar en standardavvikelse.\",\n    y = \"Antal respondenter\",\n    x = \"Mätvärden\"\n  ) +\n  theme(\n    #axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank()\n  )"
  },
  {
    "objectID": "05_rec/05_rec.html#rekommenderade-items",
    "href": "05_rec/05_rec.html#rekommenderade-items",
    "title": "6  Återhämtning",
    "section": "6.10 Rekommenderade items",
    "text": "6.10 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 50,\n           options = \"hover\") %>% \n  row_spec(c(2), background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttagna item markerade med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    å1 \n    Jag kan använda raster till att koppla av från arbetet. \n  \n  \n    å2 \n    Jag har möjlighet att arbeta i lugnare takt efter arbetsintensiva perioder. \n  \n  \n    å3 \n    Jag har tid för reflektion över hur jag har utfört arbetet. \n  \n  \n    å4 \n    Jag har ork kvar för att göra andra saker efter arbetsdagens slut. \n  \n  \n    å5 \n    Jag kan lägga tankar på arbetet åt sidan på min lediga tid. \n  \n\n\nNotera: \n\n Borttagna item markerade med färg.\n\n\n\n\n\n\n6.10.1 Förändringar i svarskategorier\nInga."
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#items",
    "href": "06_ldrskp/06_ldrskp.html#items",
    "title": "7  Ledarskap",
    "section": "7.1 Items",
    "text": "7.1 Items\n\n\nCode\nitemlabels %>% \n  kbl_rise(width = 60)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ls1 \n    Min chef ger mig återkoppling på hur jag utför arbetet. \n  \n  \n    ls2 \n    Min chef har en god uppfattning om min arbetsbelastning. \n  \n  \n    ls3 \n    Min chef agerar om jag har allt för mycket arbete att utföra. \n  \n  \n    ls4 \n    Min chef ser till att alla kommer till tals. \n  \n  \n    ls5 \n    Min chef hanterar konflikter på ett bra sätt. \n  \n  \n    ls6 \n    Min chef och jag har tillräckligt med avstämningar."
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#bakgrundsdata",
    "href": "06_ldrskp/06_ldrskp.html#bakgrundsdata",
    "title": "7  Ledarskap",
    "section": "7.2 Bakgrundsdata",
    "text": "7.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n7.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"ls\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0010\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0010\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n7.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n497\n\n\n17.4\n\n\n\n\nMycket ofta\n\n\n712\n\n\n24.9\n\n\n\n\nGanska ofta\n\n\n665\n\n\n23.2\n\n\n\n\nIbland \n\n\n494\n\n\n17.3\n\n\n\n\nSällan \n\n\n347\n\n\n12.1\n\n\n\n\nAldrig \n\n\n147\n\n\n5.1\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\n\n\n7.2.3 Descriptives - all items\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVi har tillräckligt många svar för samtliga svarskategorier och items så vi går vidare och utför analysen."
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#rasch-analys-1",
    "href": "06_ldrskp/06_ldrskp.html#rasch-analys-1",
    "title": "7  Ledarskap",
    "section": "7.3 Rasch-analys 1",
    "text": "7.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nls1\n\n\nMin chef ger mig återkoppling på hur jag utför arbetet.\n\n\n\n\nls2\n\n\nMin chef har en god uppfattning om min arbetsbelastning.\n\n\n\n\nls3\n\n\nMin chef agerar om jag har allt för mycket arbete att utföra.\n\n\n\n\nls4\n\n\nMin chef ser till att alla kommer till tals.\n\n\n\n\nls5\n\n\nMin chef hanterar konflikter på ett bra sätt.\n\n\n\n\nls6\n\n\nMin chef och jag har tillräckligt med avstämningar.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df.omit.na, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    ls1 \n    0.815 \n    0.772 \n    -2.211 \n    -2.681 \n  \n  \n    ls2 \n    0.754 \n    0.764 \n    -3.148 \n    -2.947 \n  \n  \n    ls3 \n    0.87 \n    0.832 \n    -1.36 \n    -1.909 \n  \n  \n    ls4 \n    0.821 \n    0.853 \n    -1.866 \n    -1.575 \n  \n  \n    ls5 \n    0.926 \n    0.932 \n    -0.639 \n    -0.718 \n  \n  \n    ls6 \n    0.929 \n    0.97 \n    -0.6 \n    -0.26 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.92 \n  \n  \n    1.38 \n  \n  \n    0.99 \n  \n  \n    0.93 \n  \n  \n    0.77 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    ls1 \n    ls2 \n    ls3 \n    ls4 \n    ls5 \n    ls6 \n  \n \n\n  \n    ls1 \n     \n     \n     \n     \n     \n     \n  \n  \n    ls2 \n    0.03 \n     \n     \n     \n     \n     \n  \n  \n    ls3 \n    -0.09 \n    0.09 \n     \n     \n     \n     \n  \n  \n    ls4 \n    -0.36 \n    -0.32 \n    -0.27 \n     \n     \n     \n  \n  \n    ls5 \n    -0.35 \n    -0.41 \n    -0.29 \n    0.23 \n     \n     \n  \n  \n    ls6 \n    -0.03 \n    -0.18 \n    -0.33 \n    -0.26 \n    -0.25 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.013, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nÖverlag ser analysens utfall bra ut. Dock finns det en residualkorrelation mellan ls4 och ls5 klart över rekommenderade gränsvärden. Vi testar att ta bort ls4 från vidare analys.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"ls4\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items))"
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#rasch-analys-2",
    "href": "06_ldrskp/06_ldrskp.html#rasch-analys-2",
    "title": "7  Ledarskap",
    "section": "7.4 Rasch-analys 2",
    "text": "7.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nls1\n\n\nMin chef ger mig återkoppling på hur jag utför arbetet.\n\n\n\n\nls2\n\n\nMin chef har en god uppfattning om min arbetsbelastning.\n\n\n\n\nls3\n\n\nMin chef agerar om jag har allt för mycket arbete att utföra.\n\n\n\n\nls5\n\n\nMin chef hanterar konflikter på ett bra sätt.\n\n\n\n\nls6\n\n\nMin chef och jag har tillräckligt med avstämningar.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    ls1 \n    0.718 \n    0.688 \n    -3.457 \n    -3.89 \n  \n  \n    ls2 \n    0.68 \n    0.691 \n    -3.905 \n    -3.643 \n  \n  \n    ls3 \n    0.796 \n    0.773 \n    -2.427 \n    -2.823 \n  \n  \n    ls5 \n    1.056 \n    1.055 \n    0.602 \n    0.755 \n  \n  \n    ls6 \n    0.869 \n    0.909 \n    -1.179 \n    -1.094 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.55 \n  \n  \n    1.40 \n  \n  \n    1.07 \n  \n  \n    0.96 \n  \n  \n    0.01 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    ls1 \n    ls2 \n    ls3 \n    ls5 \n    ls6 \n  \n \n\n  \n    ls1 \n     \n     \n     \n     \n     \n  \n  \n    ls2 \n    -0.07 \n     \n     \n     \n     \n  \n  \n    ls3 \n    -0.19 \n    0.01 \n     \n     \n     \n  \n  \n    ls5 \n    -0.34 \n    -0.38 \n    -0.26 \n     \n     \n  \n  \n    ls6 \n    -0.12 \n    -0.28 \n    -0.43 \n    -0.22 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.027, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\n\n7.4.1 Targeting\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\nFigur 7.1: Targeting för området Ledarskap\n\n\n\n\nFörutom en något låg item fit för ls2 ser analysens utfall bra ut. Vi går vidare med att undersöka DIF och reliabilitet."
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#dif-analysis",
    "href": "06_ldrskp/06_ldrskp.html#dif-analysis",
    "title": "7  Ledarskap",
    "section": "7.5 DIF-analysis",
    "text": "7.5 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\nDet verkar finnas mindre DIF-effekter baserade på ålder och kön. Dock är skillnaden i item location inte tillräckligt stor (enligt rekommenderade tröskelvärden) för att motivera exkludering av items. Vi går vidare och undersöker reliabilitet."
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#reliability",
    "href": "06_ldrskp/06_ldrskp.html#reliability",
    "title": "7  Ledarskap",
    "section": "7.6 Reliability",
    "text": "7.6 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nFigur 7.2: Reliabilitet för området Ledarskap"
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#person-fit",
    "href": "06_ldrskp/06_ldrskp.html#person-fit",
    "title": "7  Ledarskap",
    "section": "7.7 Person fit",
    "text": "7.7 Person fit\n\n\nCode\nRIpfit(df2)"
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#item-parametrar",
    "href": "06_ldrskp/06_ldrskp.html#item-parametrar",
    "title": "7  Ledarskap",
    "section": "7.8 Item-parametrar",
    "text": "7.8 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Threshold 3 \n    Threshold 4 \n    Threshold 5 \n    Item location \n  \n \n\n  \n    ls1 \n    -2.02 \n    -0.15 \n    0.79 \n    2.23 \n    4.20 \n    1.01 \n  \n  \n    ls2 \n    -1.73 \n    -0.14 \n    0.48 \n    1.60 \n    4.14 \n    0.87 \n  \n  \n    ls3 \n    -1.77 \n    0.37 \n    1.24 \n    2.19 \n    3.41 \n    1.09 \n  \n  \n    ls5 \n    -1.29 \n    -0.28 \n    0.69 \n    1.61 \n    3.06 \n    0.76 \n  \n  \n    ls6 \n    -1.71 \n    -0.40 \n    0.27 \n    1.14 \n    2.27 \n    0.31 \n  \n\n\n\n\n\nCode\n#RIitemparams(df2, \"itemParams_ldrskp.csv\")"
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#transformeringstabell",
    "href": "06_ldrskp/06_ldrskp.html#transformeringstabell",
    "title": "7  Ledarskap",
    "section": "7.9 Transformeringstabell",
    "text": "7.9 Transformeringstabell\n\n\nCode\nRIscoreSE(df2, width = 50, score_range = c(-3,5))\n\n\n\n\n \n  \n    Ordinal sum score \n    Logit score \n    Logit std.error \n  \n \n\n  \n    0 \n    -3.000 \n    0.982 \n  \n  \n    2 \n    -2.208 \n    0.753 \n  \n  \n    3 \n    -1.734 \n    0.660 \n  \n  \n    4 \n    -1.350 \n    0.602 \n  \n  \n    5 \n    -1.021 \n    0.560 \n  \n  \n    6 \n    -0.732 \n    0.529 \n  \n  \n    7 \n    -0.471 \n    0.506 \n  \n  \n    8 \n    -0.232 \n    0.489 \n  \n  \n    9 \n    -0.006 \n    0.477 \n  \n  \n    10 \n    0.210 \n    0.470 \n  \n  \n    11 \n    0.421 \n    0.465 \n  \n  \n    12 \n    0.629 \n    0.465 \n  \n  \n    13 \n    0.840 \n    0.467 \n  \n  \n    14 \n    1.054 \n    0.473 \n  \n  \n    15 \n    1.275 \n    0.482 \n  \n  \n    16 \n    1.507 \n    0.494 \n  \n  \n    17 \n    1.754 \n    0.510 \n  \n  \n    18 \n    2.019 \n    0.531 \n  \n  \n    19 \n    2.311 \n    0.558 \n  \n  \n    20 \n    2.637 \n    0.593 \n  \n  \n    21 \n    3.009 \n    0.639 \n  \n  \n    22 \n    3.449 \n    0.702 \n  \n  \n    23 \n    3.989 \n    0.798 \n  \n  \n    24 \n    4.714 \n    0.980 \n  \n  \n    25 \n    5.000 \n    1.077 \n  \n\n\n\n\n\n\n7.9.1 Estimering av mätvärden\n\n\nCode\ndf2$score <- RIestThetas(df2, theta_range = c(-3,5))\nwrite.csv(df2, \"scored.csv\")\nsummary(df2$score)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n-3.0000  0.2101  1.2752  1.3885  2.3109  5.0000 \n\n\n\n\nCode\nggplot(\n  data = df2,\n  aes(x = score, y = 0, fill = factor(score))\n  ) +\n  geom_dotplot(color = \"white\", \n                dotsize = 1,\n                binwidth = 0.13) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n    # errorbar has brackets at the endpoints\n  geom_errorbar(\n    aes(\n      xmin = mean(score) - sd(score),\n      xmax = mean(score) + sd(score),\n      y = 0,\n      width = 0.025\n    ),\n    color = \"black\"\n  ) +\n  theme_minimal(base_family = \"Lato\") +\n  theme_rise() +\n  coord_cartesian(xlim = c(-3,5)) +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Mätvärden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde, strecken runt indikerar en standardavvikelse.\",\n    y = \"Antal respondenter\",\n    x = \"Mätvärden\"\n  ) +\n  theme(\n    #axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank()\n  )"
  },
  {
    "objectID": "06_ldrskp/06_ldrskp.html#rekommenderade-items",
    "href": "06_ldrskp/06_ldrskp.html#rekommenderade-items",
    "title": "7  Ledarskap",
    "section": "7.10 Rekommenderade items",
    "text": "7.10 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 50,\n           options = \"hover\") %>% \n  row_spec(c(4), background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttagna item markerade med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ls1 \n    Min chef ger mig återkoppling på hur jag utför arbetet. \n  \n  \n    ls2 \n    Min chef har en god uppfattning om min arbetsbelastning. \n  \n  \n    ls3 \n    Min chef agerar om jag har allt för mycket arbete att utföra. \n  \n  \n    ls4 \n    Min chef ser till att alla kommer till tals. \n  \n  \n    ls5 \n    Min chef hanterar konflikter på ett bra sätt. \n  \n  \n    ls6 \n    Min chef och jag har tillräckligt med avstämningar. \n  \n\n\nNotera: \n\n Borttagna item markerade med färg.\n\n\n\n\n\n\n7.10.1 Förändringar i svarskategorier"
  },
  {
    "objectID": "07_knskputv/07_knskputv.html#items",
    "href": "07_knskputv/07_knskputv.html#items",
    "title": "8  Kunskaper och utveckling",
    "section": "8.1 Items",
    "text": "8.1 Items\n\n\nCode\nitemlabels %>% \n  kbl_rise(width = 60)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ku1 \n    Mina kunskaper och färdigheter är till nytta i mitt arbete. \n  \n  \n    ku2 \n    Jag har tillräckligt med kunskap/färdigheter för att kunna utföra mina arbetsuppgifter. \n  \n  \n    ku3 \n    Jag har möjlighet att lära mig nya saker när arbetsuppgifterna kräver det. \n  \n  \n    ku4 \n    Jag har möjlighet till långsiktig kompetensutveckling i mitt arbete."
  },
  {
    "objectID": "07_knskputv/07_knskputv.html#bakgrundsdata",
    "href": "07_knskputv/07_knskputv.html#bakgrundsdata",
    "title": "8  Kunskaper och utveckling",
    "section": "8.2 Bakgrundsdata",
    "text": "8.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n8.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"ku\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0011\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0011\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n8.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n619\n\n\n32.6\n\n\n\n\nMycket ofta\n\n\n793\n\n\n41.7\n\n\n\n\nGanska ofta\n\n\n282\n\n\n14.8\n\n\n\n\nIbland \n\n\n124\n\n\n6.5\n\n\n\n\nSällan \n\n\n56\n\n\n2.9\n\n\n\n\nAldrig \n\n\n26\n\n\n1.4\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\n\n\n8.2.3 Descriptives - all items\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTills flera svar samlats in slår vi ihop de två lägsta svarskategorierna med varandra för ku1 och ku2.\n\n\nCode\n#Temporärt slå ihop svarskategorier så att analyserna funkar\n\ndf.omit.na$ku1<-recode(df.omit.na$ku1,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$ku2<-recode(df.omit.na$ku2,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n#df.omit.na$ku3<-recode(df.omit.na$ku3,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n\n# df.omit.na$ku1<-recode(df.omit.na$ku1,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n# df.omit.na$ku2<-recode(df.omit.na$ku2,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)"
  },
  {
    "objectID": "07_knskputv/07_knskputv.html#rasch-analys-1",
    "href": "07_knskputv/07_knskputv.html#rasch-analys-1",
    "title": "8  Kunskaper och utveckling",
    "section": "8.3 Rasch-analys 1",
    "text": "8.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nku1\n\n\nMina kunskaper och färdigheter är till nytta i mitt arbete.\n\n\n\n\nku2\n\n\nJag har tillräckligt med kunskap/färdigheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nku3\n\n\nJag har möjlighet att lära mig nya saker när arbetsuppgifterna kräver det.\n\n\n\n\nku4\n\n\nJag har möjlighet till långsiktig kompetensutveckling i mitt arbete.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM(df.omit.na, samplesize = 250, nsamples = 32)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    ku1 \n    0.857 \n    0.887 \n    -1.438 \n    -1.084 \n  \n  \n    ku2 \n    0.962 \n    0.976 \n    -0.208 \n    -0.06 \n  \n  \n    ku3 \n    0.512 \n    0.502 \n    -5.95 \n    -6.015 \n  \n  \n    ku4 \n    0.716 \n    0.658 \n    -3.149 \n    -4.046 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    2.19 \n  \n  \n    1.07 \n  \n  \n    0.71 \n  \n  \n    0.02 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    ku1 \n    ku2 \n    ku3 \n    ku4 \n  \n \n\n  \n    ku1 \n     \n     \n     \n     \n  \n  \n    ku2 \n    0.34 \n     \n     \n     \n  \n  \n    ku3 \n    -0.36 \n    -0.34 \n     \n     \n  \n  \n    ku4 \n    -0.57 \n    -0.6 \n    0.07 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.044, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nDet ser ut som att frågorna täcker två olika områden, ett med nuvarande kunskaper och deras koppling till arbetet, och ett med lära mig nytt och kompetensutveckling. Det finns kraftiga residualkorrelationer mellan båda paren av items. Det finns också oordnade svarskategorier för flera items.\nEftersom vi bara har fyra items är det tveksamt att det går att hitta en sammansättning med items som fungerar adekvat med detta utgångsläge. Vi provar att ta bort ett item för att testa, och väljer ku1, samt slår samman de två lägsta svarskategorierna för ku2 och ku3.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"ku1\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items)) %>% \n  mutate(ku2 = recode(ku2, \"1=0;2=1;3=2;4=3\"),\n         ku3 = recode(ku3, \"1=0;2=1;3=2;4=3\")\n  )"
  },
  {
    "objectID": "07_knskputv/07_knskputv.html#rasch-analys-2",
    "href": "07_knskputv/07_knskputv.html#rasch-analys-2",
    "title": "8  Kunskaper och utveckling",
    "section": "8.4 Rasch-analys 2",
    "text": "8.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nku2\n\n\nJag har tillräckligt med kunskap/färdigheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nku3\n\n\nJag har möjlighet att lära mig nya saker när arbetsuppgifterna kräver det.\n\n\n\n\nku4\n\n\nJag har möjlighet till långsiktig kompetensutveckling i mitt arbete.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM(df2, samplesize = 250, nsamples = 32)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    ku2 \n    1.102 \n    1.137 \n    1.025 \n    1.353 \n  \n  \n    ku3 \n    0.359 \n    0.382 \n    -7.58 \n    -8.325 \n  \n  \n    ku4 \n    0.555 \n    0.51 \n    -5.39 \n    -6.33 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.65 \n  \n  \n    1.33 \n  \n  \n    0.02 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    ku2 \n    ku3 \n    ku4 \n  \n \n\n  \n    ku2 \n     \n     \n     \n  \n  \n    ku3 \n    -0.27 \n     \n     \n  \n  \n    ku4 \n    -0.61 \n    -0.18 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.153, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df2, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nProblem med bl.a. trösklar och item fit kvarstår. Ytterligare item-exkluderingar leder till för få items."
  },
  {
    "objectID": "07_knskputv/07_knskputv.html#rekommenderade-items",
    "href": "07_knskputv/07_knskputv.html#rekommenderade-items",
    "title": "8  Kunskaper och utveckling",
    "section": "8.5 Rekommenderade items",
    "text": "8.5 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 50,\n           options = \"hover\") %>% \n  row_spec(c(1), background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttagna item markerade med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    ku1 \n    Mina kunskaper och färdigheter är till nytta i mitt arbete. \n  \n  \n    ku2 \n    Jag har tillräckligt med kunskap/färdigheter för att kunna utföra mina arbetsuppgifter. \n  \n  \n    ku3 \n    Jag har möjlighet att lära mig nya saker när arbetsuppgifterna kräver det. \n  \n  \n    ku4 \n    Jag har möjlighet till långsiktig kompetensutveckling i mitt arbete. \n  \n\n\nNotera: \n\n Borttagna item markerade med färg.\n\n\n\n\n\n\n8.5.1 Förändringar i svarskategorier"
  },
  {
    "objectID": "08_krbet/08_krbet.html#items",
    "href": "08_krbet/08_krbet.html#items",
    "title": "9  Kränkande beteenden",
    "section": "9.1 Items",
    "text": "9.1 Items\n\n\nCode\nitemlabels %>% \n  kbl_rise(width = 50)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    kb1 \n    Blivit utsatt för att någon undanhåller information som har påverkat din prestation. \n  \n  \n    kb2 \n    Blivit utsatt för skvaller eller rykten spridda om dig. \n  \n  \n    kb3 \n    Blivit ignorerad eller exkluderad. \n  \n  \n    kb4 \n    Fått kränkande eller stötande kommentarer om dig som person, dina attityder eller ditt privatliv. \n  \n  \n    kb5 \n    Blivit utskälld eller varit föremål för andras aggressiva utbrott. \n  \n  \n    kb6 \n    Blivit påmind om dina felsteg eller misstag. \n  \n  \n    kb7 \n    Blivit utsatt för ett otrevligt bemötande när du närmar dig andra."
  },
  {
    "objectID": "08_krbet/08_krbet.html#bakgrundsdata",
    "href": "08_krbet/08_krbet.html#bakgrundsdata",
    "title": "9  Kränkande beteenden",
    "section": "9.2 Bakgrundsdata",
    "text": "9.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n9.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"kb\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0012\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0012\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n9.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAldrig \n\n\n2060\n\n\n62.3\n\n\n\n\nDet har hänt\n\n\n1077\n\n\n32.6\n\n\n\n\nVarje månad \n\n\n88\n\n\n2.7\n\n\n\n\nVarje vecka \n\n\n57\n\n\n1.7\n\n\n\n\nDagligen \n\n\n22\n\n\n0.7\n\n\n\n\n\n\n\nDet är tveksamt om området kränkande beteenden är lämpat för att utgöra ett index. Rimligen är det förhållandevis få personer som blivit utsatta för kränkningarna som ingår i skalan, vilket påverkar de psykometriska egenskaperna. Analysen utförs dock ändå i explorativt syfte.\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Det har hänt' =1;\n                                            'Varje månad'=2;\n                                            'Varje vecka'=3;\n                                            'Dagligen'=4\",\n                                            as.factor = FALSE)))\n\n\n\n\n9.2.3 Descriptives - all items\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVi har väldigt få svar i högsta kategorierna, vilket kan bero på underlaget, och/eller att förekomsten är låg. Vi slår ihop de högsta två svarsalternativen (dagligen och varje vecka) för att kunna utföra analysen.\n\n\nCode\n#Temporärt slå ihop svarskategorier så att analyserna funkar\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ recode(.x,\"4=3\"))) # Slå ihop svarskategorier"
  },
  {
    "objectID": "08_krbet/08_krbet.html#rasch-analys-1",
    "href": "08_krbet/08_krbet.html#rasch-analys-1",
    "title": "9  Kränkande beteenden",
    "section": "9.3 Rasch-analys 1",
    "text": "9.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nkb1\n\n\nBlivit utsatt för att någon undanhåller information som har påverkat din prestation.\n\n\n\n\nkb2\n\n\nBlivit utsatt för skvaller eller rykten spridda om dig.\n\n\n\n\nkb3\n\n\nBlivit ignorerad eller exkluderad.\n\n\n\n\nkb4\n\n\nFått kränkande eller stötande kommentarer om dig som person, dina attityder eller ditt privatliv.\n\n\n\n\nkb5\n\n\nBlivit utskälld eller varit föremål för andras aggressiva utbrott.\n\n\n\n\nkb6\n\n\nBlivit påmind om dina felsteg eller misstag.\n\n\n\n\nkb7\n\n\nBlivit utsatt för ett otrevligt bemötande när du närmar dig andra.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM(df.omit.na, samplesize = 300, nsamples = 32)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    kb1 \n    0.969 \n    0.97 \n    -0.314 \n    -0.331 \n  \n  \n    kb2 \n    0.927 \n    0.922 \n    -0.69 \n    -0.723 \n  \n  \n    kb3 \n    0.876 \n    0.896 \n    -1.124 \n    -0.864 \n  \n  \n    kb4 \n    0.572 \n    0.696 \n    -2.651 \n    -2.501 \n  \n  \n    kb5 \n    1.062 \n    1.08 \n    0.533 \n    0.734 \n  \n  \n    kb6 \n    0.849 \n    0.799 \n    -1.448 \n    -1.945 \n  \n  \n    kb7 \n    0.826 \n    0.802 \n    -1.71 \n    -1.89 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.77 \n  \n  \n    1.28 \n  \n  \n    1.18 \n  \n  \n    0.99 \n  \n  \n    0.94 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    kb1 \n    kb2 \n    kb3 \n    kb4 \n    kb5 \n    kb6 \n    kb7 \n  \n \n\n  \n    kb1 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    kb2 \n    -0.2 \n     \n     \n     \n     \n     \n     \n  \n  \n    kb3 \n    0.17 \n    -0.17 \n     \n     \n     \n     \n     \n  \n  \n    kb4 \n    -0.16 \n    0.03 \n    -0.06 \n     \n     \n     \n     \n  \n  \n    kb5 \n    -0.35 \n    -0.21 \n    -0.35 \n    -0.17 \n     \n     \n     \n  \n  \n    kb6 \n    -0.26 \n    -0.13 \n    -0.34 \n    -0.14 \n    0.09 \n     \n     \n  \n  \n    kb7 \n    -0.22 \n    -0.24 \n    -0.19 \n    -0.09 \n    0.04 \n    -0.01 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.059, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nEftersom det är genomgående problem med oordnade trösklar slår vi ihop ‘dagligen’, ‘varje vecka’ och ‘varje månad’ till att börja med.\n\n\nCode\n# select all items except those removed\ndf2 <- df.omit.na %>% \n  mutate(across(everything(), ~ recode(.x,\"3=2;4=2\"))) #Slå ihop svarskategorier"
  },
  {
    "objectID": "08_krbet/08_krbet.html#rasch-analys-2",
    "href": "08_krbet/08_krbet.html#rasch-analys-2",
    "title": "9  Kränkande beteenden",
    "section": "9.4 Rasch-analys 2",
    "text": "9.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nkb1\n\n\nBlivit utsatt för att någon undanhåller information som har påverkat din prestation.\n\n\n\n\nkb2\n\n\nBlivit utsatt för skvaller eller rykten spridda om dig.\n\n\n\n\nkb3\n\n\nBlivit ignorerad eller exkluderad.\n\n\n\n\nkb4\n\n\nFått kränkande eller stötande kommentarer om dig som person, dina attityder eller ditt privatliv.\n\n\n\n\nkb5\n\n\nBlivit utskälld eller varit föremål för andras aggressiva utbrott.\n\n\n\n\nkb6\n\n\nBlivit påmind om dina felsteg eller misstag.\n\n\n\n\nkb7\n\n\nBlivit utsatt för ett otrevligt bemötande när du närmar dig andra.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM(df2, samplesize = 250, nsamples = 32)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    kb1 \n    0.983 \n    0.969 \n    -0.21 \n    -0.345 \n  \n  \n    kb2 \n    0.882 \n    0.891 \n    -1.037 \n    -1.091 \n  \n  \n    kb3 \n    0.928 \n    0.945 \n    -0.5 \n    -0.423 \n  \n  \n    kb4 \n    0.618 \n    0.785 \n    -2.148 \n    -1.817 \n  \n  \n    kb5 \n    1.097 \n    1.092 \n    0.895 \n    0.965 \n  \n  \n    kb6 \n    0.87 \n    0.87 \n    -1.341 \n    -1.386 \n  \n  \n    kb7 \n    0.858 \n    0.849 \n    -1.503 \n    -1.788 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.75 \n  \n  \n    1.29 \n  \n  \n    1.18 \n  \n  \n    1.01 \n  \n  \n    0.94 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    kb1 \n    kb2 \n    kb3 \n    kb4 \n    kb5 \n    kb6 \n    kb7 \n  \n \n\n  \n    kb1 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    kb2 \n    -0.15 \n     \n     \n     \n     \n     \n     \n  \n  \n    kb3 \n    0.16 \n    -0.16 \n     \n     \n     \n     \n     \n  \n  \n    kb4 \n    -0.18 \n    0 \n    -0.05 \n     \n     \n     \n     \n  \n  \n    kb5 \n    -0.31 \n    -0.23 \n    -0.32 \n    -0.17 \n     \n     \n     \n  \n  \n    kb6 \n    -0.23 \n    -0.11 \n    -0.36 \n    -0.15 \n    0.04 \n     \n     \n  \n  \n    kb7 \n    -0.23 \n    -0.21 \n    -0.19 \n    -0.08 \n    -0.01 \n    -0.05 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.058, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df2, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nItem 4 har något låg item fit, och det finns en residualkorrelation mellan items 1 och 3.\nVi exkluderar kb1 som har en något hög residualkorrelation med kb3.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"kb1\")\n\n# select all items except those removed\ndf2 <- df2 %>%\n  select(!any_of(removed_items))"
  },
  {
    "objectID": "08_krbet/08_krbet.html#rasch-analys-3",
    "href": "08_krbet/08_krbet.html#rasch-analys-3",
    "title": "9  Kränkande beteenden",
    "section": "9.5 Rasch-analys 3",
    "text": "9.5 Rasch-analys 3\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nkb2\n\n\nBlivit utsatt för skvaller eller rykten spridda om dig.\n\n\n\n\nkb3\n\n\nBlivit ignorerad eller exkluderad.\n\n\n\n\nkb4\n\n\nFått kränkande eller stötande kommentarer om dig som person, dina attityder eller ditt privatliv.\n\n\n\n\nkb5\n\n\nBlivit utskälld eller varit föremål för andras aggressiva utbrott.\n\n\n\n\nkb6\n\n\nBlivit påmind om dina felsteg eller misstag.\n\n\n\n\nkb7\n\n\nBlivit utsatt för ett otrevligt bemötande när du närmar dig andra.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM(df2, samplesize = 250, nsamples = 32)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    kb2 \n    0.87 \n    0.88 \n    -1.028 \n    -1.044 \n  \n  \n    kb3 \n    1.117 \n    1.054 \n    1.125 \n    0.529 \n  \n  \n    kb4 \n    0.593 \n    0.75 \n    -2.4 \n    -2.135 \n  \n  \n    kb5 \n    1.02 \n    1.033 \n    0.244 \n    0.375 \n  \n  \n    kb6 \n    0.838 \n    0.84 \n    -1.808 \n    -1.804 \n  \n  \n    kb7 \n    0.824 \n    0.823 \n    -1.86 \n    -1.982 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.59 \n  \n  \n    1.28 \n  \n  \n    1.09 \n  \n  \n    1.04 \n  \n  \n    1.00 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    kb2 \n    kb3 \n    kb4 \n    kb5 \n    kb6 \n    kb7 \n  \n \n\n  \n    kb2 \n     \n     \n     \n     \n     \n     \n  \n  \n    kb3 \n    -0.13 \n     \n     \n     \n     \n     \n  \n  \n    kb4 \n    -0.03 \n    -0.03 \n     \n     \n     \n     \n  \n  \n    kb5 \n    -0.3 \n    -0.32 \n    -0.23 \n     \n     \n     \n  \n  \n    kb6 \n    -0.15 \n    -0.34 \n    -0.19 \n    -0.02 \n     \n     \n  \n  \n    kb7 \n    -0.26 \n    -0.17 \n    -0.12 \n    -0.08 \n    -0.1 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.035, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nItem 4 har fortsatt något låg outfit medan infit (som är viktigare) är inom rimliga nivåer."
  },
  {
    "objectID": "08_krbet/08_krbet.html#dif-analysis",
    "href": "08_krbet/08_krbet.html#dif-analysis",
    "title": "9  Kränkande beteenden",
    "section": "9.6 DIF-analysis",
    "text": "9.6 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\""
  },
  {
    "objectID": "08_krbet/08_krbet.html#reliability",
    "href": "08_krbet/08_krbet.html#reliability",
    "title": "9  Kränkande beteenden",
    "section": "9.7 Reliability",
    "text": "9.7 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nVi har få svarströsklar och som väntat kommer reliabiliteten inte upp i önskvärda nivåer någonstans på skalan."
  },
  {
    "objectID": "08_krbet/08_krbet.html#person-fit",
    "href": "08_krbet/08_krbet.html#person-fit",
    "title": "9  Kränkande beteenden",
    "section": "9.8 Person fit",
    "text": "9.8 Person fit\n\n\nCode\nRIpfit(df2)"
  },
  {
    "objectID": "08_krbet/08_krbet.html#item-parametrar",
    "href": "08_krbet/08_krbet.html#item-parametrar",
    "title": "9  Kränkande beteenden",
    "section": "9.9 Item-parametrar",
    "text": "9.9 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Item location \n  \n \n\n  \n    kb2 \n    -1.04 \n    1.80 \n    0.38 \n  \n  \n    kb3 \n    -1.31 \n    2.00 \n    0.34 \n  \n  \n    kb4 \n    0.08 \n    2.67 \n    1.37 \n  \n  \n    kb5 \n    -1.30 \n    2.46 \n    0.58 \n  \n  \n    kb6 \n    -1.83 \n    1.78 \n    -0.03 \n  \n  \n    kb7 \n    -1.27 \n    2.64 \n    0.69"
  },
  {
    "objectID": "08_krbet/08_krbet.html#rekommenderade-items",
    "href": "08_krbet/08_krbet.html#rekommenderade-items",
    "title": "9  Kränkande beteenden",
    "section": "9.10 Rekommenderade items",
    "text": "9.10 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 45,\n           options = \"hover\") %>% \n  row_spec(c(1), background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttagna item markerade med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    kb1 \n    Blivit utsatt för att någon undanhåller information som har påverkat din prestation. \n  \n  \n    kb2 \n    Blivit utsatt för skvaller eller rykten spridda om dig. \n  \n  \n    kb3 \n    Blivit ignorerad eller exkluderad. \n  \n  \n    kb4 \n    Fått kränkande eller stötande kommentarer om dig som person, dina attityder eller ditt privatliv. \n  \n  \n    kb5 \n    Blivit utskälld eller varit föremål för andras aggressiva utbrott. \n  \n  \n    kb6 \n    Blivit påmind om dina felsteg eller misstag. \n  \n  \n    kb7 \n    Blivit utsatt för ett otrevligt bemötande när du närmar dig andra. \n  \n\n\nNotera: \n\n Borttagna item markerade med färg."
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#items",
    "href": "09_psyktry/09_psyktry.html#items",
    "title": "10  Psykologisk trygghet",
    "section": "10.1 Items",
    "text": "10.1 Items\n\n\nCode\nitemlabels %>% \n  kbl_rise(width = 45)\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    pt1 \n    Jag har en positiv känsla när jag kommer till jobbet. \n  \n  \n    pt2 \n    Jag känner mig delaktig i gemenskapen på min arbetsplats. \n  \n  \n    pt3 \n    Jag kan begå misstag utan att det hålls emot mig. \n  \n  \n    pt4 \n    Jag kan öppet diskutera olika typer av svårigheter. \n  \n  \n    pt5 \n    Jag blir inkluderad även om jag tycker annorlunda. \n  \n  \n    pt6 \n    Mina ansträngningar värdesätts. \n  \n  \n    pt7 \n    Mina idéer ges tid och uppmärksamhet."
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#bakgrundsdata",
    "href": "09_psyktry/09_psyktry.html#bakgrundsdata",
    "title": "10  Psykologisk trygghet",
    "section": "10.2 Bakgrundsdata",
    "text": "10.2 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n10.2.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na,\"pt\")\n\n\n\n\n\nVi har extremt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0013\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0013\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n10.2.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n1088\n\n\n33.1\n\n\n\n\nMycket ofta\n\n\n1196\n\n\n36.4\n\n\n\n\nGanska ofta\n\n\n553\n\n\n16.8\n\n\n\n\nIbland \n\n\n294\n\n\n9.0\n\n\n\n\nSällan \n\n\n118\n\n\n3.6\n\n\n\n\nAldrig \n\n\n34\n\n\n1.0\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\n\n\n10.2.3 Descriptives - all items\n\nTile plotStacked barsBarplotsGuttman heatmap\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nRIheatmap(df.omit.na)\n\n\n\n\n\n\n\n\n\n10.2.3.1 Fördelning av summerade svar\n\n\nCode\nRIrawdist(df.omit.na)"
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#rasch-analys-1",
    "href": "09_psyktry/09_psyktry.html#rasch-analys-1",
    "title": "10  Psykologisk trygghet",
    "section": "10.3 Rasch-analys 1",
    "text": "10.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\npt1\n\n\nJag har en positiv känsla när jag kommer till jobbet.\n\n\n\n\npt2\n\n\nJag känner mig delaktig i gemenskapen på min arbetsplats.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5\n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\npt6\n\n\nMina ansträngningar värdesätts.\n\n\n\n\npt7\n\n\nMina idéer ges tid och uppmärksamhet.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df.omit.na, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    pt1 \n    1.192 \n    1.117 \n    1.606 \n    1.165 \n  \n  \n    pt2 \n    0.866 \n    0.872 \n    -1.156 \n    -1.372 \n  \n  \n    pt3 \n    1.013 \n    1.027 \n    0.248 \n    0.268 \n  \n  \n    pt4 \n    0.847 \n    0.809 \n    -1.539 \n    -1.966 \n  \n  \n    pt5 \n    0.63 \n    0.614 \n    -3.924 \n    -4.388 \n  \n  \n    pt6 \n    0.862 \n    0.864 \n    -1.559 \n    -1.415 \n  \n  \n    pt7 \n    0.811 \n    0.799 \n    -1.872 \n    -2.066 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.89 \n  \n  \n    1.60 \n  \n  \n    1.09 \n  \n  \n    0.96 \n  \n  \n    0.77 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    pt1 \n    pt2 \n    pt3 \n    pt4 \n    pt5 \n    pt6 \n    pt7 \n  \n \n\n  \n    pt1 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    pt2 \n    0.09 \n     \n     \n     \n     \n     \n     \n  \n  \n    pt3 \n    -0.26 \n    -0.14 \n     \n     \n     \n     \n     \n  \n  \n    pt4 \n    -0.27 \n    -0.27 \n    0.06 \n     \n     \n     \n     \n  \n  \n    pt5 \n    -0.37 \n    -0.1 \n    0.04 \n    0.1 \n     \n     \n     \n  \n  \n    pt6 \n    -0.18 \n    -0.28 \n    -0.36 \n    -0.25 \n    -0.18 \n     \n     \n  \n  \n    pt7 \n    -0.11 \n    -0.25 \n    -0.4 \n    -0.28 \n    -0.19 \n    0.33 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.045, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nDet finns några residualkorrelationer som avviker, och item 5 är något låg i item fit. Största residualkorrelationen (med stor marginal) är mellan items 6 och 7. Eftersom item 7 har lite problem med svarskategorierna tas den bort.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"pt7\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!any_of(removed_items))"
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#rasch-analys-2",
    "href": "09_psyktry/09_psyktry.html#rasch-analys-2",
    "title": "10  Psykologisk trygghet",
    "section": "10.4 Rasch-analys 2",
    "text": "10.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\npt1\n\n\nJag har en positiv känsla när jag kommer till jobbet.\n\n\n\n\npt2\n\n\nJag känner mig delaktig i gemenskapen på min arbetsplats.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5\n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\npt6\n\n\nMina ansträngningar värdesätts.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    pt1 \n    1.156 \n    1.091 \n    1.44 \n    0.788 \n  \n  \n    pt2 \n    0.829 \n    0.813 \n    -1.744 \n    -1.797 \n  \n  \n    pt3 \n    0.911 \n    0.911 \n    -0.896 \n    -0.899 \n  \n  \n    pt4 \n    0.773 \n    0.741 \n    -2.5 \n    -2.715 \n  \n  \n    pt5 \n    0.59 \n    0.58 \n    -4.434 \n    -4.796 \n  \n  \n    pt6 \n    1.003 \n    0.967 \n    -0.021 \n    -0.33 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.71 \n  \n  \n    1.33 \n  \n  \n    1.16 \n  \n  \n    1.01 \n  \n  \n    0.80 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    pt1 \n    pt2 \n    pt3 \n    pt4 \n    pt5 \n    pt6 \n  \n \n\n  \n    pt1 \n     \n     \n     \n     \n     \n     \n  \n  \n    pt2 \n    0.06 \n     \n     \n     \n     \n     \n  \n  \n    pt3 \n    -0.32 \n    -0.23 \n     \n     \n     \n     \n  \n  \n    pt4 \n    -0.31 \n    -0.35 \n    -0.02 \n     \n     \n     \n  \n  \n    pt5 \n    -0.4 \n    -0.15 \n    -0.04 \n    0.05 \n     \n     \n  \n  \n    pt6 \n    -0.13 \n    -0.24 \n    -0.35 \n    -0.21 \n    -0.12 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.017, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nItem 5 uppvisar nu lägre item fit och även en residualkorrelation, så den tas bort.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"pt7\",\"pt5\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!any_of(removed_items))"
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#rasch-analys-3",
    "href": "09_psyktry/09_psyktry.html#rasch-analys-3",
    "title": "10  Psykologisk trygghet",
    "section": "10.5 Rasch-analys 3",
    "text": "10.5 Rasch-analys 3\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\npt1\n\n\nJag har en positiv känsla när jag kommer till jobbet.\n\n\n\n\npt2\n\n\nJag känner mig delaktig i gemenskapen på min arbetsplats.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt6\n\n\nMina ansträngningar värdesätts.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    pt1 \n    0.974 \n    0.916 \n    -0.126 \n    -0.595 \n  \n  \n    pt2 \n    0.751 \n    0.732 \n    -2.621 \n    -2.933 \n  \n  \n    pt3 \n    0.846 \n    0.853 \n    -1.665 \n    -1.416 \n  \n  \n    pt4 \n    0.755 \n    0.716 \n    -2.889 \n    -3.15 \n  \n  \n    pt6 \n    0.905 \n    0.885 \n    -0.812 \n    -1.231 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.63 \n  \n  \n    1.34 \n  \n  \n    1.05 \n  \n  \n    0.98 \n  \n  \n    0.00 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    pt1 \n    pt2 \n    pt3 \n    pt4 \n    pt6 \n  \n \n\n  \n    pt1 \n     \n     \n     \n     \n     \n  \n  \n    pt2 \n    0 \n     \n     \n     \n     \n  \n  \n    pt3 \n    -0.38 \n    -0.23 \n     \n     \n     \n  \n  \n    pt4 \n    -0.35 \n    -0.33 \n    0.01 \n     \n     \n  \n  \n    pt6 \n    -0.19 \n    -0.26 \n    -0.34 \n    -0.19 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is -0.026, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\n\n10.5.1 Targeting\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\nFigur 10.1: Targeting för området Psykologisk trygghet\n\n\n\n\nDenna uppsättning items fungerar väl tillsammans."
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#dif-analysis",
    "href": "09_psyktry/09_psyktry.html#dif-analysis",
    "title": "10  Psykologisk trygghet",
    "section": "10.6 DIF-analysis",
    "text": "10.6 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\""
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#reliability",
    "href": "09_psyktry/09_psyktry.html#reliability",
    "title": "10  Psykologisk trygghet",
    "section": "10.7 Reliability",
    "text": "10.7 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nFigur 10.2: Reliabilitet för området Psykologisk trygghet"
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#person-fit",
    "href": "09_psyktry/09_psyktry.html#person-fit",
    "title": "10  Psykologisk trygghet",
    "section": "10.8 Person fit",
    "text": "10.8 Person fit\n\n\nCode\nRIpfit(df2)"
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#item-parametrar",
    "href": "09_psyktry/09_psyktry.html#item-parametrar",
    "title": "10  Psykologisk trygghet",
    "section": "10.9 Item-parametrar",
    "text": "10.9 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Threshold 3 \n    Threshold 4 \n    Threshold 5 \n    Item location \n  \n \n\n  \n    pt1 \n    -1.24 \n    -0.40 \n    0.05 \n    1.56 \n    4.33 \n    0.86 \n  \n  \n    pt2 \n    -2.21 \n    -0.61 \n    0.52 \n    1.38 \n    3.33 \n    0.48 \n  \n  \n    pt3 \n    -0.68 \n    -0.68 \n    0.80 \n    1.60 \n    3.96 \n    1 \n  \n  \n    pt4 \n    -1.12 \n    -0.28 \n    0.91 \n    1.68 \n    3.97 \n    1.03 \n  \n  \n    pt6 \n    -1.69 \n    -0.33 \n    0.72 \n    1.49 \n    3.81 \n    0.8"
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#transformeringstabell",
    "href": "09_psyktry/09_psyktry.html#transformeringstabell",
    "title": "10  Psykologisk trygghet",
    "section": "10.10 Transformeringstabell",
    "text": "10.10 Transformeringstabell\n\n\nCode\nRIscoreSE(df2, width = 50)\n\n\n\n\n \n  \n    Ordinal sum score \n    Logit score \n    Logit std.error \n  \n \n\n  \n    0 \n    -3.870 \n    1.519 \n  \n  \n    1 \n    -2.650 \n    0.900 \n  \n  \n    2 \n    -2.039 \n    0.713 \n  \n  \n    3 \n    -1.619 \n    0.617 \n  \n  \n    4 \n    -1.291 \n    0.558 \n  \n  \n    5 \n    -1.017 \n    0.520 \n  \n  \n    6 \n    -0.774 \n    0.495 \n  \n  \n    7 \n    -0.550 \n    0.478 \n  \n  \n    8 \n    -0.338 \n    0.468 \n  \n  \n    9 \n    -0.130 \n    0.463 \n  \n  \n    10 \n    0.075 \n    0.461 \n  \n  \n    11 \n    0.282 \n    0.462 \n  \n  \n    12 \n    0.492 \n    0.467 \n  \n  \n    13 \n    0.708 \n    0.473 \n  \n  \n    14 \n    0.930 \n    0.483 \n  \n  \n    15 \n    1.163 \n    0.496 \n  \n  \n    16 \n    1.411 \n    0.514 \n  \n  \n    17 \n    1.681 \n    0.538 \n  \n  \n    18 \n    1.984 \n    0.570 \n  \n  \n    19 \n    2.333 \n    0.609 \n  \n  \n    20 \n    2.741 \n    0.653 \n  \n  \n    21 \n    3.208 \n    0.698 \n  \n  \n    22 \n    3.724 \n    0.748 \n  \n  \n    24 \n    4.000 \n    0.781 \n  \n\n\n\n\n\n\n10.10.1 Estimering av mätvärden\n\n\nCode\ndf2$score <- RIestThetas(df2)\nwrite.csv(df2, \"scored.csv\")\nsummary(df2$score)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n -1.291   1.681   2.741   2.541   4.000   4.000 \n\n\n\n\nCode\n#df2 <- read_csv(\"05_rec/scored.csv\")\n\nggplot(\n  data = df2,\n  aes(x = score, y = 0, fill = factor(score))\n  ) +\n  geom_dotplot(color = \"white\", \n                dotsize = 1,\n                binwidth = 0.12) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n    # errorbar has brackets at the endpoints\n  geom_errorbar(\n    aes(\n      xmin = mean(score) - sd(score),\n      xmax = mean(score) + sd(score),\n      y = 0,\n      width = 0.025\n    ),\n    color = \"black\"\n  ) +\n  coord_cartesian(xlim = c(-4,4)) +\n  theme_minimal(base_family = \"Lato\") +\n  theme_rise() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Mätvärden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde, strecken runt indikerar en standardavvikelse.\",\n    y = \"Antal respondenter\",\n    x = \"Mätvärden\"\n  ) +\n  theme(\n    #axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank()\n  )"
  },
  {
    "objectID": "09_psyktry/09_psyktry.html#rekommenderade-items",
    "href": "09_psyktry/09_psyktry.html#rekommenderade-items",
    "title": "10  Psykologisk trygghet",
    "section": "10.11 Rekommenderade items",
    "text": "10.11 Rekommenderade items\n\n\nCode\nitemlabels %>% \n  filter(itemnr %in% names(df2)) %>% \n  write_csv(\"finalItems.csv\")\n\nitemlabels %>% \n  filter(!itemnr %in% names(df2)) %>% \n  write_csv(\"removedItems.csv\")\n\nitemlabels %>% \n  kbl_rise(width = 50,\n           options = \"hover\") %>% \n  row_spec(c(5,7), background = \"lightpink\") %>% \n  footnote(general_title = \"Notera: \",\n           \"Borttagna item markerade med färg.\")\n\n\n\n\n \n  \n    itemnr \n    item \n  \n \n\n  \n    pt1 \n    Jag har en positiv känsla när jag kommer till jobbet. \n  \n  \n    pt2 \n    Jag känner mig delaktig i gemenskapen på min arbetsplats. \n  \n  \n    pt3 \n    Jag kan begå misstag utan att det hålls emot mig. \n  \n  \n    pt4 \n    Jag kan öppet diskutera olika typer av svårigheter. \n  \n  \n    pt5 \n    Jag blir inkluderad även om jag tycker annorlunda. \n  \n  \n    pt6 \n    Mina ansträngningar värdesätts. \n  \n  \n    pt7 \n    Mina idéer ges tid och uppmärksamhet. \n  \n\n\nNotera: \n\n Borttagna item markerade med färg.\n\n\n\n\n\n\n10.11.1 Förändringar i svarskategorier"
  },
  {
    "objectID": "cfa/osaCFA.html#modell-1---alla-items",
    "href": "cfa/osaCFA.html#modell-1---alla-items",
    "title": "11  Konfirmatorisk faktoranalys",
    "section": "11.1 Modell 1 - alla items",
    "text": "11.1 Modell 1 - alla items\n\n\nCode\n### specify model\n# AO is skipped for now due to low variation in data\n# AO =~ ao1 + ao2 + ao3 + ao4 + ao5\n# KunskapUtv also skipped\n\nallItems <- \"BelastKrav =~ abk1+abk2+abk3+abk4+abk5+abk6\n             MöjlPåverka =~ mp1+ mp2+ mp3+ mp4+ mp5\n             Stöd =~ st1+st2+st3+st4+st5+st6+st7\n             Återhämtning =~ å1+å2+å3+å4+å5\n             Ledarskap =~ ls1+ls2+ls3+ls4+ls5+ls6\n             KränkandeB =~ kb1+kb2+kb3+kb4+kb5+kb6+kb7\n             PsykTrygg =~ pt1+pt2+pt3+pt4+pt5+pt6+pt7\"\n\nCFAall <- cfa(\n  model = allItems,\n  data = df,\n  rotation = \"oblimin\",\n  estimator = \"WLSMV\",\n  ordered = TRUE\n)\n\n\n\n11.1.1 Model fit\n\n\nCode\n# create table with model fit metrics\n# define fit metrics of interest\nfit_metrics_robust <- c(\"chisq.scaled\", \"df\", \"pvalue.scaled\", \n                         \"cfi.scaled\", \"tli.scaled\", \"rmsea.scaled\", \"srmr\")\nfitmeasures(CFAall, fit_metrics_robust) %>% \n  rbind() %>% \n  as.data.frame() %>% \n  mutate(across(where(is.numeric),~ round(.x, 3))) %>%\n  rename(Chi2 = chisq.scaled,\n         p = pvalue.scaled,\n         CFI = cfi.scaled,\n         TLI = tli.scaled,\n         RMSEA = rmsea.scaled,\n         SRMR = srmr) %>% \n  formattable(.,\n              table.attr = 'class=\\\"table table-striped\\\" style=\"font-size: 14px; font-family: Lato; width: 80%\"')\n\n\n\n\n\n\n\n\n\nChi2\n\n\ndf\n\n\np\n\n\nCFI\n\n\nTLI\n\n\nRMSEA\n\n\nSRMR\n\n\n\n\n\n\n.\n\n\n3074.269\n\n\n839\n\n\n0\n\n\n0.917\n\n\n0.911\n\n\n0.077\n\n\n0.074\n\n\n\n\n\n\n\n\n\n11.1.2 Kovarians\nSamband mellan faktorer, sorterat på störst korrelation.\n\n\nCode\nCFAout <- summary(CFAall)\n\nCFAout[[\"pe\"]] %>% \n  filter(op == \"~~\") %>% \n  slice(56:83) %>% \n  mutate(across(where(is.numeric),~ round(.x, 3))) %>%\n  select(!exo) %>% \n  arrange(desc(est)) %>% \n  kbl_rise()\n\n\n\n\n \n  \n    lhs \n    op \n    rhs \n    est \n    se \n    z \n    pvalue \n  \n \n\n  \n    Stöd \n    ~~ \n    PsykTrygg \n    0.530 \n    0.027 \n    19.570 \n    0 \n  \n  \n    Stöd \n    ~~ \n    Ledarskap \n    0.497 \n    0.026 \n    18.824 \n    0 \n  \n  \n    Ledarskap \n    ~~ \n    PsykTrygg \n    0.483 \n    0.026 \n    18.303 \n    0 \n  \n  \n    MöjlPåverka \n    ~~ \n    Stöd \n    0.467 \n    0.027 \n    17.229 \n    0 \n  \n  \n    MöjlPåverka \n    ~~ \n    Återhämtning \n    0.462 \n    0.026 \n    17.894 \n    0 \n  \n  \n    MöjlPåverka \n    ~~ \n    PsykTrygg \n    0.460 \n    0.027 \n    16.933 \n    0 \n  \n  \n    KränkandeB \n    ~~ \n    PsykTrygg \n    0.454 \n    0.035 \n    13.107 \n    0 \n  \n  \n    MöjlPåverka \n    ~~ \n    Ledarskap \n    0.437 \n    0.028 \n    15.487 \n    0 \n  \n  \n    BelastKrav \n    ~~ \n    PsykTrygg \n    0.416 \n    0.028 \n    14.685 \n    0 \n  \n  \n    Stöd \n    ~~ \n    Återhämtning \n    0.371 \n    0.027 \n    13.487 \n    0 \n  \n  \n    Återhämtning \n    ~~ \n    Ledarskap \n    0.349 \n    0.028 \n    12.317 \n    0 \n  \n  \n    Stöd \n    ~~ \n    KränkandeB \n    0.331 \n    0.031 \n    10.555 \n    0 \n  \n  \n    Återhämtning \n    ~~ \n    PsykTrygg \n    0.317 \n    0.029 \n    10.908 \n    0 \n  \n  \n    MöjlPåverka \n    ~~ \n    KränkandeB \n    0.301 \n    0.033 \n    9.066 \n    0 \n  \n  \n    Ledarskap \n    ~~ \n    KränkandeB \n    0.283 \n    0.035 \n    7.981 \n    0 \n  \n  \n    Återhämtning \n    ~~ \n    KränkandeB \n    0.203 \n    0.032 \n    6.259 \n    0 \n  \n\n\n\n\n\n\n\n11.1.3 Model plot\n\n\nCode\nlavaanPlot(model = CFAall, \n           coefs = T, stand = T, covs = T,\n           node_options = list(fontname = \"Helvetica\"), \n           edge_options = list(color = \"grey\"),\n           graph_options = list(rankdir = \"LR\"))\n\n\n\n\n\n\n\n\n11.1.4 Modification indices\nOrdnade efter storlek, störst först.\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nao1 \n\n\nJag vet vilka arbetsuppgifter jag har.\n\n\n\n\nao2 \n\n\nJag vet hur mitt arbete ska utföras.\n\n\n\n\nao3 \n\n\nJag vet vilka resultat som jag ska uppnå med mitt arbete.\n\n\n\n\nao4 \n\n\nDet finns tydliga mål för min arbetsgrupp.\n\n\n\n\nao5 \n\n\nDet finns tydliga mål för min organisation.\n\n\n\n\nabk1\n\n\nMin arbetsbelastning är rimlig.\n\n\n\n\nabk2\n\n\nJag hinner med mina arbetsuppgifter inom min arbetstid.\n\n\n\n\nabk3\n\n\nMitt arbete är lagom omväxlande.\n\n\n\n\nabk4\n\n\nJag upplever att andras krav på mig är rimliga.\n\n\n\n\nabk5\n\n\nJag kan få hjälp om min arbetsbelastning är för hög.\n\n\n\n\nabk6\n\n\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter.\n\n\n\n\nmp1 \n\n\nJag har de resurser som behövs för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp2 \n\n\nJag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras.\n\n\n\n\nmp3 \n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp4 \n\n\nJag kan påverka beslut som rör mina arbetsuppgifter.\n\n\n\n\nmp5 \n\n\nJag kan själv bestämma min arbetstakt.\n\n\n\n\nst1 \n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2 \n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst3 \n\n\nVi samarbetar bra på min arbetsplats.\n\n\n\n\nst4 \n\n\nJag visar uppskattning till mina kollegor för deras arbetsinsatser.\n\n\n\n\nst5 \n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\nst6 \n\n\nJag får tekniskt stöd vid behov.\n\n\n\n\nst7 \n\n\nJag kan få handledning i mitt arbete om jag behöver det.\n\n\n\n\nå1 \n\n\nJag kan använda raster till att koppla av från arbetet.\n\n\n\n\nå2 \n\n\nJag har möjlighet att arbeta i lugnare takt efter arbetsintensiva perioder.\n\n\n\n\nå3 \n\n\nJag har tid för reflektion över hur jag har utfört arbetet.\n\n\n\n\nå4 \n\n\nJag har ork kvar för att göra andra saker efter arbetsdagens slut.\n\n\n\n\nå5 \n\n\nJag kan lägga tankar på arbetet åt sidan på min lediga tid.\n\n\n\n\nls1 \n\n\nMin chef ger mig återkoppling på hur jag utför arbetet.\n\n\n\n\nls2 \n\n\nMin chef har en god uppfattning om min arbetsbelastning.\n\n\n\n\nls3 \n\n\nMin chef agerar om jag har allt för mycket arbete att utföra.\n\n\n\n\nls4 \n\n\nMin chef ser till att alla kommer till tals.\n\n\n\n\nls5 \n\n\nMin chef hanterar konflikter på ett bra sätt.\n\n\n\n\nls6 \n\n\nMin chef och jag har tillräckligt med avstämningar.\n\n\n\n\nku1 \n\n\nMina kunskaper och färdigheter är till nytta i mitt arbete.\n\n\n\n\nku2 \n\n\nJag har tillräckligt med kunskap/färdigheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nku3 \n\n\nJag har möjlighet att lära mig nya saker när arbetsuppgifterna kräver det.\n\n\n\n\nku4 \n\n\nJag har möjlighet till långsiktig kompetensutveckling i mitt arbete.\n\n\n\n\nkb1 \n\n\nBlivit utsatt för att någon undanhåller information som har påverkat din prestation.\n\n\n\n\nkb2 \n\n\nBlivit utsatt för skvaller eller rykten spridda om dig.\n\n\n\n\nkb3 \n\n\nBlivit ignorerad eller exkluderad.\n\n\n\n\nkb4 \n\n\nFått kränkande eller stötande kommentarer om dig som person, dina attityder eller ditt privatliv.\n\n\n\n\nkb5 \n\n\nBlivit utskälld eller varit föremål för andras aggressiva utbrott.\n\n\n\n\nkb6 \n\n\nBlivit påmind om dina felsteg eller misstag.\n\n\n\n\nkb7 \n\n\nBlivit utsatt för ett otrevligt bemötande när du närmar dig andra.\n\n\n\n\npt1 \n\n\nJag har en positiv känsla när jag kommer till jobbet.\n\n\n\n\npt2 \n\n\nJag känner mig delaktig i gemenskapen på min arbetsplats.\n\n\n\n\npt3 \n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4 \n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5 \n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\npt6 \n\n\nMina ansträngningar värdesätts.\n\n\n\n\npt7 \n\n\nMina idéer ges tid och uppmärksamhet.\n\n\n\n\n\n\n\n11.1.4.1 Korsladdningar\nMed MI > 100.\n\n\nCode\nmodificationIndices(CFAall,\n                    standardized = T) %>% \n  as.data.frame(row.names = NULL) %>% \n  filter(mi > 100,\n         op == \"=~\") %>% \n  arrange(desc(mi)) %>% \n  mutate(across(where(is.numeric),~ round(.x, 3))) %>%\n  kbl_rise(fontsize = 14, width = 75)\n\n\n\n\n \n  \n    lhs \n    op \n    rhs \n    mi \n    epc \n    sepc.lv \n    sepc.all \n    sepc.nox \n  \n \n\n  \n    Stöd \n    =~ \n    abk2 \n    345.697 \n    -0.826 \n    -0.655 \n    -0.655 \n    -0.655 \n  \n  \n    PsykTrygg \n    =~ \n    abk2 \n    332.470 \n    -0.636 \n    -0.526 \n    -0.526 \n    -0.526 \n  \n  \n    Ledarskap \n    =~ \n    abk2 \n    295.057 \n    -0.664 \n    -0.560 \n    -0.560 \n    -0.560 \n  \n  \n    Stöd \n    =~ \n    abk1 \n    239.864 \n    -0.681 \n    -0.541 \n    -0.541 \n    -0.541 \n  \n  \n    MöjlPåverka \n    =~ \n    abk2 \n    238.181 \n    -1.052 \n    -0.848 \n    -0.848 \n    -0.848 \n  \n  \n    PsykTrygg \n    =~ \n    abk1 \n    210.167 \n    -0.498 \n    -0.411 \n    -0.411 \n    -0.411 \n  \n  \n    KränkandeB \n    =~ \n    abk2 \n    180.244 \n    -0.429 \n    -0.375 \n    -0.375 \n    -0.375 \n  \n  \n    MöjlPåverka \n    =~ \n    abk1 \n    179.235 \n    -0.910 \n    -0.734 \n    -0.734 \n    -0.734 \n  \n  \n    PsykTrygg \n    =~ \n    abk3 \n    175.086 \n    0.466 \n    0.385 \n    0.385 \n    0.385 \n  \n  \n    Ledarskap \n    =~ \n    abk1 \n    168.223 \n    -0.485 \n    -0.409 \n    -0.409 \n    -0.409 \n  \n  \n    Ledarskap \n    =~ \n    abk5 \n    166.724 \n    0.453 \n    0.382 \n    0.382 \n    0.382 \n  \n  \n    Stöd \n    =~ \n    abk5 \n    163.547 \n    0.540 \n    0.429 \n    0.429 \n    0.429 \n  \n  \n    Återhämtning \n    =~ \n    mp3 \n    163.512 \n    -0.924 \n    -0.717 \n    -0.717 \n    -0.717 \n  \n  \n    Stöd \n    =~ \n    abk3 \n    156.409 \n    0.577 \n    0.458 \n    0.458 \n    0.458 \n  \n  \n    PsykTrygg \n    =~ \n    abk4 \n    146.929 \n    0.392 \n    0.324 \n    0.324 \n    0.324 \n  \n  \n    BelastKrav \n    =~ \n    mp3 \n    138.262 \n    -0.851 \n    -0.746 \n    -0.746 \n    -0.746 \n  \n  \n    KränkandeB \n    =~ \n    abk4 \n    129.480 \n    0.347 \n    0.304 \n    0.304 \n    0.304 \n  \n  \n    KränkandeB \n    =~ \n    abk1 \n    128.065 \n    -0.366 \n    -0.320 \n    -0.320 \n    -0.320 \n  \n  \n    MöjlPåverka \n    =~ \n    abk4 \n    121.051 \n    0.729 \n    0.587 \n    0.587 \n    0.587 \n  \n  \n    Återhämtning \n    =~ \n    mp5 \n    119.779 \n    0.717 \n    0.556 \n    0.556 \n    0.556 \n  \n  \n    MöjlPåverka \n    =~ \n    abk3 \n    119.457 \n    0.845 \n    0.681 \n    0.681 \n    0.681 \n  \n  \n    PsykTrygg \n    =~ \n    mp5 \n    117.785 \n    -0.532 \n    -0.440 \n    -0.440 \n    -0.440 \n  \n  \n    Stöd \n    =~ \n    abk4 \n    108.393 \n    0.438 \n    0.347 \n    0.347 \n    0.347 \n  \n\n\n\n\n\n\n\n11.1.4.2 Residualkorrelationer\n\n\nCode\nmodificationIndices(CFAall,\n                    standardized = T) %>% \n  as.data.frame(row.names = NULL) %>% \n  filter(mi > 20,\n         op == \"~~\") %>% \n  arrange(desc(mi)) %>% \n  mutate(across(where(is.numeric),~ round(.x, 3))) %>%\n  kbl_rise(fontsize = 14, width = 75)\n\n\n\n\n \n  \n    lhs \n    op \n    rhs \n    mi \n    epc \n    sepc.lv \n    sepc.all \n    sepc.nox \n  \n \n\n  \n    abk1 \n    ~~ \n    abk2 \n    380.761 \n    0.375 \n    0.375 \n    1.393 \n    1.393 \n  \n  \n    st4 \n    ~~ \n    st5 \n    252.681 \n    0.380 \n    0.380 \n    0.657 \n    0.657 \n  \n  \n    abk5 \n    ~~ \n    st7 \n    101.134 \n    0.298 \n    0.298 \n    0.719 \n    0.719 \n  \n  \n    abk5 \n    ~~ \n    ls3 \n    91.141 \n    0.266 \n    0.266 \n    0.894 \n    0.894 \n  \n  \n    mp3 \n    ~~ \n    mp4 \n    61.834 \n    0.209 \n    0.209 \n    0.484 \n    0.484 \n  \n  \n    ls4 \n    ~~ \n    ls5 \n    61.424 \n    0.162 \n    0.162 \n    0.592 \n    0.592 \n  \n  \n    abk3 \n    ~~ \n    pt1 \n    54.000 \n    0.264 \n    0.264 \n    0.609 \n    0.609 \n  \n  \n    mp5 \n    ~~ \n    å2 \n    47.294 \n    0.209 \n    0.209 \n    0.646 \n    0.646 \n  \n  \n    pt6 \n    ~~ \n    pt7 \n    45.842 \n    0.124 \n    0.124 \n    0.632 \n    0.632 \n  \n  \n    abk5 \n    ~~ \n    st1 \n    40.605 \n    0.218 \n    0.218 \n    0.572 \n    0.572 \n  \n  \n    abk2 \n    ~~ \n    abk3 \n    37.081 \n    -0.285 \n    -0.285 \n    -0.660 \n    -0.660 \n  \n  \n    kb5 \n    ~~ \n    kb6 \n    36.303 \n    0.222 \n    0.222 \n    0.490 \n    0.490 \n  \n  \n    abk2 \n    ~~ \n    mp4 \n    32.664 \n    -0.242 \n    -0.242 \n    -0.690 \n    -0.690 \n  \n  \n    abk2 \n    ~~ \n    mp3 \n    31.727 \n    -0.251 \n    -0.251 \n    -0.648 \n    -0.648 \n  \n  \n    abk1 \n    ~~ \n    mp3 \n    31.080 \n    -0.240 \n    -0.240 \n    -0.723 \n    -0.723 \n  \n  \n    abk1 \n    ~~ \n    mp4 \n    29.334 \n    -0.208 \n    -0.208 \n    -0.692 \n    -0.692 \n  \n  \n    å2 \n    ~~ \n    å3 \n    27.400 \n    0.121 \n    0.121 \n    0.499 \n    0.499 \n  \n  \n    abk4 \n    ~~ \n    abk5 \n    24.927 \n    -0.168 \n    -0.168 \n    -0.521 \n    -0.521 \n  \n  \n    abk3 \n    ~~ \n    pt7 \n    24.408 \n    0.185 \n    0.185 \n    0.582 \n    0.582 \n  \n  \n    å4 \n    ~~ \n    pt1 \n    24.343 \n    0.180 \n    0.180 \n    0.550 \n    0.550 \n  \n  \n    pt4 \n    ~~ \n    pt5 \n    24.327 \n    0.104 \n    0.104 \n    0.437 \n    0.437 \n  \n  \n    mp3 \n    ~~ \n    å3 \n    24.037 \n    -0.209 \n    -0.209 \n    -0.632 \n    -0.632 \n  \n  \n    abk2 \n    ~~ \n    pt5 \n    22.452 \n    -0.242 \n    -0.242 \n    -0.939 \n    -0.939 \n  \n  \n    abk1 \n    ~~ \n    abk3 \n    20.905 \n    -0.212 \n    -0.212 \n    -0.571 \n    -0.571 \n  \n  \n    st1 \n    ~~ \n    st5 \n    20.726 \n    -0.189 \n    -0.189 \n    -0.441 \n    -0.441 \n  \n  \n    abk3 \n    ~~ \n    abk5 \n    20.661 \n    -0.212 \n    -0.212 \n    -0.440 \n    -0.440 \n  \n  \n    abk2 \n    ~~ \n    pt2 \n    20.591 \n    -0.220 \n    -0.220 \n    -0.703 \n    -0.703 \n  \n  \n    abk1 \n    ~~ \n    pt5 \n    20.246 \n    -0.213 \n    -0.213 \n    -0.964 \n    -0.964 \n  \n  \n    abk2 \n    ~~ \n    st5 \n    20.099 \n    -0.213 \n    -0.213 \n    -0.541 \n    -0.541"
  },
  {
    "objectID": "cfa/osaCFA.html#rasch-based-model",
    "href": "cfa/osaCFA.html#rasch-based-model",
    "title": "11  Konfirmatorisk faktoranalys",
    "section": "11.2 Rasch based model",
    "text": "11.2 Rasch based model\nItems och justerade svarskategorier utifrån Rasch-analyserna.\n\n\nCode\n# recode response categories\n\ndf <- df %>% \n  mutate(abk3 = car::recode(abk3,\"1=0;2=0;3=1;4=2;5=3\"),\n         abk2 = car::recode(abk2,\"2=1;3=2;4=3;5=4\"),\n         st1 = recode(st1, \"1=0;2=1;3=2;4=3;5=4\"),\n         st2 = recode(st2, \"1=0;2=1;3=1;4=2;5=3\"),\n         across(kb1:kb7, ~ recode(.x,\"3=2;4=2\"))\n         )\n\ndf$mp1<-recode(df$mp1,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf$mp3<-recode(df$mp3,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf$mp2<-recode(df$mp2,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf$mp5<-recode(df$mp5,\"2=1;3=2;4=3;5=4\",as.factor=FALSE)\n\n\n\n\nCode\nraschItems <- \"BelastKrav =~ abk2+abk3+abk5+abk6\n             MöjlPåverka =~ mp1+mp2+mp3+mp5\n             Stöd =~ st1+st2+st5+st6+st7\n             Återhämtning =~ å1+å3+å4+å5\n             Ledarskap =~ ls1+ls2+ls3+ls5+ls6\n             KränkandeB =~ kb2+kb3+kb4+kb5+kb6+kb7\n             PsykTrygg =~ pt1+pt2+pt3+pt4+pt6\"\n\nCFArasch <- cfa(\n  model = raschItems,\n  data = df,\n  rotation = \"oblimin\",\n  estimator = \"WLSMV\",\n  ordered = TRUE\n)\n\n\n\n11.2.1 Model fit\n\n\nCode\n# create table with model fit metrics\n# define fit metrics of interest\nfit_metrics_robust <- c(\"chisq.scaled\", \"df\", \"pvalue.scaled\", \n                         \"cfi.scaled\", \"tli.scaled\", \"rmsea.scaled\", \"srmr\")\nfitmeasures(CFArasch, fit_metrics_robust) %>% \n  rbind() %>% \n  as.data.frame() %>% \n  mutate(across(where(is.numeric),~ round(.x, 3))) %>%\n  rename(Chi2 = chisq.scaled,\n         p = pvalue.scaled,\n         CFI = cfi.scaled,\n         TLI = tli.scaled,\n         RMSEA = rmsea.scaled,\n         SRMR = srmr) %>% \n  formattable(.,\n              table.attr = 'class=\\\"table table-striped\\\" style=\"font-size: 14px; font-family: Lato; width: 80%\"')\n\n\n\n\n\n\n\n\n\nChi2\n\n\ndf\n\n\np\n\n\nCFI\n\n\nTLI\n\n\nRMSEA\n\n\nSRMR\n\n\n\n\n\n\n.\n\n\n1093.26\n\n\n474\n\n\n0\n\n\n0.957\n\n\n0.952\n\n\n0.054\n\n\n0.056\n\n\n\n\n\n\n\n\n\n11.2.2 Kovarians\nSamband mellan faktorer, sorterat på störst korrelation.\n\n\nCode\nCFAout2 <- summary(CFArasch)\n\nCFAout2[[\"pe\"]] %>% \n  filter(op == \"~~\") %>% \n  slice(41:61) %>% \n  mutate(across(where(is.numeric),~ round(.x, 3))) %>%\n  select(!exo) %>% \n  arrange(desc(est)) %>% \n  kbl_rise()\n\n\n\n\n \n  \n    lhs \n    op \n    rhs \n    est \n    se \n    z \n    pvalue \n  \n \n\n  \n    Ledarskap \n    ~~ \n    PsykTrygg \n    0.489 \n    0.027 \n    18.059 \n    0.000 \n  \n  \n    Återhämtning \n    ~~ \n    Ledarskap \n    0.384 \n    0.029 \n    13.065 \n    0.000 \n  \n  \n    KränkandeB \n    ~~ \n    PsykTrygg \n    0.376 \n    0.033 \n    11.264 \n    0.000 \n  \n  \n    Återhämtning \n    ~~ \n    PsykTrygg \n    0.366 \n    0.030 \n    12.398 \n    0.000 \n  \n  \n    Stöd \n    ~~ \n    PsykTrygg \n    0.236 \n    0.023 \n    10.467 \n    0.000 \n  \n  \n    Stöd \n    ~~ \n    Ledarskap \n    0.235 \n    0.021 \n    11.050 \n    0.000 \n  \n  \n    Ledarskap \n    ~~ \n    KränkandeB \n    0.219 \n    0.034 \n    6.457 \n    0.000 \n  \n  \n    Stöd \n    ~~ \n    Återhämtning \n    0.188 \n    0.019 \n    9.672 \n    0.000 \n  \n  \n    Återhämtning \n    ~~ \n    KränkandeB \n    0.187 \n    0.031 \n    6.081 \n    0.000 \n  \n  \n    BelastKrav \n    ~~ \n    Återhämtning \n    0.164 \n    0.026 \n    6.398 \n    0.000 \n  \n  \n    MöjlPåverka \n    ~~ \n    Återhämtning \n    0.159 \n    0.023 \n    6.915 \n    0.000 \n  \n  \n    BelastKrav \n    ~~ \n    Ledarskap \n    0.148 \n    0.024 \n    6.276 \n    0.000 \n  \n  \n    MöjlPåverka \n    ~~ \n    PsykTrygg \n    0.146 \n    0.024 \n    6.014 \n    0.000 \n  \n  \n    MöjlPåverka \n    ~~ \n    Ledarskap \n    0.135 \n    0.026 \n    5.247 \n    0.000 \n  \n  \n    Stöd \n    ~~ \n    KränkandeB \n    0.125 \n    0.018 \n    6.888 \n    0.000 \n  \n  \n    BelastKrav \n    ~~ \n    PsykTrygg \n    0.124 \n    0.021 \n    5.938 \n    0.000 \n  \n  \n    MöjlPåverka \n    ~~ \n    Stöd \n    0.079 \n    0.014 \n    5.698 \n    0.000 \n  \n  \n    BelastKrav \n    ~~ \n    Stöd \n    0.077 \n    0.014 \n    5.624 \n    0.000 \n  \n  \n    BelastKrav \n    ~~ \n    KränkandeB \n    0.058 \n    0.013 \n    4.418 \n    0.000 \n  \n  \n    BelastKrav \n    ~~ \n    MöjlPåverka \n    0.051 \n    0.011 \n    4.421 \n    0.000 \n  \n  \n    MöjlPåverka \n    ~~ \n    KränkandeB \n    0.023 \n    0.020 \n    1.145 \n    0.252 \n  \n\n\n\n\n\n\n\n11.2.3 Model plot\n\n\nCode\nlavaanPlot(model = CFArasch, \n           coefs = T, stand = T, covs = T,\n           node_options = list(fontname = \"Helvetica\"), \n           edge_options = list(color = \"grey\"),\n           graph_options = list(rankdir = \"LR\"))\n\n\n\n\n\n\n\n\n11.2.4 Modification indices\nOrdnade efter storlek, störst först.\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nao1 \n\n\nJag vet vilka arbetsuppgifter jag har.\n\n\n\n\nao2 \n\n\nJag vet hur mitt arbete ska utföras.\n\n\n\n\nao3 \n\n\nJag vet vilka resultat som jag ska uppnå med mitt arbete.\n\n\n\n\nao4 \n\n\nDet finns tydliga mål för min arbetsgrupp.\n\n\n\n\nao5 \n\n\nDet finns tydliga mål för min organisation.\n\n\n\n\nabk1\n\n\nMin arbetsbelastning är rimlig.\n\n\n\n\nabk2\n\n\nJag hinner med mina arbetsuppgifter inom min arbetstid.\n\n\n\n\nabk3\n\n\nMitt arbete är lagom omväxlande.\n\n\n\n\nabk4\n\n\nJag upplever att andras krav på mig är rimliga.\n\n\n\n\nabk5\n\n\nJag kan få hjälp om min arbetsbelastning är för hög.\n\n\n\n\nabk6\n\n\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter.\n\n\n\n\nmp1 \n\n\nJag har de resurser som behövs för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp2 \n\n\nJag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras.\n\n\n\n\nmp3 \n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp4 \n\n\nJag kan påverka beslut som rör mina arbetsuppgifter.\n\n\n\n\nmp5 \n\n\nJag kan själv bestämma min arbetstakt.\n\n\n\n\nst1 \n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2 \n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst3 \n\n\nVi samarbetar bra på min arbetsplats.\n\n\n\n\nst4 \n\n\nJag visar uppskattning till mina kollegor för deras arbetsinsatser.\n\n\n\n\nst5 \n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\nst6 \n\n\nJag får tekniskt stöd vid behov.\n\n\n\n\nst7 \n\n\nJag kan få handledning i mitt arbete om jag behöver det.\n\n\n\n\nå1 \n\n\nJag kan använda raster till att koppla av från arbetet.\n\n\n\n\nå2 \n\n\nJag har möjlighet att arbeta i lugnare takt efter arbetsintensiva perioder.\n\n\n\n\nå3 \n\n\nJag har tid för reflektion över hur jag har utfört arbetet.\n\n\n\n\nå4 \n\n\nJag har ork kvar för att göra andra saker efter arbetsdagens slut.\n\n\n\n\nå5 \n\n\nJag kan lägga tankar på arbetet åt sidan på min lediga tid.\n\n\n\n\nls1 \n\n\nMin chef ger mig återkoppling på hur jag utför arbetet.\n\n\n\n\nls2 \n\n\nMin chef har en god uppfattning om min arbetsbelastning.\n\n\n\n\nls3 \n\n\nMin chef agerar om jag har allt för mycket arbete att utföra.\n\n\n\n\nls4 \n\n\nMin chef ser till att alla kommer till tals.\n\n\n\n\nls5 \n\n\nMin chef hanterar konflikter på ett bra sätt.\n\n\n\n\nls6 \n\n\nMin chef och jag har tillräckligt med avstämningar.\n\n\n\n\nku1 \n\n\nMina kunskaper och färdigheter är till nytta i mitt arbete.\n\n\n\n\nku2 \n\n\nJag har tillräckligt med kunskap/färdigheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nku3 \n\n\nJag har möjlighet att lära mig nya saker när arbetsuppgifterna kräver det.\n\n\n\n\nku4 \n\n\nJag har möjlighet till långsiktig kompetensutveckling i mitt arbete.\n\n\n\n\nkb1 \n\n\nBlivit utsatt för att någon undanhåller information som har påverkat din prestation.\n\n\n\n\nkb2 \n\n\nBlivit utsatt för skvaller eller rykten spridda om dig.\n\n\n\n\nkb3 \n\n\nBlivit ignorerad eller exkluderad.\n\n\n\n\nkb4 \n\n\nFått kränkande eller stötande kommentarer om dig som person, dina attityder eller ditt privatliv.\n\n\n\n\nkb5 \n\n\nBlivit utskälld eller varit föremål för andras aggressiva utbrott.\n\n\n\n\nkb6 \n\n\nBlivit påmind om dina felsteg eller misstag.\n\n\n\n\nkb7 \n\n\nBlivit utsatt för ett otrevligt bemötande när du närmar dig andra.\n\n\n\n\npt1 \n\n\nJag har en positiv känsla när jag kommer till jobbet.\n\n\n\n\npt2 \n\n\nJag känner mig delaktig i gemenskapen på min arbetsplats.\n\n\n\n\npt3 \n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4 \n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5 \n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\npt6 \n\n\nMina ansträngningar värdesätts.\n\n\n\n\npt7 \n\n\nMina idéer ges tid och uppmärksamhet.\n\n\n\n\n\n\n\n11.2.4.1 Korsladdningar\nMed MI > 50.\n\n\nCode\nmodificationIndices(CFArasch,\n                    standardized = T) %>% \n  as.data.frame(row.names = NULL) %>% \n  filter(mi > 50,\n         op == \"=~\") %>% \n  arrange(desc(mi)) %>% \n  mutate(across(where(is.numeric),~ round(.x, 3))) %>%\n  kbl_rise(fontsize = 14, width = 75)\n\n\n\n\n \n  \n    lhs \n    op \n    rhs \n    mi \n    epc \n    sepc.lv \n    sepc.all \n    sepc.nox \n  \n \n\n  \n    PsykTrygg \n    =~ \n    st5 \n    51.313 \n    0.627 \n    0.52 \n    0.52 \n    0.52 \n  \n\n\n\n\n\n\n\n11.2.4.2 Residualkorrelationer\n\n\nCode\nmodificationIndices(CFArasch,\n                    standardized = T) %>% \n  as.data.frame(row.names = NULL) %>% \n  filter(mi > 20,\n         op == \"~~\") %>% \n  arrange(desc(mi)) %>% \n  mutate(across(where(is.numeric),~ round(.x, 3))) %>%\n  kbl_rise(fontsize = 14, width = 75)\n\n\n\n\n \n  \n    lhs \n    op \n    rhs \n    mi \n    epc \n    sepc.lv \n    sepc.all \n    sepc.nox \n  \n \n\n  \n    st1 \n    ~~ \n    st2 \n    42.406 \n    0.243 \n    0.243 \n    0.293 \n    0.293 \n  \n  \n    st5 \n    ~~ \n    pt6 \n    39.028 \n    0.209 \n    0.209 \n    0.542 \n    0.542 \n  \n  \n    abk5 \n    ~~ \n    st7 \n    35.842 \n    0.210 \n    0.210 \n    0.461 \n    0.461 \n  \n  \n    abk5 \n    ~~ \n    ls3 \n    33.206 \n    0.179 \n    0.179 \n    0.540 \n    0.540 \n  \n  \n    pt3 \n    ~~ \n    pt4 \n    21.822 \n    0.123 \n    0.123 \n    0.413 \n    0.413 \n  \n  \n    kb5 \n    ~~ \n    kb6 \n    20.153 \n    0.189 \n    0.189 \n    0.428 \n    0.428"
  },
  {
    "objectID": "10_arbkrv_rec/10_arbkrv_rec.html#bakgrundsdata",
    "href": "10_arbkrv_rec/10_arbkrv_rec.html#bakgrundsdata",
    "title": "12  Krav, arbetetsbelastning och återhämtning",
    "section": "12.1 Bakgrundsdata",
    "text": "12.1 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n12.1.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na, c(\"abk\", \"å\"))\n\n\n\n\n\nVi har relativt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0006\"), starts_with(\"q0009\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0006\"), starts_with(\"q0009\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n12.1.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n745\n\n\n14.1\n\n\n\n\nMycket ofta\n\n\n1432\n\n\n27.1\n\n\n\n\nGanska ofta\n\n\n1367\n\n\n25.9\n\n\n\n\nIbland \n\n\n941\n\n\n17.8\n\n\n\n\nSällan \n\n\n640\n\n\n12.1\n\n\n\n\nAldrig \n\n\n155\n\n\n2.9\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))"
  },
  {
    "objectID": "10_arbkrv_rec/10_arbkrv_rec.html#sec-explorativ1",
    "href": "10_arbkrv_rec/10_arbkrv_rec.html#sec-explorativ1",
    "title": "12  Krav, arbetetsbelastning och återhämtning",
    "section": "12.2 Deskriptiva data",
    "text": "12.2 Deskriptiva data\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVi har väldigt få svar i lägsta kategorierna för items abk1 och slår därför ihop de två lägsta svarskategorierna för detta item.\n\n\nCode\ndf.omit.na$abk3 <- recode(df.omit.na$abk3,\"1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)"
  },
  {
    "objectID": "10_arbkrv_rec/10_arbkrv_rec.html#rasch-analys-1",
    "href": "10_arbkrv_rec/10_arbkrv_rec.html#rasch-analys-1",
    "title": "12  Krav, arbetetsbelastning och återhämtning",
    "section": "12.3 Rasch-analys 1",
    "text": "12.3 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nabk1\n\n\nMin arbetsbelastning är rimlig.\n\n\n\n\nabk2\n\n\nJag hinner med mina arbetsuppgifter inom min arbetstid.\n\n\n\n\nabk3\n\n\nMitt arbete är lagom omväxlande.\n\n\n\n\nabk4\n\n\nJag upplever att andras krav på mig är rimliga.\n\n\n\n\nabk5\n\n\nJag kan få hjälp om min arbetsbelastning är för hög.\n\n\n\n\nabk6\n\n\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter.\n\n\n\n\nå1 \n\n\nJag kan använda raster till att koppla av från arbetet.\n\n\n\n\nå2 \n\n\nJag har möjlighet att arbeta i lugnare takt efter arbetsintensiva perioder.\n\n\n\n\nå3 \n\n\nJag har tid för reflektion över hur jag har utfört arbetet.\n\n\n\n\nå4 \n\n\nJag har ork kvar för att göra andra saker efter arbetsdagens slut.\n\n\n\n\nå5 \n\n\nJag kan lägga tankar på arbetet åt sidan på min lediga tid.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df.omit.na, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    abk1 \n    0.663 \n    0.679 \n    -4.082 \n    -3.995 \n  \n  \n    abk2 \n    0.751 \n    0.773 \n    -2.873 \n    -2.69 \n  \n  \n    abk3 \n    1.404 \n    1.304 \n    3.414 \n    2.81 \n  \n  \n    abk4 \n    0.795 \n    0.81 \n    -2.245 \n    -2.483 \n  \n  \n    abk5 \n    1.231 \n    1.165 \n    2.026 \n    1.944 \n  \n  \n    abk6 \n    1.205 \n    1.196 \n    2.065 \n    2.044 \n  \n  \n    å1 \n    0.987 \n    0.923 \n    0.276 \n    -0.793 \n  \n  \n    å2 \n    0.706 \n    0.719 \n    -3.958 \n    -3.309 \n  \n  \n    å3 \n    0.676 \n    0.683 \n    -4.2 \n    -4.14 \n  \n  \n    å4 \n    0.824 \n    0.812 \n    -2.171 \n    -2.638 \n  \n  \n    å5 \n    1.163 \n    1.107 \n    1.791 \n    1.388 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.98 \n  \n  \n    1.88 \n  \n  \n    1.26 \n  \n  \n    1.21 \n  \n  \n    1.08 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    abk1 \n    abk2 \n    abk3 \n    abk4 \n    abk5 \n    abk6 \n    å1 \n    å2 \n    å3 \n    å4 \n    å5 \n  \n \n\n  \n    abk1 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    abk2 \n    0.5 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    abk3 \n    -0.19 \n    -0.29 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    abk4 \n    0.09 \n    0.03 \n    0.19 \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    abk5 \n    -0.1 \n    -0.08 \n    -0.1 \n    -0.11 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    abk6 \n    -0.14 \n    -0.22 \n    -0.02 \n    0.04 \n    -0.12 \n     \n     \n     \n     \n     \n     \n  \n  \n    å1 \n    -0.2 \n    -0.15 \n    -0.14 \n    -0.24 \n    -0.14 \n    -0.26 \n     \n     \n     \n     \n     \n  \n  \n    å2 \n    -0.09 \n    0 \n    -0.2 \n    -0.25 \n    -0.13 \n    -0.24 \n    0.12 \n     \n     \n     \n     \n  \n  \n    å3 \n    -0.04 \n    -0.02 \n    -0.17 \n    -0.25 \n    -0.08 \n    -0.21 \n    0.05 \n    0.36 \n     \n     \n     \n  \n  \n    å4 \n    -0.15 \n    -0.22 \n    -0.06 \n    -0.08 \n    -0.24 \n    -0.04 \n    -0.06 \n    -0.04 \n    -0.03 \n     \n     \n  \n  \n    å5 \n    -0.22 \n    -0.18 \n    -0.1 \n    -0.15 \n    -0.16 \n    -0.02 \n    0 \n    -0.2 \n    -0.25 \n    0.07 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.11, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nDen initiala analysen som inkluderar samtliga items från områdena ‘arbetsbelastning och krav’ och ‘återhämtning’ visar att item abk1, abk3 och å3 visar låg item fit sett till rekommenderade tröskelvärden. Därtill visar å2 en relativt låg item fit, precis över det rekommenderade trsökelvärdet. Det finns även höga residualkorrelationer mellan abk1 och abk2, abk3 och abk4, samt å2 och å3. Item abk1, abk3 och å2 tas därför bort och analysen körs igen. Eftersom å2 kan tänkas vara ett relevant item i flera branscher än å3 tas å2 bort från fortsatt analys (det är inte möjligt att arbeta i en lugnare takt efter arbetsintensiva perioder i alla branscher). Vi slår också ihop svarsalternativ 1 och 2 för abk2, som visar oordnade trösklar.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"abk1\", \"abk3\", \"å2\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!any_of(removed_items)) %>%\n  mutate(\n    abk2 = recode(abk2, \"0=0;1=1;2=1;3=2;4=3;5=4\")\n  )"
  },
  {
    "objectID": "10_arbkrv_rec/10_arbkrv_rec.html#rasch-analys-2",
    "href": "10_arbkrv_rec/10_arbkrv_rec.html#rasch-analys-2",
    "title": "12  Krav, arbetetsbelastning och återhämtning",
    "section": "12.4 Rasch-analys 2",
    "text": "12.4 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nabk2\n\n\nJag hinner med mina arbetsuppgifter inom min arbetstid.\n\n\n\n\nabk4\n\n\nJag upplever att andras krav på mig är rimliga.\n\n\n\n\nabk5\n\n\nJag kan få hjälp om min arbetsbelastning är för hög.\n\n\n\n\nabk6\n\n\nMitt arbete är fritt från psykiskt påfrestande arbetsuppgifter.\n\n\n\n\nå1 \n\n\nJag kan använda raster till att koppla av från arbetet.\n\n\n\n\nå3 \n\n\nJag har tid för reflektion över hur jag har utfört arbetet.\n\n\n\n\nå4 \n\n\nJag har ork kvar för att göra andra saker efter arbetsdagens slut.\n\n\n\n\nå5 \n\n\nJag kan lägga tankar på arbetet åt sidan på min lediga tid.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    abk2 \n    0.773 \n    0.767 \n    -2.741 \n    -2.997 \n  \n  \n    abk4 \n    0.808 \n    0.831 \n    -2.24 \n    -2.194 \n  \n  \n    abk5 \n    1.097 \n    1.093 \n    0.944 \n    1.072 \n  \n  \n    abk6 \n    1.104 \n    1.111 \n    1.1 \n    1.273 \n  \n  \n    å1 \n    0.932 \n    0.889 \n    -0.819 \n    -1.347 \n  \n  \n    å3 \n    0.714 \n    0.713 \n    -3.466 \n    -3.559 \n  \n  \n    å4 \n    0.777 \n    0.767 \n    -2.649 \n    -2.833 \n  \n  \n    å5 \n    1.022 \n    1.001 \n    0.27 \n    0.11 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.57 \n  \n  \n    1.50 \n  \n  \n    1.23 \n  \n  \n    1.09 \n  \n  \n    0.96 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    abk2 \n    abk4 \n    abk5 \n    abk6 \n    å1 \n    å3 \n    å4 \n    å5 \n  \n \n\n  \n    abk2 \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    abk4 \n    0.1 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    abk5 \n    -0.08 \n    -0.12 \n     \n     \n     \n     \n     \n     \n  \n  \n    abk6 \n    -0.18 \n    0.02 \n    -0.19 \n     \n     \n     \n     \n     \n  \n  \n    å1 \n    -0.11 \n    -0.24 \n    -0.18 \n    -0.32 \n     \n     \n     \n     \n  \n  \n    å3 \n    0.06 \n    -0.2 \n    -0.08 \n    -0.23 \n    0.07 \n     \n     \n     \n  \n  \n    å4 \n    -0.17 \n    -0.09 \n    -0.3 \n    -0.1 \n    -0.09 \n    -0.01 \n     \n     \n  \n  \n    å5 \n    -0.19 \n    -0.19 \n    -0.24 \n    -0.11 \n    -0.06 \n    -0.28 \n    0 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.074, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nAnalysens utfall ser bra ut. Abk4 och abk2 visar en residualkorrelation strax över det rekommenderade gränsvärdet, men eftersom den är marginell går vi vidare och undersöker DIF och reliabilitet.\n\n12.4.0.1 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n\n\n\n\n\n\n\n\nItem\n\n\n2\n\n\n3\n\n\nMean location\n\n\nStDev\n\n\nMaxDiff\n\n\n\n\n\n\nabk2\n\n\n-0.072\n\n\n-0.003\n\n\n-0.038\n\n\n0.049\n\n\n0.069\n\n\n\n\nabk4\n\n\n-0.493\n\n\n-0.454\n\n\n-0.474\n\n\n0.028\n\n\n0.039\n\n\n\n\nabk5\n\n\n-0.065\n\n\n0.210\n\n\n0.072\n\n\n0.195\n\n\n0.276\n\n\n\n\nabk6\n\n\n0.238\n\n\n-0.074\n\n\n0.082\n\n\n0.221\n\n\n0.312\n\n\n\n\nå1\n\n\n0.053\n\n\n0.106\n\n\n0.079\n\n\n0.038\n\n\n0.054\n\n\n\n\nå3\n\n\n0.197\n\n\n0.216\n\n\n0.207\n\n\n0.014\n\n\n0.019\n\n\n\n\nå4\n\n\n0.027\n\n\n-0.111\n\n\n-0.042\n\n\n0.098\n\n\n0.138\n\n\n\n\nå5\n\n\n0.115\n\n\n0.109\n\n\n0.112\n\n\n0.004\n\n\n0.006\n\n\n\n\n\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\nInga problem i DIF-analysen baserat på kön, ålder, bransch eller hemarbete.\n\n\n12.4.1 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nReliabiliteten ser mycket bra ut - vi går vidare med att plocka ut item-parametrar och en konverteringstabell.\n\n\n12.4.2 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Threshold 3 \n    Threshold 4 \n    Threshold 5 \n    Item location \n  \n \n\n  \n    abk2 \n    -2.22 \n    0.46 \n    1.38 \n    3.16 \n    NA \n    0.69 \n  \n  \n    abk4 \n    -2.34 \n    -0.92 \n    -0.29 \n    1.06 \n    2.43 \n    -0.01 \n  \n  \n    abk5 \n    -1.43 \n    0.30 \n    1.29 \n    1.61 \n    2.25 \n    0.8 \n  \n  \n    abk6 \n    -1.14 \n    -0.03 \n    0.60 \n    1.58 \n    3.16 \n    0.83 \n  \n  \n    å1 \n    -1.44 \n    0.34 \n    0.93 \n    1.26 \n    2.97 \n    0.81 \n  \n  \n    å3 \n    -1.73 \n    0.24 \n    1.01 \n    2.26 \n    2.93 \n    0.94 \n  \n  \n    å4 \n    -1.65 \n    -0.09 \n    0.69 \n    1.67 \n    2.96 \n    0.72 \n  \n  \n    å5 \n    -1.23 \n    0.03 \n    0.88 \n    1.42 \n    3.13 \n    0.85 \n  \n\n\n\n\n\nCode\n#RIitemparams(df2, \"itemParams_arbkrv.csv\")\n\n\n\n12.4.2.1 Ordinal -> interval\n\n\nCode\nRIscoreSE(df2, width = 50)\n\n\n\n\n \n  \n    Ordinal sum score \n    Logit score \n    Logit std.error \n  \n \n\n  \n    1 \n    -3.350 \n    0.903 \n  \n  \n    2 \n    -2.740 \n    0.723 \n  \n  \n    3 \n    -2.305 \n    0.630 \n  \n  \n    4 \n    -1.958 \n    0.571 \n  \n  \n    5 \n    -1.663 \n    0.529 \n  \n  \n    6 \n    -1.405 \n    0.498 \n  \n  \n    7 \n    -1.172 \n    0.474 \n  \n  \n    8 \n    -0.960 \n    0.453 \n  \n  \n    9 \n    -0.764 \n    0.436 \n  \n  \n    10 \n    -0.582 \n    0.422 \n  \n  \n    11 \n    -0.411 \n    0.410 \n  \n  \n    12 \n    -0.249 \n    0.399 \n  \n  \n    13 \n    -0.096 \n    0.389 \n  \n  \n    14 \n    0.050 \n    0.381 \n  \n  \n    15 \n    0.191 \n    0.374 \n  \n  \n    16 \n    0.326 \n    0.368 \n  \n  \n    17 \n    0.457 \n    0.363 \n  \n  \n    18 \n    0.585 \n    0.360 \n  \n  \n    19 \n    0.711 \n    0.357 \n  \n  \n    20 \n    0.834 \n    0.356 \n  \n  \n    21 \n    0.957 \n    0.355 \n  \n  \n    22 \n    1.080 \n    0.356 \n  \n  \n    23 \n    1.204 \n    0.358 \n  \n  \n    24 \n    1.330 \n    0.361 \n  \n  \n    25 \n    1.458 \n    0.365 \n  \n  \n    26 \n    1.590 \n    0.371 \n  \n  \n    27 \n    1.727 \n    0.378 \n  \n  \n    28 \n    1.871 \n    0.387 \n  \n  \n    29 \n    2.022 \n    0.398 \n  \n  \n    30 \n    2.183 \n    0.412 \n  \n  \n    31 \n    2.356 \n    0.428 \n  \n  \n    32 \n    2.545 \n    0.448 \n  \n  \n    33 \n    2.752 \n    0.472 \n  \n  \n    34 \n    2.985 \n    0.503 \n  \n  \n    35 \n    3.252 \n    0.545 \n  \n  \n    36 \n    3.571 \n    0.604 \n  \n  \n    37 \n    3.975 \n    0.698 \n  \n  \n    38 \n    4.000 \n    0.705 \n  \n  \n    39 \n    4.000 \n    0.705 \n  \n\n\n\n\n\n\n\n\n12.4.3 Estimering av mätvärden\n\n\nCode\ndf2$score <- RIestThetas(df2)\n#write.csv(df2, \"arbkrv_recSCORED.csv\")"
  },
  {
    "objectID": "11_psyktry_std_mp/11_psyktry_std_mp.html#bakgrundsdata",
    "href": "11_psyktry_std_mp/11_psyktry_std_mp.html#bakgrundsdata",
    "title": "13  Psykologisk trygghet, stöd och möjlighet att påverka",
    "section": "13.1 Bakgrundsdata",
    "text": "13.1 Bakgrundsdata\n\nKönÅlderBranschArbete hemifrån\n\n\n\n\nCode\nRIdemographics(dif.kön,\"Kön\")\n\n\n\n\n \n  \n    Kön \n    n \n    Percent \n  \n \n\n  \n    Kvinna \n    402 \n    69.7 \n  \n  \n    Man \n    172 \n    29.8 \n  \n  \n    Annat \n    1 \n    0.2 \n  \n  \n    Vill ej uppge \n    2 \n    0.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.ålder,\"Ålder\") # kanske även fixa en figur?\n\n\n\n\n \n  \n    Ålder \n    n \n    Percent \n  \n \n\n  \n    18-29 \n    22 \n    3.8 \n  \n  \n    30-39 \n    103 \n    17.8 \n  \n  \n    40-49 \n    175 \n    30.2 \n  \n  \n    50-59 \n    215 \n    37.1 \n  \n  \n    60+ \n    64 \n    11.1 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.bransch,\"Bransch\")\n\n\n\n\n \n  \n    Bransch \n    n \n    Percent \n  \n \n\n  \n    Kontorsarbete (oavsett bransch) \n    284 \n    49.1 \n  \n  \n    Industri \n    26 \n    4.5 \n  \n  \n    Hotell, restaurang, service \n    8 \n    1.4 \n  \n  \n    Handel \n    16 \n    2.8 \n  \n  \n    Skola, utbildning \n    67 \n    11.6 \n  \n  \n    Vård, omsorg \n    99 \n    17.1 \n  \n  \n    Byggverksamhet \n    7 \n    1.2 \n  \n  \n    Annat \n    71 \n    12.3 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIdemographics(dif.hemarbete,\"Antal dagar med arbete hemifrån\")\n\n\n\n\n \n  \n    Antal dagar med arbete hemifrån \n    n \n    Percent \n  \n \n\n  \n    En dag \n    136 \n    23.5 \n  \n  \n    Två dagar \n    105 \n    18.1 \n  \n  \n    Tre dagar \n    35 \n    6.0 \n  \n  \n    Fyra dagar \n    10 \n    1.7 \n  \n  \n    Fem dagar \n    2 \n    0.3 \n  \n  \n    Jag arbetar aldrig eller sällan hemifrån \n    291 \n    50.3 \n  \n\n\n\n\n\n\n\n\n\n13.1.1 Svarsbortfall items\nVi filtrerar bort respondenter som har färre än två svar på frågorna i delskalan.\n\n\nCode\n# If you want to include participants with missing data, input the minimum number of items responses that a participant should have to be included in the analysis:\nmin.responses <- 2\nscale.items <- itemlabels$itemnr\n\n# Select the variables we will work with, and filter out respondents with a lot of missing data\ndf.omit.na <- df %>% \n  filter(length(scale.items)-rowSums(is.na(.[scale.items])) >= min.responses)\n\nRImissing(df.omit.na, c(\"st\", \"mp\", \"pt\"))\n\n\n\n\n\nVi har relativt få saknade svar, och tar därför bort respondenterna som inte har kompletta svar.\n\n\nCode\ndf <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0008\"), starts_with(\"q0013\"), starts_with(\"q0007\"),q0001,q0002,q0003,q0004) %>% \n  rename(Kön = q0002,\n         Ålder = q0001,\n         Bransch = q0003,\n         Hemarbete = q0004) %>% \n  na.omit()\n\ndif.kön <- df$Kön\ndif.ålder <- df$Ålder\ndif.bransch <- df$Bransch\ndif.hemarbete <- df$Hemarbete\n\ndf <- df %>% \n  select(starts_with(\"q0008\"), starts_with(\"q0013\"), starts_with(\"q0007\"))\n\nnames(df) <- itemlabels$itemnr\n\ndf.omit.na <- df\n\n\n\n\n13.1.2 Alla svar för alla frågor\n\n\nCode\nRIallresp(df.omit.na)\n\n\n\n\n\n\n\nResponse category\n\n\nNumber of responses\n\n\nPercent\n\n\n\n\n\n\nAlltid \n\n\n2468\n\n\n28.2\n\n\n\n\nMycket ofta\n\n\n3195\n\n\n36.5\n\n\n\n\nGanska ofta\n\n\n1767\n\n\n20.2\n\n\n\n\nIbland \n\n\n874\n\n\n10.0\n\n\n\n\nSällan \n\n\n346\n\n\n4.0\n\n\n\n\nAldrig \n\n\n109\n\n\n1.2\n\n\n\n\n\n\n\n\n\nCode\n# koda om svarskategorier till siffror\ndf.omit.na <- df.omit.na %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\n\n\n13.1.3 Descriptives - all items\n\nTile plotStacked barsBarplots\n\n\n\n\nCode\nRItileplot(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIbarstack(df.omit.na) + ylab(\"Item\")\n\n\n\n\n\n\n\n\n\nCode\nRIbarplot(df.omit.na)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVi har väldigt få svar i lägsta kategorierna genomgående. Vi slår ihop de två lägsta svarskategorierna för samtliga items utom st2.\n\n\nCode\n#Temporärt slå ihop svarskategorier så att analyserna funkar\n\ndf.omit.na$st1<-recode(df.omit.na$st1,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n#df.omit.na$st2<-recode(df.omit.na$st2,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$st3<-recode(df.omit.na$st3,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$st4<-recode(df.omit.na$st4,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$st5<-recode(df.omit.na$st5,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$st6<-recode(df.omit.na$st6,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$st7<-recode(df.omit.na$st7,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n\ndf.omit.na$pt1<-recode(df.omit.na$pt1,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$pt2<-recode(df.omit.na$pt2,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$pt3<-recode(df.omit.na$pt3,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$pt4<-recode(df.omit.na$pt4,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$pt5<-recode(df.omit.na$pt5,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$pt6<-recode(df.omit.na$pt6,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$pt7<-recode(df.omit.na$pt7,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\n\ndf.omit.na$mp1<-recode(df.omit.na$mp1,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$mp2<-recode(df.omit.na$mp2,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$mp3<-recode(df.omit.na$mp3,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$mp4<-recode(df.omit.na$mp4,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)\ndf.omit.na$mp5<-recode(df.omit.na$mp5,\"0=0;1=0;2=1;3=2;4=3;5=4\",as.factor=FALSE)"
  },
  {
    "objectID": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-1",
    "href": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-1",
    "title": "13  Psykologisk trygghet, stöd och möjlighet att påverka",
    "section": "13.2 Rasch-analys 1",
    "text": "13.2 Rasch-analys 1\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nmp1\n\n\nJag har de resurser som behövs för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp2\n\n\nJag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras.\n\n\n\n\nmp3\n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp4\n\n\nJag kan påverka beslut som rör mina arbetsuppgifter.\n\n\n\n\nmp5\n\n\nJag kan själv bestämma min arbetstakt.\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst3\n\n\nVi samarbetar bra på min arbetsplats.\n\n\n\n\nst4\n\n\nJag visar uppskattning till mina kollegor för deras arbetsinsatser.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\nst6\n\n\nJag får tekniskt stöd vid behov.\n\n\n\n\nst7\n\n\nJag kan få handledning i mitt arbete om jag behöver det.\n\n\n\n\npt1\n\n\nJag har en positiv känsla när jag kommer till jobbet.\n\n\n\n\npt2\n\n\nJag känner mig delaktig i gemenskapen på min arbetsplats.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5\n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\npt6\n\n\nMina ansträngningar värdesätts.\n\n\n\n\npt7\n\n\nMina idéer ges tid och uppmärksamhet.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsAnalysis of response categoriesTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df.omit.na, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    mp1 \n    0.889 \n    0.933 \n    -0.883 \n    -0.65 \n  \n  \n    mp2 \n    1.059 \n    1.048 \n    0.501 \n    0.321 \n  \n  \n    mp3 \n    0.749 \n    0.738 \n    -2.529 \n    -3.176 \n  \n  \n    mp4 \n    1.148 \n    1.215 \n    1.415 \n    2.054 \n  \n  \n    mp5 \n    1.14 \n    1.083 \n    1.377 \n    0.884 \n  \n  \n    st1 \n    1.358 \n    1.239 \n    3.482 \n    2.542 \n  \n  \n    st2 \n    1.348 \n    1.291 \n    3.051 \n    2.987 \n  \n  \n    st3 \n    0.776 \n    0.764 \n    -2.261 \n    -2.642 \n  \n  \n    st4 \n    0.826 \n    0.812 \n    -1.412 \n    -1.932 \n  \n  \n    st5 \n    0.961 \n    0.877 \n    -0.391 \n    -1.152 \n  \n  \n    st6 \n    0.787 \n    0.777 \n    -2.132 \n    -2.567 \n  \n  \n    st7 \n    0.668 \n    0.703 \n    -3.349 \n    -3.351 \n  \n  \n    pt1 \n    0.702 \n    0.717 \n    -2.9 \n    -3.239 \n  \n  \n    pt2 \n    0.637 \n    0.635 \n    -4.085 \n    -4.399 \n  \n  \n    pt3 \n    0.961 \n    0.96 \n    -0.652 \n    -0.293 \n  \n  \n    pt4 \n    1.117 \n    1.132 \n    1.231 \n    1.259 \n  \n  \n    pt5 \n    0.947 \n    0.952 \n    -0.496 \n    -0.369 \n  \n  \n    pt6 \n    0.961 \n    0.944 \n    -0.288 \n    -0.498 \n  \n  \n    pt7 \n    1.351 \n    1.299 \n    3.443 \n    2.971 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df.omit.na))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    3.18 \n  \n  \n    2.07 \n  \n  \n    1.72 \n  \n  \n    1.45 \n  \n  \n    1.30 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df.omit.na, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    mp1 \n    mp2 \n    mp3 \n    mp4 \n    mp5 \n    st1 \n    st2 \n    st3 \n    st4 \n    st5 \n    st6 \n    st7 \n    pt1 \n    pt2 \n    pt3 \n    pt4 \n    pt5 \n    pt6 \n    pt7 \n  \n \n\n  \n    mp1 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp2 \n    0.03 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp3 \n    -0.08 \n    0.16 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp4 \n    -0.19 \n    0.04 \n    0.12 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp5 \n    -0.17 \n    0.08 \n    0.05 \n    0.46 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st1 \n    0.14 \n    -0.11 \n    -0.16 \n    -0.11 \n    -0.08 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    0.3 \n    -0.07 \n    -0.11 \n    -0.05 \n    -0.1 \n    0.16 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st3 \n    -0.1 \n    -0.12 \n    0 \n    -0.16 \n    -0.19 \n    -0.11 \n    -0.16 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st4 \n    -0.22 \n    -0.03 \n    0.07 \n    -0.09 \n    -0.03 \n    -0.19 \n    -0.25 \n    0.31 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st5 \n    -0.14 \n    -0.06 \n    -0.04 \n    -0.16 \n    -0.13 \n    -0.11 \n    -0.22 \n    0.03 \n    0.2 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st6 \n    -0.12 \n    0.04 \n    0.06 \n    -0.13 \n    -0.16 \n    -0.18 \n    -0.24 \n    0.06 \n    0.16 \n    0.35 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st7 \n    -0.14 \n    0.04 \n    0.08 \n    -0.14 \n    -0.08 \n    -0.24 \n    -0.26 \n    0.02 \n    0.31 \n    0.38 \n    0.44 \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    pt1 \n    -0.11 \n    -0.06 \n    -0.11 \n    -0.08 \n    0.14 \n    -0.27 \n    -0.23 \n    0.04 \n    0.11 \n    0.05 \n    0.16 \n    0.25 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    pt2 \n    -0.14 \n    -0.12 \n    -0.09 \n    -0.12 \n    -0.02 \n    -0.23 \n    -0.2 \n    0.07 \n    0.13 \n    0 \n    0.12 \n    0.23 \n    0.48 \n     \n     \n     \n     \n     \n     \n  \n  \n    pt3 \n    0.07 \n    -0.11 \n    -0.08 \n    -0.14 \n    -0.18 \n    0.08 \n    0.01 \n    -0.08 \n    -0.27 \n    -0.16 \n    -0.22 \n    -0.23 \n    -0.12 \n    -0.04 \n     \n     \n     \n     \n     \n  \n  \n    pt4 \n    -0.16 \n    -0.18 \n    -0.05 \n    0.04 \n    -0.07 \n    -0.03 \n    -0.08 \n    -0.11 \n    -0.22 \n    -0.12 \n    -0.24 \n    -0.32 \n    -0.23 \n    -0.18 \n    0.14 \n     \n     \n     \n     \n  \n  \n    pt5 \n    -0.07 \n    -0.21 \n    -0.07 \n    -0.06 \n    -0.15 \n    -0.01 \n    -0.1 \n    0.02 \n    -0.04 \n    -0.16 \n    -0.24 \n    -0.14 \n    -0.12 \n    -0.04 \n    0.02 \n    0.13 \n     \n     \n     \n  \n  \n    pt6 \n    -0.02 \n    -0.24 \n    -0.14 \n    -0.13 \n    -0.23 \n    -0.07 \n    -0.06 \n    0 \n    -0.18 \n    -0.22 \n    -0.15 \n    -0.19 \n    -0.12 \n    0 \n    0.05 \n    0.13 \n    0.37 \n     \n     \n  \n  \n    pt7 \n    -0.03 \n    -0.14 \n    -0.22 \n    -0.15 \n    -0.16 \n    0.02 \n    0 \n    -0.1 \n    -0.28 \n    -0.15 \n    -0.25 \n    -0.34 \n    -0.22 \n    -0.23 \n    0.22 \n    0.35 \n    -0.01 \n    0.22 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.15, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df.omit.na)\n\n\n\n\n\n\n\n\n\nCode\nRIitemCats(df.omit.na, items = \"all\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df.omit.na, xlim = c(-5,5))\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df.omit.na)\n\n\n\n\n\n\n\n\nAnalysens utfall indikerar flertalet psykometriska problem, vi börjar med att ta bort st7, pt1 och pt2 som visar låg item fit och residualkorrelationer.\n\n\nCode\n# create vector with eliminated items\nremoved_items <- c(\"st7\", \"pt1\", \"pt2\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items))"
  },
  {
    "objectID": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-2",
    "href": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-2",
    "title": "13  Psykologisk trygghet, stöd och möjlighet att påverka",
    "section": "13.3 Rasch-analys 2",
    "text": "13.3 Rasch-analys 2\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nmp1\n\n\nJag har de resurser som behövs för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp2\n\n\nJag kan prioritera i vilken ordning mina arbetsuppgifter ska utföras.\n\n\n\n\nmp3\n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp4\n\n\nJag kan påverka beslut som rör mina arbetsuppgifter.\n\n\n\n\nmp5\n\n\nJag kan själv bestämma min arbetstakt.\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst3\n\n\nVi samarbetar bra på min arbetsplats.\n\n\n\n\nst4\n\n\nJag visar uppskattning till mina kollegor för deras arbetsinsatser.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\nst6\n\n\nJag får tekniskt stöd vid behov.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5\n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\npt6\n\n\nMina ansträngningar värdesätts.\n\n\n\n\npt7\n\n\nMina idéer ges tid och uppmärksamhet.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    mp1 \n    0.817 \n    0.865 \n    -1.686 \n    -1.596 \n  \n  \n    mp2 \n    0.989 \n    0.994 \n    0.07 \n    -0.209 \n  \n  \n    mp3 \n    0.712 \n    0.703 \n    -3.151 \n    -3.516 \n  \n  \n    mp4 \n    1.086 \n    1.144 \n    0.83 \n    1.513 \n  \n  \n    mp5 \n    1.137 \n    1.055 \n    1.583 \n    0.538 \n  \n  \n    st1 \n    1.211 \n    1.107 \n    2.141 \n    1.235 \n  \n  \n    st2 \n    1.186 \n    1.146 \n    1.78 \n    1.592 \n  \n  \n    st3 \n    0.764 \n    0.749 \n    -2.532 \n    -2.688 \n  \n  \n    st4 \n    0.854 \n    0.835 \n    -1.32 \n    -1.75 \n  \n  \n    st5 \n    0.962 \n    0.886 \n    -0.372 \n    -1.309 \n  \n  \n    st6 \n    0.825 \n    0.817 \n    -1.659 \n    -1.973 \n  \n  \n    pt3 \n    0.896 \n    0.892 \n    -1.215 \n    -1.137 \n  \n  \n    pt4 \n    1.005 \n    1.021 \n    -0.138 \n    0.438 \n  \n  \n    pt5 \n    0.873 \n    0.891 \n    -1.334 \n    -1.016 \n  \n  \n    pt6 \n    0.886 \n    0.88 \n    -1.271 \n    -1.351 \n  \n  \n    pt7 \n    1.2 \n    1.157 \n    2.008 \n    1.422 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    2.55 \n  \n  \n    1.97 \n  \n  \n    1.74 \n  \n  \n    1.29 \n  \n  \n    1.15 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    mp1 \n    mp2 \n    mp3 \n    mp4 \n    mp5 \n    st1 \n    st2 \n    st3 \n    st4 \n    st5 \n    st6 \n    pt3 \n    pt4 \n    pt5 \n    pt6 \n    pt7 \n  \n \n\n  \n    mp1 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp2 \n    0.02 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp3 \n    -0.09 \n    0.16 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp4 \n    -0.22 \n    0.02 \n    0.11 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp5 \n    -0.18 \n    0.08 \n    0.06 \n    0.45 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st1 \n    0.1 \n    -0.15 \n    -0.2 \n    -0.15 \n    -0.1 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    0.27 \n    -0.1 \n    -0.14 \n    -0.08 \n    -0.12 \n    0.11 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st3 \n    -0.09 \n    -0.11 \n    0.02 \n    -0.17 \n    -0.16 \n    -0.13 \n    -0.18 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st4 \n    -0.19 \n    0.01 \n    0.1 \n    -0.07 \n    0.01 \n    -0.19 \n    -0.25 \n    0.35 \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st5 \n    -0.13 \n    -0.03 \n    -0.01 \n    -0.15 \n    -0.1 \n    -0.12 \n    -0.22 \n    0.07 \n    0.25 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st6 \n    -0.08 \n    0.09 \n    0.11 \n    -0.11 \n    -0.11 \n    -0.17 \n    -0.22 \n    0.12 \n    0.23 \n    0.4 \n     \n     \n     \n     \n     \n     \n  \n  \n    pt3 \n    0.05 \n    -0.12 \n    -0.09 \n    -0.16 \n    -0.18 \n    0.04 \n    -0.03 \n    -0.08 \n    -0.24 \n    -0.15 \n    -0.19 \n     \n     \n     \n     \n     \n  \n  \n    pt4 \n    -0.21 \n    -0.21 \n    -0.09 \n    0 \n    -0.09 \n    -0.09 \n    -0.14 \n    -0.13 \n    -0.22 \n    -0.13 \n    -0.23 \n    0.1 \n     \n     \n     \n     \n  \n  \n    pt5 \n    -0.09 \n    -0.22 \n    -0.08 \n    -0.09 \n    -0.15 \n    -0.05 \n    -0.14 \n    0.03 \n    -0.01 \n    -0.14 \n    -0.2 \n    -0.01 \n    0.1 \n     \n     \n     \n  \n  \n    pt6 \n    -0.04 \n    -0.26 \n    -0.15 \n    -0.15 \n    -0.23 \n    -0.11 \n    -0.11 \n    0 \n    -0.15 \n    -0.2 \n    -0.11 \n    0.03 \n    0.1 \n    0.36 \n     \n     \n  \n  \n    pt7 \n    -0.08 \n    -0.18 \n    -0.26 \n    -0.2 \n    -0.19 \n    -0.04 \n    -0.07 \n    -0.12 \n    -0.28 \n    -0.16 \n    -0.25 \n    0.19 \n    0.31 \n    -0.05 \n    0.18 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.139, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nVi tar också bort st6, mp5, mp2 och st4 som har residualkorrelationer och sticker ut tematiskt.\n\n\nCode\n# create vector with eliminated items OBS testa att byt till pt7\nremoved_items <- c(\"st7\", \"pt1\", \"pt2\", \"st6\", \"mp5\", \"mp2\", \"st4\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items))"
  },
  {
    "objectID": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-3",
    "href": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-3",
    "title": "13  Psykologisk trygghet, stöd och möjlighet att påverka",
    "section": "13.4 Rasch-analys 3",
    "text": "13.4 Rasch-analys 3\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nmp1\n\n\nJag har de resurser som behövs för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp3\n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp4\n\n\nJag kan påverka beslut som rör mina arbetsuppgifter.\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst3\n\n\nVi samarbetar bra på min arbetsplats.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5\n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\npt6\n\n\nMina ansträngningar värdesätts.\n\n\n\n\npt7\n\n\nMina idéer ges tid och uppmärksamhet.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    mp1 \n    0.774 \n    0.83 \n    -2.367 \n    -1.908 \n  \n  \n    mp3 \n    0.8 \n    0.788 \n    -2.042 \n    -2.378 \n  \n  \n    mp4 \n    1.245 \n    1.226 \n    2.369 \n    2.242 \n  \n  \n    st1 \n    1.109 \n    1.038 \n    0.964 \n    0.43 \n  \n  \n    st2 \n    1.059 \n    1.051 \n    0.607 \n    0.664 \n  \n  \n    st3 \n    0.82 \n    0.798 \n    -1.909 \n    -2.116 \n  \n  \n    st5 \n    1.088 \n    0.999 \n    0.909 \n    -0.197 \n  \n  \n    pt3 \n    0.812 \n    0.812 \n    -2.341 \n    -1.949 \n  \n  \n    pt4 \n    0.915 \n    0.933 \n    -0.783 \n    -0.809 \n  \n  \n    pt5 \n    0.802 \n    0.826 \n    -1.99 \n    -1.898 \n  \n  \n    pt6 \n    0.787 \n    0.793 \n    -2.349 \n    -2.359 \n  \n  \n    pt7 \n    1.063 \n    1.028 \n    0.773 \n    0.262 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.99 \n  \n  \n    1.70 \n  \n  \n    1.34 \n  \n  \n    1.21 \n  \n  \n    1.05 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    mp1 \n    mp3 \n    mp4 \n    st1 \n    st2 \n    st3 \n    st5 \n    pt3 \n    pt4 \n    pt5 \n    pt6 \n    pt7 \n  \n \n\n  \n    mp1 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp3 \n    -0.06 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp4 \n    -0.2 \n    0.17 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st1 \n    0.05 \n    -0.18 \n    -0.14 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    0.23 \n    -0.13 \n    -0.07 \n    0.03 \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st3 \n    -0.08 \n    0.1 \n    -0.1 \n    -0.14 \n    -0.19 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st5 \n    -0.09 \n    0.1 \n    -0.07 \n    -0.1 \n    -0.2 \n    0.15 \n     \n     \n     \n     \n     \n     \n  \n  \n    pt3 \n    -0.02 \n    -0.09 \n    -0.16 \n    -0.04 \n    -0.13 \n    -0.1 \n    -0.14 \n     \n     \n     \n     \n     \n  \n  \n    pt4 \n    -0.3 \n    -0.09 \n    0 \n    -0.18 \n    -0.25 \n    -0.16 \n    -0.13 \n    0.02 \n     \n     \n     \n     \n  \n  \n    pt5 \n    -0.16 \n    -0.07 \n    -0.08 \n    -0.12 \n    -0.23 \n    0.02 \n    -0.12 \n    -0.09 \n    0.02 \n     \n     \n     \n  \n  \n    pt6 \n    -0.11 \n    -0.15 \n    -0.16 \n    -0.21 \n    -0.22 \n    -0.01 \n    -0.19 \n    -0.06 \n    0.01 \n    0.31 \n     \n     \n  \n  \n    pt7 \n    -0.17 \n    -0.27 \n    -0.21 \n    -0.14 \n    -0.18 \n    -0.16 \n    -0.17 \n    0.1 \n    0.24 \n    -0.15 \n    0.09 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.119, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nVi tar också bort pt7, mp1 och st3 som har höga residualkorrelationer.\n\n\nCode\n# create vector with eliminated items OBS testa att byt till pt7\nremoved_items <- c(\"st7\", \"pt1\", \"pt2\", \"st6\", \"mp5\", \"mp2\", \"st4\", \"pt7\", \"mp1\", \"st3\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items))"
  },
  {
    "objectID": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-4",
    "href": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-4",
    "title": "13  Psykologisk trygghet, stöd och möjlighet att påverka",
    "section": "13.5 Rasch-analys 4",
    "text": "13.5 Rasch-analys 4\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nmp3\n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp4\n\n\nJag kan påverka beslut som rör mina arbetsuppgifter.\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5\n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\npt6\n\n\nMina ansträngningar värdesätts.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    mp3 \n    0.764 \n    0.741 \n    -2.448 \n    -2.991 \n  \n  \n    mp4 \n    1.129 \n    1.128 \n    1.338 \n    1.218 \n  \n  \n    st1 \n    1.027 \n    0.987 \n    0.399 \n    -0.192 \n  \n  \n    st2 \n    1.034 \n    1.014 \n    0.301 \n    0.152 \n  \n  \n    st5 \n    1.029 \n    0.975 \n    0.449 \n    -0.22 \n  \n  \n    pt3 \n    0.811 \n    0.81 \n    -2.094 \n    -2.219 \n  \n  \n    pt4 \n    0.92 \n    0.905 \n    -1.002 \n    -0.932 \n  \n  \n    pt5 \n    0.766 \n    0.773 \n    -2.572 \n    -2.377 \n  \n  \n    pt6 \n    0.792 \n    0.79 \n    -2.293 \n    -2.424 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.73 \n  \n  \n    1.51 \n  \n  \n    1.16 \n  \n  \n    1.15 \n  \n  \n    1.01 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    mp3 \n    mp4 \n    st1 \n    st2 \n    st5 \n    pt3 \n    pt4 \n    pt5 \n    pt6 \n  \n \n\n  \n    mp3 \n     \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp4 \n    0.12 \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st1 \n    -0.21 \n    -0.2 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    -0.15 \n    -0.13 \n    0.01 \n     \n     \n     \n     \n     \n     \n  \n  \n    st5 \n    0.08 \n    -0.12 \n    -0.12 \n    -0.21 \n     \n     \n     \n     \n     \n  \n  \n    pt3 \n    -0.09 \n    -0.2 \n    -0.04 \n    -0.12 \n    -0.13 \n     \n     \n     \n     \n  \n  \n    pt4 \n    -0.12 \n    -0.05 \n    -0.2 \n    -0.26 \n    -0.14 \n    0.03 \n     \n     \n     \n  \n  \n    pt5 \n    -0.1 \n    -0.15 \n    -0.15 \n    -0.26 \n    -0.14 \n    -0.09 \n    0 \n     \n     \n  \n  \n    pt6 \n    -0.15 \n    -0.2 \n    -0.21 \n    -0.21 \n    -0.18 \n    -0.04 \n    0.01 \n    0.3 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.094, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nVi tar även bort pt6 som har en hög residualkorrelation med pt5.\n\n\nCode\n# create vector with eliminated items OBS testa att byt till pt7\nremoved_items <- c(\"st7\", \"pt1\", \"pt2\", \"st6\", \"mp5\", \"mp2\", \"st4\", \"pt7\", \"mp1\", \"st3\", \"pt6\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items))"
  },
  {
    "objectID": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-5",
    "href": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-5",
    "title": "13  Psykologisk trygghet, stöd och möjlighet att påverka",
    "section": "13.6 Rasch-analys 5",
    "text": "13.6 Rasch-analys 5\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nmp3\n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nmp4\n\n\nJag kan påverka beslut som rör mina arbetsuppgifter.\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5\n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    mp3 \n    0.718 \n    0.706 \n    -3.23 \n    -3.512 \n  \n  \n    mp4 \n    1.073 \n    1.083 \n    0.898 \n    0.819 \n  \n  \n    st1 \n    0.957 \n    0.933 \n    -0.539 \n    -0.888 \n  \n  \n    st2 \n    0.954 \n    0.95 \n    -0.423 \n    -0.597 \n  \n  \n    st5 \n    0.971 \n    0.927 \n    -0.14 \n    -0.676 \n  \n  \n    pt3 \n    0.796 \n    0.795 \n    -2.469 \n    -2.29 \n  \n  \n    pt4 \n    0.945 \n    0.902 \n    -0.445 \n    -0.998 \n  \n  \n    pt5 \n    0.849 \n    0.824 \n    -1.733 \n    -1.85 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.55 \n  \n  \n    1.42 \n  \n  \n    1.19 \n  \n  \n    1.04 \n  \n  \n    1.02 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    mp3 \n    mp4 \n    st1 \n    st2 \n    st5 \n    pt3 \n    pt4 \n    pt5 \n  \n \n\n  \n    mp3 \n     \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    mp4 \n    0.1 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st1 \n    -0.25 \n    -0.24 \n     \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    -0.18 \n    -0.16 \n    -0.02 \n     \n     \n     \n     \n     \n  \n  \n    st5 \n    0.06 \n    -0.15 \n    -0.15 \n    -0.25 \n     \n     \n     \n     \n  \n  \n    pt3 \n    -0.1 \n    -0.22 \n    -0.05 \n    -0.13 \n    -0.14 \n     \n     \n     \n  \n  \n    pt4 \n    -0.12 \n    -0.06 \n    -0.21 \n    -0.27 \n    -0.15 \n    0.04 \n     \n     \n  \n  \n    pt5 \n    -0.07 \n    -0.13 \n    -0.12 \n    -0.23 \n    -0.12 \n    -0.05 \n    0.04 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.081, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nDet ser generellt bra ut. mp3 och mp4 har en något hög residualkorrelation, men eftersom denna ligger strax över tröskelvärdet är det oklart om ytterligare en item-exkludering är motiverad. Till att börja med går vi vidare och undersöker hur DIF och reliabilitet ser ut när mp3 och mp4 inkluderas.\n\n13.6.0.1 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n\n\n\n\n\n\n\n\nItem\n\n\n2\n\n\n3\n\n\nMean location\n\n\nStDev\n\n\nMaxDiff\n\n\n\n\n\n\nmp3\n\n\n-0.302\n\n\n-0.121\n\n\n-0.211\n\n\n0.128\n\n\n0.182\n\n\n\n\nmp4\n\n\n-0.324\n\n\n0.115\n\n\n-0.105\n\n\n0.310\n\n\n0.439\n\n\n\n\nst1\n\n\n0.154\n\n\n0.292\n\n\n0.223\n\n\n0.098\n\n\n0.138\n\n\n\n\nst2\n\n\n0.324\n\n\n0.324\n\n\n0.324\n\n\n0.000\n\n\n0.000\n\n\n\n\nst5\n\n\n-0.113\n\n\n-0.019\n\n\n-0.066\n\n\n0.067\n\n\n0.095\n\n\n\n\npt3\n\n\n0.351\n\n\n0.164\n\n\n0.257\n\n\n0.133\n\n\n0.187\n\n\n\n\npt4\n\n\n0.041\n\n\n-0.320\n\n\n-0.139\n\n\n0.255\n\n\n0.361\n\n\n\n\npt5\n\n\n-0.131\n\n\n-0.435\n\n\n-0.283\n\n\n0.215\n\n\n0.304\n\n\n\n\n\n\n\n\n\n\nDet finns en signifikant och hyfsat substatiell DIF för hemarbete (mp4). Vi går vidare och undersöker reliabiliteten.\n\n\n13.6.0.2 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nReliabiliteten ser mycket bra ut. Dock har mp4 både en substantiell DIF-effekt samt en något hög residualkorrelation med mp3. Vi testar därför att exkludera mp4.\n\n\nCode\n# create vector with eliminated items OBS testa att byt till pt7\nremoved_items <- c(\"st6\", \"st7\", \"mp5\", \"mp2\", \"st4\", \"pt7\", \"pt1\", \"pt6\", \"pt2\", \"st3\", \"mp1\", \"mp4\")\n\n# select all items except those removed\ndf2 <- df.omit.na %>%\n  select(!all_of(removed_items))"
  },
  {
    "objectID": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-6",
    "href": "11_psyktry_std_mp/11_psyktry_std_mp.html#rasch-analys-6",
    "title": "13  Psykologisk trygghet, stöd och möjlighet att påverka",
    "section": "13.7 Rasch-analys 6",
    "text": "13.7 Rasch-analys 6\n\n\n\n\n\n\n\n\nitemnr\n\n\nitem\n\n\n\n\n\n\nmp3\n\n\nJag har tillräckligt med befogenheter för att kunna utföra mina arbetsuppgifter.\n\n\n\n\nst1\n\n\nJag vet vem jag ska vända mig till för att få stöd och hjälp med att utföra arbetet.\n\n\n\n\nst2\n\n\nDet finns personer på mitt arbete som jag kan prata förtroligt med.\n\n\n\n\nst5\n\n\nMina kollegor visar uppskattning för mina arbetsinsatser.\n\n\n\n\npt3\n\n\nJag kan begå misstag utan att det hålls emot mig.\n\n\n\n\npt4\n\n\nJag kan öppet diskutera olika typer av svårigheter.\n\n\n\n\npt5\n\n\nJag blir inkluderad även om jag tycker annorlunda.\n\n\n\n\n\n\n\nItem fitPCAResidual correlations1st contrast loadingsTargetingItem hierarchy\n\n\n\n\nCode\nRIitemfitPCM2(df2, samplesize = 250, nsamples = 32, cpu = 8)\n\n\n\n\n \n  \n      \n    OutfitMSQ \n    InfitMSQ \n    OutfitZSTD \n    InfitZSTD \n  \n \n\n  \n    mp3 \n    0.779 \n    0.762 \n    -2.362 \n    -2.683 \n  \n  \n    st1 \n    0.943 \n    0.918 \n    -0.637 \n    -0.953 \n  \n  \n    st2 \n    0.962 \n    0.954 \n    -0.401 \n    -0.447 \n  \n  \n    st5 \n    0.984 \n    0.938 \n    -0.161 \n    -0.609 \n  \n  \n    pt3 \n    0.775 \n    0.782 \n    -2.524 \n    -2.582 \n  \n  \n    pt4 \n    0.963 \n    0.93 \n    -0.43 \n    -0.717 \n  \n  \n    pt5 \n    0.849 \n    0.838 \n    -1.581 \n    -1.813 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIpcmPCA(na.omit(df2))\n\n\n\nPCA of Rasch model residuals\n \n  \n    Eigenvalues \n  \n \n\n  \n    1.52 \n  \n  \n    1.36 \n  \n  \n    1.13 \n  \n  \n    1.08 \n  \n  \n    0.96 \n  \n\n\n\n\n\n\n\n\n\nCode\nRIresidcorr(df2, cutoff = 0.2)\n\n\n\n\n \n  \n      \n    mp3 \n    st1 \n    st2 \n    st5 \n    pt3 \n    pt4 \n    pt5 \n  \n \n\n  \n    mp3 \n     \n     \n     \n     \n     \n     \n     \n  \n  \n    st1 \n    -0.25 \n     \n     \n     \n     \n     \n     \n  \n  \n    st2 \n    -0.17 \n    -0.06 \n     \n     \n     \n     \n     \n  \n  \n    st5 \n    0.06 \n    -0.19 \n    -0.28 \n     \n     \n     \n     \n  \n  \n    pt3 \n    -0.11 \n    -0.1 \n    -0.17 \n    -0.18 \n     \n     \n     \n  \n  \n    pt4 \n    -0.11 \n    -0.24 \n    -0.28 \n    -0.16 \n    0.02 \n     \n     \n  \n  \n    pt5 \n    -0.07 \n    -0.16 \n    -0.25 \n    -0.14 \n    -0.08 \n    0.03 \n     \n  \n\n\nNote: \n\n Relative cut-off value (highlighted in red) is 0.062, which is 0.2 above the average correlation.\n\n\n\n\n\n\n\n\n\nCode\nRIloadLoc(df2)\n\n\n\n\n\n\n\n\n\nCode\n# increase fig-height above as needed, if you have many items\nRItargeting(df2)\n\n\n\n\n\n\n\n\n\nCode\nRIitemHierarchy(df2)\n\n\n\n\n\n\n\n\nAnalysernas utfall ser bra ut - det finns inte längre någon residualkorrelation över det rekommenderade tröskelvärdet. Vi går vidare och undersöker DIF och reliabilitet utan mp4.\n\n13.7.0.1 DIF-analysis\nEn DIF-analys bör inte inkludera svarskategorier med för få svar. Därför har svarskategorier med färre än 50 svar antingen exkluderas eller slagits ihop med andra svarskategorier (se avsnittet om bakgrundsdata för exakt antal svar per ordinarie kategori). DIF-variablerna omkodades till att innehålla följande kategorier:\n\nKön: man, kvinna\nÅlder: 30-39, 40-49, 50-59, 60+\nBransch: kontorsarbete, ej kontorsarbete\nHemarbete: aldrig eller sällan, en dag, minst två dagar\n\nKoden nedan specificerar exakt hur omkodningen gick till.\n\n\nCode\n# Omkodning för kön\ndif.kön <- recode(dif.kön,\"'Annat'=NA;'Vill ej uppge'=NA\")\n\n# Omkodning för ålder\ndif.ålder <- recode(dif.ålder,\"'18-29'=NA\")\n\n# Omkodning för bransch\ndif.bransch <- recode(dif.bransch,\"'Industri'='Ej kontorsarbete';'Hotell, restaurang, service'='Ej kontorsarbete';'Handel'='Ej kontorsarbete';'Skola, utbildning'='Ej kontorsarbete';'Vård, omsorg'='Ej kontorsarbete';'Byggverksamhet'='Ej kontorsarbete';'Annat'='Ej kontorsarbete'\")\n\n#Omkodning för hemarbete\ndif.hemarbete <- recode(dif.hemarbete,\"'Fem dagar'='Minst två dagar';'Fyra dagar'='Minst två dagar';'Tre dagar'='Minst två dagar';'Två dagar'='Minst två dagar'\")\n\n\n\nGenderAgeBranschHemarbete\n\n\n\n\nCode\nRIdifTable(df2, dif.kön)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.ålder)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.bransch)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\n\nCode\nRIdifTable(df2, dif.hemarbete)\n\n\n[1] \"No significant DIF found.\"\n\n\n\n\n\nDet finns inte längre några signifikanta DIF-effekter. Vi går vidare och undersöker reliabiliteten.\n\n\n13.7.0.2 Reliability\n\n\nCode\nRItif(df2, lo = -5, hi = 5)\n\n\n\n\n\nReliabiliteten ser bra ut även utan mp4 (en marginell minsking). Vi går vidare och tar fram item-parametrar och en konverteringstabell.\n\n\n13.7.1 Item-parametrar\n\n\nCode\nRIitemparams(df2)\n\n\n\n\n \n  \n      \n    Threshold 1 \n    Threshold 2 \n    Threshold 3 \n    Threshold 4 \n    Threshold 5 \n    Item location \n  \n \n\n  \n    mp3 \n    -1.08 \n    -0.40 \n    0.35 \n    1.95 \n    NA \n    0.2 \n  \n  \n    st1 \n    -0.35 \n    0.04 \n    0.97 \n    1.96 \n    NA \n    0.65 \n  \n  \n    st2 \n    -0.59 \n    0.36 \n    0.61 \n    1.19 \n    2.24 \n    0.76 \n  \n  \n    st5 \n    -0.70 \n    0.02 \n    0.32 \n    1.79 \n    NA \n    0.36 \n  \n  \n    pt3 \n    -0.82 \n    -0.20 \n    0.75 \n    3.09 \n    NA \n    0.71 \n  \n  \n    pt4 \n    -1.19 \n    -0.30 \n    0.41 \n    2.49 \n    NA \n    0.35 \n  \n  \n    pt5 \n    -0.71 \n    -0.71 \n    0.15 \n    1.94 \n    NA \n    0.17 \n  \n\n\n\n\n\n\n13.7.1.1 Ordinal -> interval\n\n\nCode\nRIscoreSE(df2, width = 50)\n\n\n\n\n \n  \n    Ordinal sum score \n    Logit score \n    Logit std.error \n  \n \n\n  \n    0 \n    -3.451 \n    1.408 \n  \n  \n    1 \n    -2.365 \n    0.818 \n  \n  \n    2 \n    -1.860 \n    0.640 \n  \n  \n    3 \n    -1.523 \n    0.549 \n  \n  \n    4 \n    -1.264 \n    0.494 \n  \n  \n    5 \n    -1.050 \n    0.456 \n  \n  \n    6 \n    -0.864 \n    0.429 \n  \n  \n    7 \n    -0.696 \n    0.410 \n  \n  \n    8 \n    -0.542 \n    0.396 \n  \n  \n    9 \n    -0.396 \n    0.386 \n  \n  \n    10 \n    -0.257 \n    0.378 \n  \n  \n    11 \n    -0.122 \n    0.374 \n  \n  \n    12 \n    0.011 \n    0.371 \n  \n  \n    13 \n    0.143 \n    0.370 \n  \n  \n    14 \n    0.275 \n    0.372 \n  \n  \n    15 \n    0.409 \n    0.375 \n  \n  \n    16 \n    0.546 \n    0.380 \n  \n  \n    17 \n    0.688 \n    0.387 \n  \n  \n    18 \n    0.837 \n    0.396 \n  \n  \n    19 \n    0.995 \n    0.408 \n  \n  \n    20 \n    1.164 \n    0.424 \n  \n  \n    21 \n    1.348 \n    0.442 \n  \n  \n    22 \n    1.551 \n    0.465 \n  \n  \n    23 \n    1.777 \n    0.493 \n  \n  \n    24 \n    2.035 \n    0.528 \n  \n  \n    25 \n    2.333 \n    0.573 \n  \n  \n    26 \n    2.690 \n    0.636 \n  \n  \n    27 \n    3.139 \n    0.733 \n  \n  \n    28 \n    3.772 \n    0.917 \n  \n  \n    29 \n    4.000 \n    1.002 \n  \n\n\n\n\n\n\n\n\n13.7.2 Estimering av mätvärden\n\n\nCode\ndf2$score <- RIestThetas(df2)\nwrite.csv(df2, \"scored.csv\")"
  },
  {
    "objectID": "visualisering/osaviz.html#prevent-tema",
    "href": "visualisering/osaviz.html#prevent-tema",
    "title": "14  Förslag på visualisering och återkoppling av OSA-enkäten",
    "section": "14.1 Prevent tema",
    "text": "14.1 Prevent tema\nKulörer, typsnitt osv - definierar återkommande layout-inställningar för figurer.\n\n\nCode\nprevent_green <- \"#008332\"\nprevent_light_green <- \"#76A100\"\nprevent_dark_blue <- \"#003E6E\"\nprevent_blue <- \"#005F89\"\nprevent_light_blue <- \"#4398BA\"\nprevent_yellow <- \"#FBB900\"\nprevent_red <- \"#BE5014\"\nprevent_gray_red <- \"#6C5861\"\nprevent_light_gray <- \"#F0F0F0\"\nprevent_gray <- \"#d3d3d3\"\nprevent_dark_gray <- \"#3B3B3B\"\nprevent_turquoise <- \"#009a9d\"\nprevent_green_comp <- \"#D9ECE0\"\nprevent_light_green_comp <- \"#DCE7BF\"\nprevent_dark_blue_comp <- \"#BFCEDA\"\nprevent_blue_comp <- \"#BFD7E1\"\nprevent_light_blue_comp <- \"#D0E5EE\"\nprevent_yellow_comp <- \"#FEEDBF\"\nprevent_red_comp <- \"#EFD3C4\"\nprevent_green_contrast <- \"#006632\"\nprevent_blue_contrast <- \"#003E6E\"\nprevent_yellow_contrast <- \"#FBD128\"\nprevent_red_contrast <- \"#B01200\"\nprevent_gray_red_contrast <- \"#68534E\"\n\n# manual palette creation, 7 colors\nPREVENTpalette1 <- c(\"#6C5861\", \"#005F89\", \"#4398BA\", \"#76A100\", \"#008332\", \"#FBB900\", \"#FBD128\")\n\n# create palette with 12 colors based on Prevent colors above\nPREVENTpalette2 <- colorRampPalette(colors = c(\"#6C5861\", \"#005F89\", \"#4398BA\", \"#76A100\", \"#008332\", \"#FBB900\", \"#FBD128\"))(12)\n# scales::show_col(PREVENTpalette2)\n\n\n\n\nCode\ntheme_prevent <- function(fontfamily = \"flama\", axisTitleSize = 13, titlesize = 15,\n                          margins = 12, axisface = \"plain\", stripsize = 12,\n                          panelDist = 0.6, legendSize = 9, legendTsize = 10,\n                          axisTextSize = 10, ...) {\n  theme(\n    text = element_text(family = fontfamily),\n    axis.title.x = element_text(\n      margin = margin(t = margins),\n      size = axisTitleSize\n    ),\n    axis.title.y = element_text(\n      margin = margin(r = margins),\n      size = axisTitleSize\n    ),\n    plot.title = element_text(\n      #family = \"flama\",\n      face = \"bold\",\n      size = titlesize\n    ),\n    axis.title = element_text(\n      face = axisface\n    ),\n    axis.text = element_text(size = axisTextSize),\n    plot.caption = element_text(\n      face = \"italic\"\n    ),\n    legend.text = element_text(family = fontfamily, size = legendSize),\n    legend.title = element_text(family = fontfamily, size = legendTsize),\n    strip.text = element_text(size = stripsize),\n    panel.spacing = unit(panelDist, \"cm\", data = NULL),\n    legend.background = element_rect(color = \"lightgrey\"),\n    ...\n  )\n}\n\n# these rows are for specific geoms, such as geom_text() and geom_text_repel(), to match font family. Add as needed\n#    update_geom_defaults(\"text\", list(family = fontfamily)) +\n#    update_geom_defaults(\"text_repel\", list(family = fontfamily)) +\n#    update_geom_defaults(\"textpath\", list(family = fontfamily)) +\n#    update_geom_defaults(\"texthline\", list(family = fontfamily))"
  },
  {
    "objectID": "visualisering/osaviz.html#gruppnivå",
    "href": "visualisering/osaviz.html#gruppnivå",
    "title": "14  Förslag på visualisering och återkoppling av OSA-enkäten",
    "section": "14.2 Gruppnivå",
    "text": "14.2 Gruppnivå\nNedanstående kod skapar underlag för figurerna, med sampelstorlek 7, 20 och 40.\n\n\nCode\n# create vector with possible values, which needs to be connected to the transformation table\n# ordinal -> interval\n# \"score\" is interval level\npossible <- df.scored %>% # maybe rewrite this to just make the dataframe below\n  distinct(score) %>%\n  arrange(score) %>%\n  pull(score)\n\n# make a dataframe with possible values and a count variable (n) with missing data\ndf.possible <- possible %>%\n  as.data.frame(nm = \"score\") %>%\n  add_column(n = NA)\n\nsampleSmall <- 7\nsampleMed <- 20\nsampleLarge <- 40\nset.seed(1337)\n\n\n\n\nCode\n# pick random sample to use for visualization example\ndf.test7 <- df.scored %>%\n  slice_sample(n = sampleSmall) %>%\n  add_column(group = \"Mättillfälle 1\")\n\n# get another sample for examples comparing two measurements\ndf.test7b <- df.scored %>%\n  slice_sample(n = sampleSmall) %>%\n  add_column(group = \"Mättillfälle 2\")\n\n# combine data\ndf.compare7 <- rbind(df.test7, df.test7b)\n\n###\n# pick random sample to use for visualization example\ndf.test20 <- df.scored %>%\n  slice_sample(n = sampleMed) %>%\n  add_column(group = \"Mättillfälle 1\")\n\n# get another sample for examples comparing two measurements\ndf.test20b <- df.scored %>%\n  slice_sample(n = sampleMed) %>%\n  add_column(group = \"Mättillfälle 2\")\n\n# combine data\ndf.compare20 <- rbind(df.test20, df.test20b)\n\n###\n# pick random sample to use for visualization example\ndf.test40 <- df.scored %>%\n  slice_sample(n = sampleLarge) %>%\n  add_column(group = \"Mättillfälle 1\")\n\n# get another sample for examples comparing two measurements\ndf.test40b <- df.scored %>%\n  slice_sample(n = sampleLarge) %>%\n  add_column(group = \"Mättillfälle 2\")\n\n# combine data\ndf.compare40 <- rbind(df.test40, df.test40b)\n\n\n\n\nCode\n# create a dataframe with frequency counts of estimated scores, to use for size/color\ndf.counts7 <- df.test7 %>%\n  count(score) %>%\n  right_join(df.possible, # fill in with all scores possible\n    by = \"score\"\n  ) %>%\n  arrange(score) %>%\n  select(!n.y) %>%\n  rename(n = n.x) %>% \n  mutate(N = case_when( # change missing to 1 and multiply other frequencies by 2\n    is.na(n) ~ 1,\n    TRUE ~ n * 2\n  )) %>%\n  mutate(nFactor = factor(n)) # make a categorical variable with counts\n\n# calculate 90% confidence interval for the test sample\nsmallSample90ci <- sd(df.test7$score) / (sqrt(length(df.test7$score))) * 1.65\nsmallSample90ci2 <- sd(df.test7b$score) / (sqrt(length(df.test7b$score))) * 1.65\n\n#####\n# create a dataframe with frequency counts of estimated scores, to use for size/color\ndf.counts20 <- df.test20 %>%\n  count(score) %>%\n  right_join(df.possible, # fill in with all scores possible\n    by = \"score\"\n  ) %>%\n  arrange(score) %>%\n  select(!n.y) %>%\n  rename(n = n.x) %>% \n  mutate(N = case_when( # change missing to 1 and multiply other frequencies by 2\n    is.na(n) ~ 1,\n    TRUE ~ n * 2\n  )) %>%\n  mutate(nFactor = factor(n)) # make a categorical variable with counts\n\n# calculate 90% confidence interval for the test sample\nmedSample90ci <- sd(df.test20$score) / (sqrt(length(df.test20$score))) * 1.65\nmedSample90ci2 <- sd(df.test20b$score) / (sqrt(length(df.test20b$score))) * 1.65\n\n#####\n# create a dataframe with frequency counts of estimated scores, to use for size/color\ndf.counts40 <- df.test40 %>%\n  count(score) %>%\n  right_join(df.possible, # fill in with all scores possible\n    by = \"score\"\n  ) %>%\n  arrange(score) %>%\n  select(!n.y) %>%\n  rename(n = n.x) %>% \n  mutate(N = case_when( # change missing to 1 and multiply other frequencies by 2\n    is.na(n) ~ 1,\n    TRUE ~ n * 2\n  )) %>%\n  mutate(nFactor = factor(n)) # make a categorical variable with counts\n\n# calculate 90% confidence interval for the test sample\nlargeSample90ci <- sd(df.test40$score) / (sqrt(length(df.test40$score))) * 1.65\nlargeSample90ci2 <- sd(df.test40b$score) / (sqrt(length(df.test40b$score))) * 1.65\n\n\n\n\nCode\n# for comparison of 2 measurements\ndf.countsComp7 <- df.compare7 %>%\n  group_by(group) %>%\n  count(score) %>%\n  right_join(df.possible, # fill in with all scores possible\n    by = \"score\"\n  ) %>%\n  arrange(score) %>%\n  select(!n.y) %>%\n  rename(n = n.x) %>% \n  mutate(N = case_when( # change missing to 1 and multiply other frequencies by 2\n    is.na(n) ~ 1,\n    TRUE ~ n * 2\n  )) %>%\n  mutate(nFactor = factor(n)) # make a categorical variable with counts\n\n# for comparison of 2 measurements\ndf.countsComp20 <- df.compare20 %>%\n  group_by(group) %>%\n  count(score) %>%\n  right_join(df.possible, # fill in with all scores possible\n    by = \"score\"\n  ) %>%\n  arrange(score) %>%\n  select(!n.y) %>%\n  rename(n = n.x) %>% \n  mutate(N = case_when( # change missing to 1 and multiply other frequencies by 2\n    is.na(n) ~ 1,\n    TRUE ~ n * 2\n  )) %>%\n  mutate(nFactor = factor(n)) # make a categorical variable with counts\n\n# for comparison of 2 measurements\ndf.countsComp40 <- df.compare40 %>%\n  group_by(group) %>%\n  count(score) %>%\n  right_join(df.possible, # fill in with all scores possible\n    by = \"score\"\n  ) %>%\n  arrange(score) %>%\n  select(!n.y) %>%\n  rename(n = n.x) %>% \n  mutate(N = case_when( # change missing to 1 and multiply other frequencies by 2\n    is.na(n) ~ 1,\n    TRUE ~ n * 2\n  )) %>%\n  mutate(nFactor = factor(n)) # make a categorical variable with counts"
  },
  {
    "objectID": "visualisering/osaviz.html#sec-vizScores",
    "href": "visualisering/osaviz.html#sec-vizScores",
    "title": "14  Förslag på visualisering och återkoppling av OSA-enkäten",
    "section": "14.3 Visualisering av ett område/index",
    "text": "14.3 Visualisering av ett område/index\nVi kommer antagligen att vilja ta fram en vy som ger en överblick, där resultat på samtliga områden visas under varandra. Som ett första steg tar vi fram förslag på hur ett enskild index kan visas, och i nästa steg hur vi visualiserar svaren på de frågor/items som ingår i ett index, eller på frågor som inte kan bilda ett index.\n\n14.3.1 Förslag 1\nDetta ser kanske något suboptimalt ut när det bara är ett index (eller en grupp/mätning) som visualiseras.\nTanken är att det ska synas (diskret) vilka möjliga mätvärden som finns, för att ge referenspunkter utan att ha värden på x-axeln. Detta blir mera pedagogiskt kanske om det skulle finnas en indikation på medel/SD för någon referensgrupp.\nFärgade prickar indikerar svarsfördelningen, där både storlek och färg påverkas av antalet individer som har samma mätvärde.\n“Diamanten” visar medelvärdet (eftersom detta är mätvärden på intervallnivå), och de horisontala strecken visar 90% konfidensintervall. Detta eftersom det ger ett seriöst sätt att göra jämförelser. Om man har två mätningar och deras 90%CI inte överlappar är det en signifikant skillnad.\n\n\n20740\n\n\n\n\nCode\n# testing a plot of \"empty\" circles, filled with color gradient based on density/frequency of response\nggplot() +\n  # plot possible values as hollow circles\n  geom_point(\n    data = df.counts20,\n    aes(x = score, y = 1),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  # plot actual scores in data sample as filled circles, with gradient based on frequency(?)\n  geom_point(\n    data = na.omit(df.counts20), # remove missing data to remove NA from legend\n    aes(x = score, y = 1, size = n * 1.5, color = nFactor),\n    # size = 3,\n    shape = 16\n  ) +\n  ### plot 95% confidence interval around the mean\n  # segment makes a line\n  # geom_segment(data = df.test,\n  #               aes(x = mean(score) - sample90ci,\n  #                   xend = mean(score) + sample90ci,\n  #                   y = 0.95, yend = 0.95),\n  #              color = \"darkgrey\"\n  #            ) +\n  # errorbar has brackets at the endpoints\n  # geom_errorbar(\n  #   data = df.test,\n  #   aes(\n  #     xmin = mean(score) - sample90ci,\n  #     xmax = mean(score) + sample90ci,\n  #     y = 0.95,\n  #     width = 0.025\n  #   ),\n  #   color = \"darkgrey\"\n  # ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.test20,\n    aes(x = mean(score), y = 0.95),\n    size = 7,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(0.8, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 1\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde.\\nTomma ringar indikerar möjliga mätvärden.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank()\n  ) +\n  scale_y_continuous(minor_breaks = NULL) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\n# testing a plot of \"empty\" circles, filled with color gradient based on density/frequency of response\nggplot() +\n  # plot possible values as hollow circles\n  geom_point(\n    data = df.counts7,\n    aes(x = score, y = 1),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  # plot actual scores in data sample as filled circles, with gradient based on frequency(?)\n  geom_point(\n    data = na.omit(df.counts7), # remove missing data to remove NA from legend\n    aes(x = score, y = 1, size = n * 1.5, color = nFactor),\n    # size = 3,\n    shape = 16\n  ) +\n  ### plot 95% confidence interval around the mean\n  # segment makes a line\n  # geom_segment(data = df.test,\n  #               aes(x = mean(score) - sample90ci,\n  #                   xend = mean(score) + sample90ci,\n  #                   y = 0.95, yend = 0.95),\n  #              color = \"darkgrey\"\n  #            ) +\n  # errorbar has brackets at the endpoints\n  # geom_errorbar(\n  #   data = df.test,\n  #   aes(\n  #     xmin = mean(score) - sample90ci,\n  #     xmax = mean(score) + sample90ci,\n  #     y = 0.95,\n  #     width = 0.025\n  #   ),\n  #   color = \"darkgrey\"\n  # ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.test7,\n    aes(x = mean(score), y = 0.95),\n    size = 7,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(0.8, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 1\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank()\n  ) +\n  scale_y_continuous(minor_breaks = NULL) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\n# testing a plot of \"empty\" circles, filled with color gradient based on density/frequency of response\nggplot() +\n  # plot possible values as hollow circles\n  geom_point(\n    data = df.counts40,\n    aes(x = score, y = 1),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  # plot actual scores in data sample as filled circles, with gradient based on frequency(?)\n  geom_point(\n    data = na.omit(df.counts40), # remove missing data to remove NA from legend\n    aes(x = score, y = 1, size = n * 1.5, color = nFactor),\n    # size = 3,\n    shape = 16\n  ) +\n  ### plot 95% confidence interval around the mean\n  # segment makes a line\n  # geom_segment(data = df.test,\n  #               aes(x = mean(score) - sample90ci,\n  #                   xend = mean(score) + sample90ci,\n  #                   y = 0.95, yend = 0.95),\n  #              color = \"darkgrey\"\n  #            ) +\n  # errorbar has brackets at the endpoints\n  # geom_errorbar(\n  #   data = df.test,\n  #   aes(\n  #     xmin = mean(score) - sample90ci,\n  #     xmax = mean(score) + sample90ci,\n  #     y = 0.95,\n  #     width = 0.025\n  #   ),\n  #   color = \"darkgrey\"\n  # ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.test40,\n    aes(x = mean(score), y = 0.95),\n    size = 7,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(0.8, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 1\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank()\n  ) +\n  scale_y_continuous(minor_breaks = NULL) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\n\n\n14.3.2 Förslag 2\nDetta ser kanske något suboptimalt ut när det bara är ett index (eller en grupp/mätning) som visualiseras.\nEn möjlighet med stat_dots är att lägga till ett lager som visar en jämförande mätning med dotplot som går nedåt (spegelvänt runt samma linje), i en annan kulör.\n\n\n2020 med CI740\n\n\n\n\nCode\nggplot(\n  df.test20,\n  aes(x = score, y = 0)\n) +\n  geom_point(\n    data = df.counts20,\n    aes(x = score, y = -0.02, fill = NULL),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  stat_dots(\n    side = \"top\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    color = \"white\",\n    alpha = 1,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    fill = prevent_light_green,\n    dotsize = 2\n  ) +\n  # plot mean\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(-0.1, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  labs(\n    title = \"Förslag 2\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart punkt indikerar medelvärde. Tomma cirklar indikerar möjliga mätvärden.\",\n    y = \"\",\n    x = \"\"\n  ) +\n    annotate(\"text\", x = 2.7, y = -0.13, label = \"Högsta möjliga värde\",\n           color = \"darkgrey\") +\n  geom_curve(x = 3.5, y = -0.14,\n           xend = 4, yend = -0.03,\n           color = \"darkgrey\",\n           #curvature = -0.4,\n           arrow = arrow()\n           ) +\n  annotate(\"text\", x = -2.3, y = -0.13, label = \"Lägsta möjliga värde\",\n           color = \"darkgrey\") +\n  geom_curve(x = -2.8, y = -0.1,\n           xend = -2.27, yend = -0.02, # xend = lägsta värdet i `df.counts20`\n           color = \"darkgrey\",\n           curvature = -0.4,\n           arrow = arrow()\n           ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nggplot(\n  df.test20,\n  aes(x = score, y = 0) # y is arbitrary to just have a baseline when only visualizing one domain/index\n) +\n  # plot possible response values as empty circles\n  geom_point(\n    data = df.counts20,\n    aes(x = score, y = -0.02, fill = NULL),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  # plot distribution of actual response values\n  stat_dots(\n    side = \"top\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    color = \"white\",\n    alpha = 1,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    fill = prevent_light_green,\n    dotsize = 2\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    aes(\n      xmin = mean(score) - medSample90ci,\n      xmax = mean(score) + medSample90ci,\n      y = 0,\n      width = 0.025\n    ),\n    color = \"black\"\n  ) +\n  # plot mean\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(-0.1, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  labs(\n    title = \"Förslag 2\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart punkt indikerar medelvärde med 90% konfidensintervall runt. \n    Tomma cirklar indikerar möjliga mätvärden.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  annotate(\"text\", x = 2.7, y = -0.13, label = \"Högsta möjliga värde\",\n           color = \"darkgrey\") +\n  geom_curve(x = 3.5, y = -0.14,\n           xend = 4, yend = -0.03,\n           color = \"darkgrey\",\n           #curvature = -0.4,\n           arrow = arrow()\n           ) +\n  annotate(\"text\", x = -2.3, y = -0.13, label = \"Lägsta möjliga värde\",\n           color = \"darkgrey\") +\n  geom_curve(x = -2.8, y = -0.1,\n           xend = -2.27, yend = -0.02, # xend = lägsta värdet i `df.counts20`\n           color = \"darkgrey\",\n           curvature = -0.4,\n           arrow = arrow()\n           ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nggplot(\n  df.test7,\n  aes(x = score, y = 0)\n) +\n  # stat_slab(\n  #   side = \"right\", show.legend = F,\n  #   scale = 0.6, # defines the height that a slab can reach\n  #   position = position_dodge(width = .6), # distance between elements for dodging\n  #   aes(fill_ramp = after_stat(level), fill = group),\n  #   .width = c(.50, .75, 1)\n  # ) +\n  geom_point(\n    data = df.counts7,\n    aes(x = score, y = -0.02, fill = NULL),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  stat_dots(\n    side = \"top\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    color = \"white\",\n    alpha = 1,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    fill = prevent_light_green,\n    dotsize = 2\n  ) +\n  # errorbar has brackets at the endpoints\n  # geom_errorbar(\n  #   aes(\n  #     xmin = mean(score) - smallSample90ci,\n  #     xmax = mean(score) + smallSample90ci,\n  #     y = 0,\n  #     width = 0.025\n  #   ),\n  #   color = \"black\"\n  # ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(-0.1, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  # scale_color_viridis_d(\n  #   guide = \"none\",\n  #   begin = 0.6,\n  #   aesthetics = c(\"fill\", \"color\"),\n  #   direction = 1\n  # ) +\n  labs(\n    title = \"Förslag 2\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart punkt indikerar medelvärde.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nggplot(\n  df.test40,\n  aes(x = score, y = 0)\n) +\n  # stat_slab(\n  #   side = \"right\", show.legend = F,\n  #   scale = 0.6, # defines the height that a slab can reach\n  #   position = position_dodge(width = .6), # distance between elements for dodging\n  #   aes(fill_ramp = after_stat(level), fill = group),\n  #   .width = c(.50, .75, 1)\n  # ) +\n  geom_point(\n    data = df.counts40,\n    aes(x = score, y = -0.02, fill = NULL),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  stat_dots(\n    side = \"top\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    color = \"white\",\n    alpha = 1,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    fill = prevent_light_green,\n    dotsize = 2\n  ) +\n  # errorbar has brackets at the endpoints\n  # geom_errorbar(\n  #   aes(\n  #     xmin = mean(score) - smallSample90ci,\n  #     xmax = mean(score) + smallSample90ci,\n  #     y = 0,\n  #     width = 0.025\n  #   ),\n  #   color = \"black\"\n  # ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(-0.1, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  # scale_color_viridis_d(\n  #   guide = \"none\",\n  #   begin = 0.6,\n  #   aesthetics = c(\"fill\", \"color\"),\n  #   direction = 1\n  # ) +\n  labs(\n    title = \"Förslag 2\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart punkt indikerar medelvärde.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\n\n\n14.3.3 Förslag 3\n\n\n2020 med CI740\n\n\n\n\nCode\nggplot(\n  df.test20,\n  aes(x = score, y = 0, fill = factor(score))\n) +\n  # plot actual values in group\n    geom_point(\n    data = df.counts20,\n    aes(x = score, y = -0.02, fill = NULL),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  # plot possible values\n  geom_dotplot(color = \"white\",\n               dotsize = 1,\n               binwidth = 0.2) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    #   ylim = c(0, 1), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  ## theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 3\",\n    subtitle = \"Värden längre till höger är bättre\",\n    #caption = \"Svart diamant indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank()\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nggplot(\n  df.test20,\n  aes(x = score, y = 0, fill = factor(score))\n) +\n    # plot possible values\n    geom_point(\n    data = df.counts20,\n    aes(x = score, y = -0.02, fill = NULL),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n    # plot actual values in group\n  geom_dotplot(color = \"white\",\n               dotsize = 1,\n               binwidth = 0.2) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n    # errorbar has brackets at the endpoints\n  geom_errorbar(\n    aes(\n      xmin = mean(score) - medSample90ci,\n      xmax = mean(score) + medSample90ci,\n      y = 0,\n      width = 0.025\n    ),\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    #   ylim = c(0, 1), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  ## theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 3\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart diamant indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank()\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nggplot(\n  df.test7,\n  aes(x = score, y = 0, fill = factor(score))\n) +\n  # plot actual values in group\n    geom_point(\n    data = df.counts7,\n    aes(x = score, y = -0.02, fill = NULL),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  # plot possible values\n  geom_dotplot(color = \"white\",\n               dotsize = 1,\n               binwidth = 0.2) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    #   ylim = c(0, 1), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  ## theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 3\",\n    subtitle = \"Värden längre till höger är bättre\",\n    #caption = \"Svart diamant indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank()\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nggplot(\n  df.test40,\n  aes(x = score, y = 0, fill = factor(score))\n) +\n  # plot actual values in group\n    geom_point(\n    data = df.counts40,\n    aes(x = score, y = -0.02, fill = NULL),\n    size = 3,\n    shape = 1,\n    color = \"grey\",\n    alpha = 0.7\n  ) +\n  # plot possible values\n  geom_dotplot(color = \"white\",\n               dotsize = 1,\n               binwidth = 0.2) +\n   # plot mean value\n  geom_point(\n    aes(\n      x = mean(score),\n      y = 0\n    ),\n    size = 6,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    #   ylim = c(0, 1), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  ## theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 3\",\n    subtitle = \"Värden längre till höger är bättre\",\n    #caption = \"Svart diamant indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank()\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger"
  },
  {
    "objectID": "visualisering/osaviz.html#jämförelser---två-mätningar-samma-område",
    "href": "visualisering/osaviz.html#jämförelser---två-mätningar-samma-område",
    "title": "14  Förslag på visualisering och återkoppling av OSA-enkäten",
    "section": "14.4 Jämförelser - två mätningar samma område",
    "text": "14.4 Jämförelser - två mätningar samma område\n\n14.4.1 Jämförelse 1\n\n\n20740\n\n\n\n\nCode\n# testing a plot of \"empty\" circles, filled with color gradient based on density/frequency of response\nggplot(\n  data = df.compare20,\n  aes(group = group)\n) +\n  # plot possible values as hollow circles\n  # geom_point(data = df.countsComp,\n  #            aes(x = score,\n  #                y = group\n  #                ),\n  #            size = 3,\n  #            shape = 1,\n  #            color = \"grey\",\n  #            alpha = 0.6\n  # ) +\n  # plot actual scores in data sample as filled circles, with gradient based on frequency(?)\n  geom_point(\n    data = na.omit(df.countsComp20), # remove missing data to remove NA from legend\n    aes(\n      x = score,\n      y = group,\n      size = n * 1.5,\n      color = nFactor\n    ),\n    shape = 16\n  ) +\n  ## create outlines/edges for points\n  # geom_point(data = na.omit(df.countsComp20), # remove missing data to remove NA from legend\n  #   aes(\n  #     x = score,\n  #     y = group,\n  #     size = n * 1.5,\n  #   ),\n  #   color = \"white\",\n  #   shape = 1) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - medSample90ci,\n      xmax = mean(score) + medSample90ci,\n      y = group,\n      width = 0.2\n    ),\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  # plot mean\n  geom_point(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n    geom_errorbar(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - medSample90ci2,\n      xmax = mean(score) + medSample90ci2,\n      y = group,\n      width = 0.2\n    ),\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  # plot mean\n  geom_point(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  ### graphing properties below\n  coord_cartesian(xlim = c(-3, 4)) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 1 jämförelse\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Grå diamant indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.title = element_blank()\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\n# testing a plot of \"empty\" circles, filled with color gradient based on density/frequency of response\nggplot(\n  data = df.compare7,\n  aes(group = group)\n) +\n  # plot possible values as hollow circles\n  # geom_point(data = df.countsComp,\n  #            aes(x = score,\n  #                y = group\n  #                ),\n  #            size = 3,\n  #            shape = 1,\n  #            color = \"grey\",\n  #            alpha = 0.6\n  # ) +\n  # plot actual scores in data sample as filled circles, with gradient based on frequency(?)\n  geom_point(\n    data = na.omit(df.countsComp7), # remove missing data to remove NA from legend\n    aes(\n      x = score,\n      y = group,\n      size = n * 1.5,\n      color = nFactor\n    ),\n    shape = 16\n  ) +\n  ## create outlines/edges for points\n  # geom_point(data = na.omit(df.countsComp7), # remove missing data to remove NA from legend\n  #   aes(\n  #     x = score,\n  #     y = group,\n  #     size = n * 1.5,\n  #   ),\n  #   color = \"white\",\n  #   shape = 1) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - smallSample90ci,\n      xmax = mean(score) + smallSample90ci,\n      y = group,\n      width = 0.2\n    ),\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  # plot mean\n  geom_point(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n    geom_errorbar(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - smallSample90ci2,\n      xmax = mean(score) + smallSample90ci2,\n      y = group,\n      width = 0.2\n    ),\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  # plot mean\n  geom_point(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  ### graphing properties below\n  coord_cartesian(xlim = c(-3, 4)) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 1 jämförelse\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Grå diamant indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.title = element_blank()\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\n# testing a plot of \"empty\" circles, filled with color gradient based on density/frequency of response\nggplot(\n  data = df.compare40,\n  aes(group = group)\n) +\n  # plot possible values as hollow circles\n  # geom_point(data = df.countsComp,\n  #            aes(x = score,\n  #                y = group\n  #                ),\n  #            size = 3,\n  #            shape = 1,\n  #            color = \"grey\",\n  #            alpha = 0.6\n  # ) +\n  # plot actual scores in data sample as filled circles, with gradient based on frequency(?)\n  geom_point(\n    data = na.omit(df.countsComp40), # remove missing data to remove NA from legend\n    aes(\n      x = score,\n      y = group,\n      size = n * 1.5,\n      color = nFactor\n    ),\n    shape = 16\n  ) +\n  ## create outlines/edges for points\n  # geom_point(data = na.omit(df.countsComp40), # remove missing data to remove NA from legend\n  #   aes(\n  #     x = score,\n  #     y = group,\n  #     size = n * 1.5,\n  #   ),\n  #   color = \"white\",\n  #   shape = 1) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - largeSample90ci,\n      xmax = mean(score) + largeSample90ci,\n      y = group,\n      width = 0.2\n    ),\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  # plot mean\n  geom_point(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n    geom_errorbar(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - largeSample90ci2,\n      xmax = mean(score) + largeSample90ci2,\n      y = group,\n      width = 0.2\n    ),\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  # plot mean\n  geom_point(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"darkgrey\",\n    position = position_nudge(y = -0.25)\n  ) +\n  ### graphing properties below\n  coord_cartesian(xlim = c(-3, 4)) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 1 jämförelse\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Grå diamant indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.title = element_blank()\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\n\n\n14.4.2 Jämförelse 2\n\n\n20740\n\n\n\n\nCode\nggplot(\n  df.compare20,\n  aes(x = score, y = group, fill = group)\n) +\n  stat_dots(\n    side = \"top\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    color = \"white\",\n    alpha = 0.8,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2\n  ) +\n  # plot mean (point) and confidence interval (error bar) to make it easier to compare over time\n  geom_errorbar(data = df.compare20 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - medSample90ci,\n      xmax = mean(score) + medSample90ci,\n      y = group,\n      width = 0.1\n    ),\n    color = \"black\"\n  ) +\n  geom_point(data = df.compare20 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n    geom_errorbar(data = df.compare20 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - medSample90ci2,\n      xmax = mean(score) + medSample90ci2,\n      y = group,\n      width = 0.1\n    ),\n    color = \"black\"\n  ) +\n  geom_point(data = df.compare20 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    # ylim = c(0, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_manual(\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 2\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart punkt indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from x axis\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nggplot(\n  df.compare7,\n  aes(x = score, y = group, fill = group)\n) +\n  # stat_slab(\n  #   side = \"right\", show.legend = F,\n  #   scale = 0.6, # defines the height that a slab can reach\n  #   position = position_dodge(width = .6), # distance between elements for dodging\n  #   aes(fill_ramp = after_stat(level), fill = group),\n  #   .width = c(.50, .75, 1)\n  # ) +\n  stat_dots(\n    side = \"top\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    color = \"white\",\n    alpha = 0.8,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(data = df.compare7 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - smallSample90ci,\n      xmax = mean(score) + smallSample90ci,\n      y = group,\n      width = 0.1\n    ),\n    color = \"black\"\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(data = df.compare7 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n    geom_errorbar(data = df.compare7 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - smallSample90ci2,\n      xmax = mean(score) + smallSample90ci2,\n      y = group,\n      width = 0.1\n    ),\n    color = \"black\"\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(data = df.compare7 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    # ylim = c(0, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_manual(\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 2\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart punkt indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nggplot(\n  df.compare40,\n  aes(x = score, y = group, fill = group)\n) +\n  # stat_slab(\n  #   side = \"right\", show.legend = F,\n  #   scale = 0.6, # defines the height that a slab can reach\n  #   position = position_dodge(width = .6), # distance between elements for dodging\n  #   aes(fill_ramp = after_stat(level), fill = group),\n  #   .width = c(.50, .75, 1)\n  # ) +\n  stat_dots(\n    side = \"top\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    color = \"white\",\n    alpha = 0.8,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(data = df.compare40 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - largeSample90ci,\n      xmax = mean(score) + largeSample90ci,\n      y = group,\n      width = 0.1\n    ),\n    color = \"black\"\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(data = df.compare40 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n    geom_errorbar(data = df.compare40 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - largeSample90ci2,\n      xmax = mean(score) + largeSample90ci2,\n      y = group,\n      width = 0.1\n    ),\n    color = \"black\"\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(data = df.compare40 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = group\n    ),\n    size = 5,\n    shape = 18,\n    color = \"black\"\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    # ylim = c(0, 1.2), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_manual(\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 2\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Svart punkt indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\n\n\n14.4.3 Jämförelse 3\n\n\n20740\n\n\n\n\nCode\nnudge <- 0.3\n\nggplot(\n  df.compare20,\n  aes(x = score, y = 0.5, fill = group)\n) +\n  # stat_slab(\n  #   side = \"right\", show.legend = F,\n  #   scale = 0.6, # defines the height that a slab can reach\n  #   position = position_dodge(width = .6), # distance between elements for dodging\n  #   aes(fill_ramp = after_stat(level), fill = group),\n  #   .width = c(.50, .75, 1)\n  # ) +\n  stat_dots(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 1\"),\n    side = \"top\",\n    scale = 0.3,\n    show.legend = T,\n    position = position_dodge(width = .9),\n    alpha = 0.66,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2,\n    color = \"white\"\n  ) +\n  stat_dots(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 2\"),\n    side = \"bottom\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    alpha = 0.66,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2,\n    color = \"white\"\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - medSample90ci2,\n      xmax = mean(score) + medSample90ci2,\n      y = 0.5,\n      width = 0.025,\n      color = group\n    ),\n    position = position_nudge(y = -nudge)\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = 0.5,\n      color = group\n    ),\n    size = 5,\n    shape = 18,\n    position = position_nudge(y = -nudge),\n    alpha = 0.7\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - medSample90ci,\n      xmax = mean(score) + medSample90ci,\n      y = 0.5,\n      width = 0.025,\n      color = group\n    ),\n    position = position_nudge(y = nudge)\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.compare20 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = 0.5,\n      color = group\n    ),\n    size = 5,\n    shape = 18,\n    position = position_nudge(y = nudge),\n    alpha = 0.7\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(0, 1), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_manual(\"Grupp\",\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 3\",\n    subtitle = \"Värden längre till höger är bättre. \\nPrickar motsvarar personer.\",\n    caption = \"Svart punkt indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(), # remove text from both axes\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nnudge <- 0.3\n\nggplot(\n  df.compare7,\n  aes(x = score, y = 0.5, fill = group)\n) +\n  # stat_slab(\n  #   side = \"right\", show.legend = F,\n  #   scale = 0.6, # defines the height that a slab can reach\n  #   position = position_dodge(width = .6), # distance between elements for dodging\n  #   aes(fill_ramp = after_stat(level), fill = group),\n  #   .width = c(.50, .75, 1)\n  # ) +\n  stat_dots(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 1\"),\n    side = \"top\",\n    scale = 0.3,\n    show.legend = T,\n    position = position_dodge(width = .9),\n    alpha = 0.66,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2,\n    color = \"white\"\n  ) +\n  stat_dots(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 2\"),\n    side = \"bottom\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    alpha = 0.66,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2,\n    color = \"white\"\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - smallSample90ci2,\n      xmax = mean(score) + smallSample90ci2,\n      y = 0.5,\n      width = 0.025,\n      color = group\n    ),\n    position = position_nudge(y = -nudge)\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = 0.5,\n      color = group\n    ),\n    size = 5,\n    shape = 18,\n    position = position_nudge(y = -nudge),\n    alpha = 0.7\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - smallSample90ci,\n      xmax = mean(score) + smallSample90ci,\n      y = 0.5,\n      width = 0.025,\n      color = group\n    ),\n    position = position_nudge(y = nudge)\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.compare7 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = 0.5,\n      color = group\n    ),\n    size = 5,\n    shape = 18,\n    position = position_nudge(y = nudge),\n    alpha = 0.7\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(0, 1), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_manual(\"Grupp\",\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 3\",\n    subtitle = \"Värden längre till höger är bättre. \\nPrickar motsvarar personer.\",\n    caption = \"Svart punkt indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(), # remove text from both axes\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger\n\n\n\n\n\n\n\n\n\nCode\nnudge <- 0.3\n\nggplot(\n  df.compare40,\n  aes(x = score, y = 0.5, fill = group)\n) +\n  # stat_slab(\n  #   side = \"right\", show.legend = F,\n  #   scale = 0.6, # defines the height that a slab can reach\n  #   position = position_dodge(width = .6), # distance between elements for dodging\n  #   aes(fill_ramp = after_stat(level), fill = group),\n  #   .width = c(.50, .75, 1)\n  # ) +\n  stat_dots(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 1\"),\n    side = \"top\",\n    scale = 0.3,\n    show.legend = T,\n    position = position_dodge(width = .9),\n    alpha = 0.66,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2,\n    color = \"white\"\n  ) +\n  stat_dots(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 2\"),\n    side = \"bottom\",\n    scale = 0.3,\n    show.legend = F,\n    position = position_dodge(width = .9),\n    alpha = 0.66,\n    # verbose = T,\n    binwidth = 0.1, # this and the one below may need to be calculated from data instead\n    dotsize = 2,\n    color = \"white\"\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      xmin = mean(score) - largeSample90ci2,\n      xmax = mean(score) + largeSample90ci2,\n      y = 0.5,\n      width = 0.025,\n      color = group\n    ),\n    position = position_nudge(y = -nudge)\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 2\"),\n    aes(\n      x = mean(score),\n      y = 0.5,\n      color = group\n    ),\n    size = 5,\n    shape = 18,\n    position = position_nudge(y = -nudge),\n    alpha = 0.7\n  ) +\n  # errorbar has brackets at the endpoints\n  geom_errorbar(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      xmin = mean(score) - largeSample90ci,\n      xmax = mean(score) + largeSample90ci,\n      y = 0.5,\n      width = 0.025,\n      color = group\n    ),\n    position = position_nudge(y = nudge)\n  ) +\n  # plot mean/median and some sort of distribution (SD/SE?) to make it easier to compare over time\n  geom_point(\n    data = df.compare40 %>% filter(group == \"Mättillfälle 1\"),\n    aes(\n      x = mean(score),\n      y = 0.5,\n      color = group\n    ),\n    size = 5,\n    shape = 18,\n    position = position_nudge(y = nudge),\n    alpha = 0.7\n  ) +\n  ### graphing properties below\n  coord_cartesian(\n    ylim = c(0, 1), # limits for x and y axis\n    xlim = c(-3, 4)\n  ) +\n  scale_size_continuous(\n    range = c(5, 10), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_color_manual(\"Grupp\",\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Förslag 3\",\n    subtitle = \"Värden längre till höger är bättre. \\nPrickar motsvarar personer.\",\n    caption = \"Svart punkt indikerar medelvärde med 90% konfidensintervall runt.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(), # remove text from both axes\n    axis.title = element_blank(),\n  ) +\n  guides(color = guide_legend(override.aes = list(size = 7))) # make points in legend bigger"
  },
  {
    "objectID": "visualisering/osaviz.html#sec-vizItems",
    "href": "visualisering/osaviz.html#sec-vizItems",
    "title": "14  Förslag på visualisering och återkoppling av OSA-enkäten",
    "section": "14.5 Visualisering av frågor/items",
    "text": "14.5 Visualisering av frågor/items\n\n\nCode\n# create random sample dataset\ndf.plot7 <- df %>%\n  slice_sample(n = sampleSmall) %>%\n  select(all_of(itemlabels$itemnr), score) %>%\n  pivot_longer(!score) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 1\")\n\n# enable comparisons by adding another random group\ndf.plot7b <- df %>%\n  slice_sample(n = sampleSmall) %>%\n  select(all_of(itemlabels$itemnr), score) %>%\n  pivot_longer(!score) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 2\")\n\ndf.plotComp7 <- rbind(df.plot7,df.plot7b)\n\n#####\n\n# create random sample dataset\ndf.plot20 <- df %>%\n  slice_sample(n = sampleMed) %>%\n  select(all_of(itemlabels$itemnr), score) %>%\n  pivot_longer(!score) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 1\")\n\n# enable comparisons by adding another random group\ndf.plot20b <- df %>%\n  slice_sample(n = sampleMed) %>%\n  select(all_of(itemlabels$itemnr), score) %>%\n  pivot_longer(!score) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 2\")\n\ndf.plotComp20 <- rbind(df.plot20,df.plot20b)\n\n#####\n\n# create random sample dataset\ndf.plot40 <- df %>%\n  slice_sample(n = sampleLarge) %>%\n  select(all_of(itemlabels$itemnr), score) %>%\n  pivot_longer(!score) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 1\")\n\n# enable comparisons by adding another random group\ndf.plot40b <- df %>%\n  slice_sample(n = sampleLarge) %>%\n  select(all_of(itemlabels$itemnr), score) %>%\n  pivot_longer(!score) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 2\")\n\ndf.plotComp40 <- rbind(df.plot40,df.plot40b)\n\n\n\n\nCode\n# function to get mode values (typvärden)\nMode <- function(x) {\n  ux <- unique(x)\n  ux[which.max(tabulate(match(x, ux)))]\n}\n\n# prepare dataframe to store values\nmodeResponses <- itemlabels\n\ndf.modes <- df.plot20 %>% \n  # create numeric responses where 1 = \"Aldrig, and 6 = \"Alltid\".\n  mutate(svarNum = as.integer(fct_rev(svarskategori))) %>% \n  add_column(id = rep(1:20, each=6)) %>% \n  select(itemnr,svarNum,id) %>% \n  pivot_wider(names_from = \"itemnr\",\n              values_from = \"svarNum\",\n              id_cols = \"id\")\n\nmodes <- c()\nfor (i in modeResponses$itemnr) {\n  mode1 <- Mode(df.modes[[i]])\n  modes <- c(modes,mode1)\n}\nmodeResponses$modes <- modes\n\n# get median values (can be .5 when we have an even N)\nmedians <- c()\nfor (i in modeResponses$itemnr) {\n  med1 <- median(df.modes[[i]])\n  medians <- c(medians,med1)\n}\n\nmodeResponses$medians <- medians\n\n# get IQR, interquartile range\niqrs <- c()\nfor (i in modeResponses$itemnr) {\n  iqr1 <- IQR(df.modes[[i]])\n  iqrs <- c(iqrs,iqr1)\n}\nmodeResponses$iqrs <- iqrs\n\n# get median values (can be .5 when we have an even N) and upper/lower IQR\nmed_hilow <- matrix(nrow = 0, ncol = 3)\nfor (i in modeResponses$itemnr) {\n  med_hilow <- rbind(med_hilow,median_hilow(df.modes[[i]], conf.int=.5))\n}\n\nmodeResponses <- cbind(modeResponses,med_hilow)\n\nmodeResponses <- modeResponses %>% \n  mutate(modeCats = factor(modes, levels = c(1:6),\n                           labels = svarskategorier)\n         )\n\n\n\n\nCode\n# prepare dataframe to store values\nmodeResponses7 <- itemlabels\n\ndf.modes7 <- df.plot7 %>% \n  # create numeric responses where 1 = \"Aldrig, and 6 = \"Alltid\".\n  mutate(svarNum = as.integer(fct_rev(svarskategori))) %>% \n  add_column(id = rep(1:7, each=6)) %>% \n  select(itemnr,svarNum,id) %>% \n  pivot_wider(names_from = \"itemnr\",\n              values_from = \"svarNum\",\n              id_cols = \"id\")\n\nmodes <- c()\nfor (i in modeResponses$itemnr) {\n  mode1 <- Mode(df.modes7[[i]])\n  modes <- c(modes,mode1)\n}\nmodeResponses7$modes <- modes\n\n# get median values (can be .5 when we have an even N)\nmedians <- c()\nfor (i in modeResponses$itemnr) {\n  med1 <- median(df.modes7[[i]])\n  medians <- c(medians,med1)\n}\n\nmodeResponses7$medians <- medians\n\n# get IQR, interquartile range\niqrs <- c()\nfor (i in modeResponses$itemnr) {\n  iqr1 <- IQR(df.modes7[[i]])\n  iqrs <- c(iqrs,iqr1)\n}\nmodeResponses7$iqrs <- iqrs\n\n# get median values (can be .5 when we have an even N) and upper/lower IQR\nmed_hilow7 <- matrix(nrow = 0, ncol = 3)\nfor (i in modeResponses$itemnr) {\n  med_hilow7 <- rbind(med_hilow7,median_hilow(df.modes7[[i]], conf.int=.5))\n}\n\nmodeResponses7 <- cbind(modeResponses7,med_hilow7)\n\nmodeResponses7 <- modeResponses7 %>% \n  mutate(modeCats = factor(modes, levels = c(1:6),\n                           labels = svarskategorier)\n         )\n\n\n\n\nCode\n# prepare dataframe to store values\nmodeResponses40 <- itemlabels\n\ndf.modes40 <- df.plot40 %>% \n  # create numeric responses where 1 = \"Aldrig, and 6 = \"Alltid\".\n  mutate(svarNum = as.integer(fct_rev(svarskategori))) %>% \n  add_column(id = rep(1:40, each=6)) %>% \n  select(itemnr,svarNum,id) %>% \n  pivot_wider(names_from = \"itemnr\",\n              values_from = \"svarNum\",\n              id_cols = \"id\")\n\nmodes <- c()\nfor (i in modeResponses$itemnr) {\n  mode1 <- Mode(df.modes40[[i]])\n  modes <- c(modes,mode1)\n}\nmodeResponses40$modes <- modes\n\n# get median values (can be .5 when we have an even N)\nmedians <- c()\nfor (i in modeResponses$itemnr) {\n  med1 <- median(df.modes40[[i]])\n  medians <- c(medians,med1)\n}\n\nmodeResponses40$medians <- medians\n\n# get IQR, interquartile range\niqrs <- c()\nfor (i in modeResponses$itemnr) {\n  iqr1 <- IQR(df.modes40[[i]])\n  iqrs <- c(iqrs,iqr1)\n}\nmodeResponses40$iqrs <- iqrs\n\n# get median values (can be .5 when we have an even N) and upper/lower IQR\nmed_hilow40 <- matrix(nrow = 0, ncol = 3)\nfor (i in modeResponses$itemnr) {\n  med_hilow40 <- rbind(med_hilow40,median_hilow(df.modes40[[i]], conf.int=.5))\n}\n\nmodeResponses40 <- cbind(modeResponses40,med_hilow40)\n\nmodeResponses40 <- modeResponses40 %>% \n  mutate(modeCats = factor(modes, levels = c(1:6),\n                           labels = svarskategorier)\n         )\n\n\n\n14.5.1 geom_point\n\n\n2020 med text20 text+blå kulör20 blå utan text77 blå4040 blå\n\n\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  ### graphing properties below\n  # coord_cartesian(ylim = c(0.8,1.2), # limits for x and y axis\n  #                xlim = c(-3,4)) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"none\") +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  #guides(color = guide_legend(override.aes = list(size = 7))) + # make points in legend bigger\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  geom_text(aes(x = svarskategori, y = item, label = n),\n            color = \"white\") +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"none\") +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  #guides(color = guide_legend(override.aes = list(size = 7))) + # make points in legend bigger\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    # size = 3,\n    shape = 16\n  ) +\n  ### graphing properties below\n  # coord_cartesian(ylim = c(0.8,1.2), # limits for x and y axis\n  #                xlim = c(-3,4)) +\n  geom_text(aes(x = svarskategori, y = item, label = n),\n            color = \"white\") +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_brewer(\n  #   #type = \"seq\",\n  #   #palette = \"Greens\",\n   guide = \"none\"\n  ) +\n  #scale_color_manual(values = my.cols) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    shape = 16\n  ) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_brewer(\n   guide = \"none\"\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot7 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  ### graphing properties below\n  # coord_cartesian(ylim = c(0.8,1.2), # limits for x and y axis\n  #                xlim = c(-3,4)) +\n  scale_size_continuous(\n    range = c(7, 18), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"none\") +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  #guides(color = guide_legend(override.aes = list(size = 7))) + # make points in legend bigger\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot7 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    shape = 16\n  ) +\n  scale_size_continuous(\n    range = c(7, 18), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"none\") +\n  scale_color_brewer(\n   guide = \"none\"\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  #guides(color = guide_legend(override.aes = list(size = 7))) + # make points in legend bigger\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  ### graphing properties below\n  # coord_cartesian(ylim = c(0.8,1.2), # limits for x and y axis\n  #                xlim = c(-3,4)) +\n  scale_size_continuous(\n    range = c(7, 21), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"none\") +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\"\n  ) +\n  #scale_color_manual(values = plot40colors) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  #guides(color = guide_legend(override.aes = list(size = 7))) + # make points in legend bigger\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\n# scale_color_brewer() only has 9 colors in its palette, we need more for larger samples\n# Let's calculate the needed number first\n\nnumColors <- df.plot40 %>%\n  dplyr::count(item, svarskategori) %>% \n  distinct(n) %>% \n  rownames_to_column(\"categories\") %>% \n  mutate(categories = as.numeric(categories)) %>% \n  select(categories) %>% \n  tail(1) %>% \n  pull()\n\nplot40colors <- colorRampPalette(c(\"#F7FBFF\",\"#08306B\"))(numColors)\n\ndf.plot40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    shape = 16\n  ) +\n  scale_size_continuous(\n    range = c(7, 18), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"none\") +\n  # scale_color_brewer(\n  #  guide = \"none\"\n  # ) +\n  scale_color_manual(values = plot40colors) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  #guides(color = guide_legend(override.aes = list(size = 7))) + # make points in legend bigger\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\n\n\n14.5.2 Typvärden/medianvärden 20\n\n\n20 median + bollar20 typvärde + bollar20 enbart typvärde20 median + spridning20 median+spridning utan bollar\n\n\nMedianvärdet är det som ligger i mitten när alla värden i gruppen ställs på rad från lågt till högt. Vi börjar med att titta på föregående visualisering “i bakgrunden” och lägga över median-värdet.\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    shape = 16,\n    alpha = 0.6\n  ) +\n  geom_point(data = modeResponses,\n             aes(x = medians,\n                 y = item),\n             color = \"black\",\n             size = 7,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_brewer(\n   guide = \"none\"\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar + medianvärden\",\n    caption = \"Medianvärdet kan hamna mellan två svarskategorier när det är ett jämnt antal respondenter.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\nTypvärdet är det vanligast förekommande svaret på en fråga.\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    shape = 16,\n    alpha = 0.6\n  ) +\n  geom_point(data = modeResponses,\n             aes(x = modes,\n                 y = item),\n             color = \"black\",\n             size = 7,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_brewer(\n   guide = \"none\"\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar + typvärden\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5),\n    shape = 16,\n    alpha = 0\n  ) +\n  geom_point(data = modeResponses,\n             aes(x = modes,\n                 y = item,\n                 color = modeCats),\n             #color = \"black\",\n             size = 12,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\n   guide = \"none\",\n   begin = 0.4,\n   end = 0.8\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Typvärden\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\nVi använder interkvartilt omfång (interquartile range, IQR), vilket är avståndet mellan 25:e och 75:e percentilen. Med mindre sampel är dock detta mindre användbart. Vi tittar på sampelstorlek 20, med “bollformade” figurer i bakgrunden för att visa den faktiska spridningen samtidigt.\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5),\n    shape = 16,\n    alpha = 0.05\n  ) +\n  geom_segment(data = modeResponses,\n             aes(\n               y = item, yend = item,\n               x = ymin,\n               xend = ymax\n               ),\n             lineend = \"round\",\n             linewidth = 2,\n             color = \"black\",\n             alpha = 0.7\n             ) +\n  geom_point(data = modeResponses,\n             aes(x = medians,\n                 y = item,\n                 color = modeCats),\n             #color = \"black\",\n             size = 12,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\n   guide = \"none\",\n   begin = 0.4,\n   end = 0.8\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Median och spridning\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5),\n    shape = 16,\n    alpha = 0\n  ) +\n  geom_segment(data = modeResponses,\n             aes(\n               y = item, yend = item,\n               x = ymin,\n               xend = ymax\n               ),\n             lineend = \"round\",\n             linewidth = 2,\n             color = \"black\",\n             alpha = 0.7\n             ) +\n  geom_point(data = modeResponses,\n             aes(x = medians,\n                 y = item,\n                 color = modeCats),\n             #color = \"black\",\n             size = 12,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\n   guide = \"none\",\n   begin = 0.4,\n   end = 0.8\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Median och spridning\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\n\n\n14.5.3 Typ/median 40\n\n\n40 median + bollar40 typvärde + bollar40 enbart typvärde40 median + spridning40 median+spridning\n\n\nVi börjar med att titta på föregående visualisering “i bakgrunden” och lägga över median-värdet.\nMedianvärdet är det som ligger i mitten när alla värden i gruppen ställs på rad från lågt till högt.\n\n\nCode\ndf.plot40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    shape = 16,\n    alpha = 0.6\n  ) +\n  geom_point(data = modeResponses40,\n             aes(x = modes,\n                 y = item),\n             color = \"black\",\n             size = 7,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_manual(values = plot40colors,\n                     guide = \"none\") +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar + medianvärden\",\n    caption = \"Medianvärdet kan hamna mellan två svarskategorier när det är ett jämnt antal respondenter.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    shape = 16,\n    alpha = 0.6\n  ) +\n  geom_point(data = modeResponses40,\n             aes(x = modes,\n                 y = item),\n             color = \"black\",\n             size = 7,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_manual(values = plot40colors,\n                     guide = \"none\") +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar + typvärden\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5),\n    shape = 16,\n    alpha = 0\n  ) +\n  geom_point(data = modeResponses40,\n             aes(x = modes,\n                 y = item,\n                 color = modeCats),\n             #color = \"black\",\n             size = 12,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\n   guide = \"none\",\n   begin = 0.4,\n   end = 0.8\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Typvärden\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\nVi använder interkvartilt omfång (interquartile range, IQR), vilket är avståndet mellan 25:e och 75:e percentilen. Med mindre sampel är dock detta mindre användbart. Vi tittar på sampelstorlek 20, med “bollformade” figurer i bakgrunden för att visa den faktiska spridningen samtidigt.\n\n\nCode\ndf.plot40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5),\n    shape = 16,\n    alpha = 0.05\n  ) +\n  geom_segment(data = modeResponses40,\n             aes(\n               y = item, yend = item,\n               x = ymin,\n               xend = ymax\n               ),\n             lineend = \"round\",\n             linewidth = 2,\n             color = \"black\",\n             alpha = 0.7\n             ) +\n  geom_point(data = modeResponses40,\n             aes(x = medians,\n                 y = item,\n                 color = modeCats),\n             #color = \"black\",\n             size = 12,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\n   guide = \"none\",\n   begin = 0.4,\n   end = 0.8\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Median och spridning\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plot40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5),\n    shape = 16,\n    alpha = 0\n  ) +\n  geom_segment(data = modeResponses40,\n             aes(\n               y = item, yend = item,\n               x = ymin,\n               xend = ymax\n               ),\n             lineend = \"round\",\n             linewidth = 2,\n             color = \"black\",\n             alpha = 0.7\n             ) +\n  geom_point(data = modeResponses40,\n             aes(x = medians,\n                 y = item,\n                 color = modeCats),\n             #color = \"black\",\n             size = 12,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\n   guide = \"none\",\n   begin = 0.4,\n   end = 0.8\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Median och spridning\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\nCode\ndf.modes40 %>% \n  select(!id) %>% \n  pivot_longer(everything(), names_to = \"itemnr\", values_to = \"svarNum\")\n\n\n# A tibble: 240 × 2\n   itemnr svarNum\n   <chr>    <int>\n 1 abk4         5\n 2 abk5         3\n 3 abk6         3\n 4 å2           2\n 5 å4           3\n 6 å5           2\n 7 abk4         6\n 8 abk5         3\n 9 abk6         3\n10 å2           4\n# ℹ 230 more rows\n\n\nCode\ndf.plot40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  mutate(svarNum = as.numeric(svarskategori)) %>% \n  ggplot(aes(x = svarskategori, \n             y = item)) +\n  geom_point(aes(size = n * 1.5),\n    shape = 16,\n    alpha = 0\n  ) +\n  geom_point(data = modeResponses40,\n             aes(x = medians,\n                 y = item,\n                 color = modeCats),\n             #color = \"black\",\n             size = 12,\n             shape = 18) +\n  stat_pointinterval(point_interval = median_qi) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_viridis_d(\n   guide = \"none\",\n   begin = 0.4,\n   end = 0.8\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Median och spridning\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\n\n\n14.5.4 Typ/median 7\n\n\n7 median + bollar\n\n\nDet blir tyvärr inte bra när vi har såpass få deltagare i samplet. Median är något mindre dåligt, men typvärdet fungerar inte med så små sampel. Men även median känns inte rättvisade, vilket framgår i figuren nedan.\n\n\nCode\ndf.plot7 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = nFactor),\n    shape = 16,\n    alpha = 0.6\n  ) +\n  geom_point(data = modeResponses7,\n             aes(x = medians,\n                 y = item),\n             color = \"black\",\n             size = 7,\n             shape = 18) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_brewer(\n   guide = \"none\"\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar + medianvärden\",\n    caption = \"Medianvärdet kan hamna mellan två svarskategorier när det är ett jämnt antal respondenter.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\n\n\n14.5.5 stat_dots\ndenna borde också kunna användas för pre/post, genom att ha två layers med stat_dots för de olika mättillfällena? Och använda position_nudge för att lägga dem ovan/under y-linjen.\n\n\n20740\n\n\n\n\nCode\ndf.plot20 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      color = svarskategori, fill = svarskategori\n    )\n  ) +\n  stat_dots() +\n  scale_color_viridis_d(\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\",\n    direction = 1\n  ) +\n  theme_minimal() +\n  theme_prevent() +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8)) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  )\n\n\n\n\n\n\n\n\n\nCode\ndf.plot7 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      color = svarskategori, fill = svarskategori\n    )\n  ) +\n  stat_dots() +\n  scale_color_viridis_d(\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\",\n    direction = 1\n  ) +\n  theme_minimal() +\n  theme_prevent() +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8)) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  )\n\n\n\n\n\n\n\n\n\nCode\ndf.plot40 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      color = svarskategori, fill = svarskategori\n    )\n  ) +\n  stat_dots() +\n  scale_color_viridis_d(\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\"),\n    guide = \"none\",\n    direction = 1\n  ) +\n  theme_minimal() +\n  theme_prevent() +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8)) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n14.5.6 ridgeline_gradient\n\n\n2074020 enfärgad\n\n\n\n\nCode\ndf.plot20 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>%\n  group_by(item) %>% \n  count(svarskategori) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      height = n, group = item,\n      fill = svarskategori\n    )) +\n  geom_ridgeline_gradient(scale = 8/nrow(df.plot20)) +\n  scale_x_discrete() +\n  scale_fill_viridis_d('Svarskategori', \n                       direction = 1,\n                       begin = 0.4, \n                       guide = \"none\") +\n  theme_minimal() +\n  theme_prevent() +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  labs(title = \"Ridgeline\",\n       subtitle = glue(\"{nrow(df.plot20)/6} deltagare\"),\n       caption = \"Siffror indikerar antal svar per svarskategori\") + # dela på antalet frågor i indexet\n  geom_text(aes(label = n), color = \"orange\", \n            nudge_y = -0.1, nudge_x = 0) +\n  theme()\n\n\n\n\n\nCode\n# ridgeline med en kulör bara\n\n\n\n\n\n\nCode\ndf.plot7 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>%\n  group_by(item) %>% \n  count(svarskategori) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      height = n, group = item,\n      fill = svarskategori\n    )) +\n  geom_ridgeline_gradient(scale = 8/nrow(df.plot7)) +\n  scale_x_discrete() +\n  scale_fill_viridis_d('Svarskategori', \n                       direction = 1,\n                       begin = 0.4, \n                       guide = \"none\") +\n  theme_minimal() +\n  theme_prevent() +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  labs(title = \"Ridgeline\",\n       subtitle = glue(\"{nrow(df.plot7)/6} deltagare\")) +\n  geom_text(aes(label = n), color = \"orange\", \n            nudge_y = -0.1, nudge_x = 0)\n\n\n\n\n\n\n\n\n\nCode\ndf.plot40 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>%\n  group_by(item) %>% \n  count(svarskategori) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      height = n, group = item,\n      fill = svarskategori\n    )) +\n  geom_ridgeline_gradient(scale = 8/nrow(df.plot40)) +\n  scale_x_discrete() +\n  scale_fill_viridis_d('Svarskategori', \n                       direction = 1,\n                       begin = 0.4, \n                       guide = \"none\") +\n  theme_minimal() +\n  theme_prevent() +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  labs(title = \"Ridgeline\",\n       subtitle = glue(\"{nrow(df.plot40)/6} deltagare\")) +\n  geom_text(aes(label = n), color = \"orange\", \n            nudge_y = -0.1, nudge_x = 0)\n\n\n\n\n\n\n14.5.7 density\n\n\n\n\n\nCode\ndensityCount20 <- df.plot20 %>%\n  #mutate(svarskategori = fct_rev(svarskategori)) %>%\n  mutate(item = fct_rev(item)) %>% \n  group_by(item) %>% \n  count(svarskategori) %>% \n  mutate(svar = as.numeric(svarskategori))\n\ndf.plot20 %>%\n  mutate(svar = as.numeric(svarskategori)) %>% \n  mutate(item = factor(item)) %>% \n  #mutate(item = fct_rev(item)) %>% \n  ggplot(\n    aes(\n      x = svar\n        )\n      ) +\n  geom_density(alpha = 0.8, \n               stat = \"count\",\n               fill = prevent_light_blue, \n               color = prevent_blue\n               ) +\n  geom_text(data = densityCount20,\n            aes(y = 0, label = n), color = prevent_dark_blue, alpha = 1, \n            nudge_y = 0, nudge_x = 0) +\n  coord_cartesian(clip = \"off\") +\n  facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(30))\n             ) +\n  scale_x_continuous(labels = svarskategorier,\n                     #limits = c(1:6), \n                     breaks = c(1:6)\n    ) +\n  scale_y_continuous(position=\"right\", \n                     minor_breaks = NULL,\n                     label = scales::label_comma(accuracy = 1)) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0,\n                                                 hjust = 1),\n                legend.position = \"none\"\n                                ) +\n  theme(axis.title.y = element_text(margin = margin(l = 15))) +\n  xlab(\"\") +\n  ylab(\"Antal svar\") +\n  labs(title = \"Density count\",\n       subtitle = \"20 deltagare\",\n        caption = \"Siffror indikerar antal svar per svarskategori\")\n\n\n\n\n\n\n\n\n\n\n\n14.5.8 geom_col + facet_wrap\n\n14.5.8.1 20\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = svarskategori\n    )\n  ) +\n  geom_col() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"none\") +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_continuous(position=\"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL)\n\n\n\n\n\n\n\n14.5.8.2 7\n\n\nCode\ndf.plot7 %>%\n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = svarskategori\n    )\n  ) +\n  geom_col() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"none\") +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_continuous(position=\"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL)\n\n\n\n\n\n\n\n14.5.8.3 40\n\n\nCode\ndf.plot40 %>%\n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = svarskategori\n    )\n  ) +\n  geom_col() +\n  scale_color_viridis_d(\"Antal svar\",\n    begin = 0.2,\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"none\") +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_continuous(position=\"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL)\n\n\n\n\n\n\n\n\n14.5.9 Kränkning/särbehandling\nDenna får en egen visualisering/kulörpalett.\n\n\nCode\n# read data again for negative acts questions, \"krbet\"\ndf.krbet <- read.spss(spssDatafil, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0012\")) %>% \n  na.omit()\n# krbet itemlabels\nkrbet.itemlabels <- read_excel(\"../data/Itemlabels.xlsx\") %>% \n  filter(str_detect(itemnr, pattern = \"kb\")) %>% \n  select(!Dimension)\n\nnames(df.krbet) <- krbet.itemlabels$itemnr\n\ndf.plot.krbet20 <- df.krbet %>%\n  slice_sample(n = 20) %>%\n  pivot_longer(everything()) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(krbet.itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 1\")\n\ndf.plot.krbet20b <- df.krbet %>%\n  slice_sample(n = 20) %>%\n  pivot_longer(everything()) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(krbet.itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 2\")\n\ndf.krbetComp <- rbind(df.plot.krbet20,df.plot.krbet20b)\n\ndf.plot.krbet7 <- df.krbet %>%\n  slice_sample(n = 7) %>%\n  pivot_longer(everything()) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(krbet.itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 1\")\n\ndf.plot.krbet40 <- df.krbet %>%\n  slice_sample(n = 40) %>%\n  pivot_longer(everything()) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(krbet.itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 1\")\n\nkrbet.svarskategorier <- c(\"Aldrig\",\"Det har hänt\",\"Varje månad\",\"Varje vecka\",\"Dagligen\")\n\n\n\n\n2074020 jämförelse\n\n\n\n\nCode\ndf.plot.krbet20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  #mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  geom_text(aes(x = svarskategori, y = item, label = n),\n            color = \"white\") +\n  ### graphing properties below\n  # coord_cartesian(ylim = c(0.8,1.2), # limits for x and y axis\n  #                xlim = c(-3,4)) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  # scale_color_viridis_d(\"Antal svar\",\n  #   begin = 0,\n  #   option = \"plasma\",\n  #   direction = -1\n  # ) +\n  scale_color_manual(values = c(\"#008332\",\"#FBB900\",\"#BE5014\",\"#B01200\",\"#B01200\"),\n                     guide = \"none\") +\n  labs(\n    title = \"Kränkande beteenden\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(breaks = krbet.svarskategorier,\n                   limits = krbet.svarskategorier)\n\n\n\n\n\n\n\n\n\nCode\ndf.plot.krbet7 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  #mutate(svarskategori = fct_rev(svarskategori)) %>% \n  filter(n > 0) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  geom_text(aes(x = svarskategori, y = item, label = n),\n            color = \"white\") +\n  ### graphing properties below\n  # coord_cartesian(ylim = c(0.8,1.2), # limits for x and y axis\n  #                xlim = c(-3,4)) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  # scale_color_viridis_d(\"Antal svar\",\n  #   begin = 0,\n  #   option = \"plasma\",\n  #   direction = -1\n  # ) +\n  scale_color_manual(values = c(\"#008332\",\"#FBB900\",\"#BE5014\",\"#B01200\",\"#B01200\"),\n                     guide = \"none\",\n                     drop = FALSE) +\n  labs(\n    title = \"Kränkande beteenden\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(breaks = krbet.svarskategorier,\n                   limits = krbet.svarskategorier)\n\n\n\n\n\n\n\n\n\nCode\ndf.plot.krbet40 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  #mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  geom_text(aes(x = svarskategori, y = item, label = n),\n            color = \"white\") +\n  ### graphing properties below\n  # coord_cartesian(ylim = c(0.8,1.2), # limits for x and y axis\n  #                xlim = c(-3,4)) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  # scale_color_viridis_d(\"Antal svar\",\n  #   begin = 0,\n  #   option = \"plasma\",\n  #   direction = -1\n  # ) +\n  scale_color_manual(values = c(\"#008332\",\"#FBB900\",\"#BE5014\",\"#B01200\",\"#B01200\"),\n                     guide = \"none\") +\n  labs(\n    title = \"Kränkande beteenden\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(breaks = krbet.svarskategorier,\n                   limits = krbet.svarskategorier)\n\n\n\n\n\n\n\n\n\nCode\nplot.krbetComp <- df.krbetComp %>%\n  dplyr::count(group, item, svarskategori) %>%\n  mutate(nFactor = factor(n))\n# mutate(svarskategori = fct_rev(svarskategori)) %>%\nggplot() +\n  geom_point(\n    data = plot.krbetComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  geom_text(\n    data = plot.krbetComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"white\"\n  ) +\n  geom_point(\n    data = plot.krbetComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    alpha = 0.3,\n    shape = 16,\n    position = position_nudge(x = 0.35, y = 0)\n  ) +\n  geom_text(\n    data = plot.krbetComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"white\",\n    alpha = 0.66,\n    position = position_nudge(x = 0.35, y = 0)\n  ) +\n  ### graphing properties below\n  # coord_cartesian(ylim = c(0.8,1.2), # limits for x and y axis\n  #                xlim = c(-3,4)) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\"\n  ) + # remove legend for size aesthetic\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_manual(\n    values = c(\"#008332\", \"#FBB900\", \"#BE5014\", \"#B01200\", \"#B01200\"),\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Kränkande beteenden\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(\n    breaks = krbet.svarskategorier,\n    limits = krbet.svarskategorier\n  )"
  },
  {
    "objectID": "visualisering/osaviz.html#jämförelse-på-item-nivå",
    "href": "visualisering/osaviz.html#jämförelse-på-item-nivå",
    "title": "14  Förslag på visualisering och återkoppling av OSA-enkäten",
    "section": "14.6 Jämförelse på item-nivå",
    "text": "14.6 Jämförelse på item-nivå\n\n\n14.6.1 columns\n\n20740\n\n\n\n\nCode\ndf.plotComp20 %>%\n  group_by(group) %>% \n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = group\n    )\n  ) +\n  geom_col(position = \"dodge\") +\n  scale_color_manual('',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             #scales = \"free\"\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"top\") +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_continuous(position = \"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plotComp7 %>%\n  group_by(group) %>% \n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = group\n    )\n  ) +\n  geom_col(position = \"dodge\") +\n  scale_color_manual('',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             #scales = \"free\"\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"top\") +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_continuous(position = \"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.plotComp40 %>%\n  group_by(group) %>% \n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = group\n    )\n  ) +\n  geom_col(position = \"dodge\") +\n  scale_color_manual('',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             #scales = \"free\"\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"top\") +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_continuous(position = \"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\n\n14.6.2 density count\n\n20740\n\n\n\n\nCode\ndf.plotComp20 %>%\n  mutate(svar = as.numeric(svarskategori)) %>% \n  mutate(item = factor(item)) %>% \n  #mutate(item = fct_rev(item)) %>% \n  ggplot(\n    aes(\n      x = svar, fill = group, color = group\n    )) +\n  geom_density(alpha = 0.6, stat = \"count\") +\n  facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             ) +\n  scale_x_continuous(limits = svarskategorier, \n                     breaks = svarskategorier,\n                     labels = svarskategorier\n    ) +\n  scale_y_continuous(position=\"right\", \n                     minor_breaks = NULL,\n                     label = scales::label_comma(accuracy = 1)) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"none\") +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_x_reverse()\n\n\n\n\n\n\n\n\n\nCode\ndf.plotComp7 %>%\n  mutate(svar = as.numeric(svarskategori)) %>% \n  mutate(item = factor(item)) %>% \n  #mutate(item = fct_rev(item)) %>% \n  ggplot(\n    aes(\n      x = svar, fill = group, color = group\n    )) +\n  geom_density(alpha = 0.6, stat = \"count\") +\n  facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             ) +\n  scale_x_continuous(limits = svarskategorier, \n                     breaks = svarskategorier,\n                     labels = svarskategorier\n    ) +\n  scale_y_continuous(position=\"right\", \n                     minor_breaks = NULL,\n                     label = scales::label_comma(accuracy = 1)) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"none\") +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_x_reverse()\n\n\n\n\n\n\n\n\n\nCode\ndf.plotComp40 %>%\n  mutate(svar = as.numeric(svarskategori)) %>% \n  mutate(item = factor(item)) %>% \n  #mutate(item = fct_rev(item)) %>% \n  ggplot(\n    aes(\n      x = svar, fill = group, color = group\n    )) +\n  geom_density(alpha = 0.6, stat = \"count\") +\n  facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             ) +\n  scale_x_continuous(limits = svarskategorier, \n                     breaks = svarskategorier,\n                     labels = svarskategorier\n    ) +\n  scale_y_continuous(position=\"right\", \n                     minor_breaks = NULL,\n                     label = scales::label_comma(accuracy = 1)) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"none\") +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_x_reverse()\n\n\n\n\n\n\n\n\n\n\n14.6.3 columns + density\n\n20740\n\n\n\n\nCode\n# same but without y axis text\ncolComp20 <- df.plotComp20 %>%\n  group_by(group) %>% \n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = group\n    )\n  ) +\n  geom_col(position = \"dodge\") +\n  scale_color_manual(\"\",\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    scale_y_continuous(position = \"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             #scales = \"free\"\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"top\",\n                axis.text.y = element_blank()) +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n#colComp20\n\n\n\n\nCode\n## densityplot with no labels\ndensityPlot20 <- df.plotComp20 %>%\n  mutate(svar = as.numeric(svarskategori)) %>% \n  mutate(item = factor(item)) %>% \n  #mutate(item = fct_rev(item)) %>% \n  ggplot(\n    aes(\n      x = svar, fill = group, color = group\n    )) +\n  geom_density(alpha = 0.6, stat = \"count\") +\n  facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1) +\n  scale_x_continuous(limits = c(1,6), \n                     breaks = c(1:6)\n                     ) +\n  scale_y_continuous(minor_breaks = NULL) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent(stripsize = 9) +\n  xlab(\"\") +\n  ylab(\"\") +\n  theme(legend.position = \"none\") +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n    strip.text = element_blank()\n  ) +\n  scale_x_reverse()\n\n#densityPlot\n\n\n\n\nCode\np20cols <- colComp20 + \n  theme(plot.margin = unit(c(0,0,0,0), 'cm'))\np20dens <- densityPlot20 + \n  theme(plot.margin = unit(c(0,0,0,0), 'cm'))\n# unit(c(top, right, bottom, left), units)\np20cols + p20dens + plot_layout(widths = c(2.3, 1))\n\n\n\n\n\n\n\n\n\nCode\n# same but without y axis text\ncolComp7 <- df.plotComp7 %>%\n  group_by(group) %>% \n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = group\n    )\n  ) +\n  geom_col(position = \"dodge\") +\n  scale_color_manual(\"\",\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    scale_y_continuous(position = \"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             #scales = \"free\"\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"top\",\n                axis.text.y = element_blank()) +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n#colComp20\n\n\n\n\nCode\n## densityplot with no labels\ndensityPlot7 <- df.plotComp7 %>%\n  mutate(svar = as.numeric(svarskategori)) %>% \n  mutate(item = factor(item)) %>% \n  #mutate(item = fct_rev(item)) %>% \n  ggplot(\n    aes(\n      x = svar, fill = group, color = group\n    )) +\n  geom_density(alpha = 0.6, stat = \"count\") +\n  facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1) +\n  scale_x_continuous(limits = c(1,6), \n                     breaks = c(1:6)\n                     ) +\n  scale_y_continuous(minor_breaks = NULL) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent(stripsize = 9) +\n  xlab(\"\") +\n  ylab(\"\") +\n  theme(legend.position = \"none\") +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n    strip.text = element_blank()\n  ) +\n  scale_x_reverse()\n\n#densityPlot\n\n\n\n\nCode\np7cols <- colComp7 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\np7dens <- densityPlot7 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\n# unit(c(top, right, bottom, left), units)\np7cols + p7dens + plot_layout(widths = c(2.3, 1))\n\n\n\n\n\n\n\n\n\nCode\n# same but without y axis text\ncolComp40 <- df.plotComp40 %>%\n  group_by(group) %>% \n  dplyr::count(item, svarskategori, .drop = F) %>%\n  mutate(Nf = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = n, fill = group\n    )\n  ) +\n  geom_col(position = \"dodge\") +\n  scale_color_manual(\"\",\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n    scale_y_continuous(position = \"right\",\n                     label = scales::label_comma(accuracy = 1),\n                     minor_breaks = NULL) +\n    facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1,\n             strip.position = \"left\",\n             labeller = labeller(item = label_wrap_gen(22))\n             #scales = \"free\"\n             ) +\n  theme_minimal() +\n  theme_prevent(stripsize = 10, \n                strip.text.y.left = element_text(angle = 0),\n                legend.position = \"top\",\n                axis.text.y = element_blank()) +  \n  xlab(\"\") +\n  ylab(\"\") +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n#colComp20\n\n\n\n\nCode\n## densityplot with no labels\ndensityPlot40 <- df.plotComp40 %>%\n  mutate(svar = as.numeric(svarskategori)) %>% \n  mutate(item = factor(item)) %>% \n  #mutate(item = fct_rev(item)) %>% \n  ggplot(\n    aes(\n      x = svar, fill = group, color = group\n    )) +\n  geom_density(alpha = 0.6, stat = \"count\") +\n  facet_wrap(~ item,\n             dir = \"v\",\n             ncol = 1) +\n  scale_x_continuous(limits = c(1,6), \n                     breaks = c(1:6)\n                     ) +\n  scale_y_continuous(minor_breaks = NULL) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent(stripsize = 9) +\n  xlab(\"\") +\n  ylab(\"\") +\n  theme(legend.position = \"none\") +\n  theme(\n    axis.text.x = element_blank(), # remove text from both axes\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n    strip.text = element_blank()\n  ) +\n  scale_x_reverse()\n\n#densityPlot\n\n\n\n\nCode\np40cols <- colComp40 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\np40dens <- densityPlot40 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\n# unit(c(top, right, bottom, left), units)\np40cols + p40dens + plot_layout(widths = c(2.3, 1))\n\n\n\n\n\n\n\n\n\n\n14.6.4 stat_dots\n\n20740\n\n\n\n\nCode\nstatDots20 <- df.plotComp20 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      color = group, fill = group\n    )\n  ) +\n  stat_dots(data = . %>% filter(group == \"Mättillfälle 1\"),\n            position = position_nudge(y = 0.04),\n            #scale = 0.5\n            #dotsize = 1.6\n            ) +\n    stat_dots(data = . %>% filter(group == \"Mättillfälle 2\"),\n            position = position_nudge(y = -0.04),\n            #scale = 0.9\n            #dotsize = 2\n            ) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8)) +\n  xlab(\"\") +\n  ylab(\"\") +\n  theme(legend.position = \"top\")\n\nstatDots20\n\n\n\n\n\n\n\n\n\nCode\nstatDots7 <- df.plotComp7 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      color = group, fill = group\n    )\n  ) +\n  stat_dots(data = . %>% filter(group == \"Mättillfälle 1\"),\n            position = position_nudge(y = 0.04),\n            #scale = 0.5\n            #dotsize = 1.6\n            ) +\n    stat_dots(data = . %>% filter(group == \"Mättillfälle 2\"),\n            position = position_nudge(y = -0.04),\n            #scale = 0.9\n            #dotsize = 2\n            ) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8)) +\n  xlab(\"\") +\n  ylab(\"\") +\n  theme(legend.position = \"top\")\n\nstatDots7\n\n\n\n\n\n\n\n\n\nCode\nstatDots40 <- df.plotComp40 %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot(\n    aes(\n      x = svarskategori, y = item,\n      color = group, fill = group\n    )\n  ) +\n  stat_dots(data = . %>% filter(group == \"Mättillfälle 1\"),\n            position = position_nudge(y = 0.04),\n            #scale = 0.5\n            #dotsize = 1.6\n            ) +\n    stat_dots(data = . %>% filter(group == \"Mättillfälle 2\"),\n            position = position_nudge(y = -0.04),\n            #scale = 0.9\n            #dotsize = 2\n            ) +\n  scale_color_manual('Grupp',\n    values = c(prevent_light_blue,prevent_yellow),\n    aesthetics = c(\"fill\", \"color\")\n  ) +\n  theme_minimal(base_family = \"noto\") +\n  theme_prevent() +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8)) +\n  xlab(\"\") +\n  ylab(\"\") +\n  theme(legend.position = \"top\")\n\nstatDots40\n\n\n\n\n\n\n\n\n\n\n14.6.5 stat_dots + density\n\n20740\n\n\n\n\nCode\np1 <- statDots20 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\np2 <- densityPlot20 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\n# unit(c(top, right, bottom, left), units)\np1 + p2 + plot_layout(widths = c(2.5, 1))\n\n\n\n\n\n\n\n\n\nCode\np1 <- statDots7 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\np2 <- densityPlot7 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\n# unit(c(top, right, bottom, left), units)\np1 + p2 + plot_layout(widths = c(2.5, 1))\n\n\n\n\n\n\n\n\n\nCode\np1 <- statDots40 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\np2 <- densityPlot40 + theme(plot.margin = unit(c(0,0,0,0), 'cm'))\n# unit(c(top, right, bottom, left), units)\np1 + p2 + plot_layout(widths = c(2.5, 1))\n\n\n\n\n\n\n\n\n\n\n14.6.6 ridges\n\n20740\n\n\n\n\nCode\n#densityRidgePlot <- \n  \ndf.plotComp20 %>%\n  mutate(svar = as.numeric(svarskategori)) %>%\n  mutate(item = fct_rev(item)) %>%\n  ggplot(\n    aes(\n      x = svar, y = item,\n      fill = group\n    )) +\n  geom_density_ridges(alpha = 0.6,\n                      scale = 1.5) +\n  scale_x_continuous('',\n                     labels = svarskategorier,\n                     limits = c(1,6),\n                     breaks = c(1:6)) +\n  scale_fill_cyclical('Grupp',\n    values = c(prevent_light_blue,prevent_yellow)\n  ) +\n  theme_minimal() +\n  theme_prevent() +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30))\n\n\n\n\n\nCode\n  #scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n#densityRidgePlot\n\n\n\n\n\n\nCode\n#densityRidgePlot <- \n  \ndf.plotComp7 %>%\n  mutate(svar = as.numeric(svarskategori)) %>%\n  mutate(item = fct_rev(item)) %>%\n  ggplot(\n    aes(\n      x = svar, y = item,\n      fill = group\n    )) +\n  geom_density_ridges(alpha = 0.6,\n                      scale = 1.5) +\n  scale_x_continuous('',\n                     labels = svarskategorier,\n                     limits = c(1,6),\n                     breaks = c(1:6)) +\n  scale_fill_cyclical('Grupp',\n    values = c(prevent_light_blue,prevent_yellow)\n  ) +\n  theme_minimal() +\n  theme_prevent() +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30))\n\n\n\n\n\n\n\n\n\nCode\n#densityRidgePlot <- \n  \ndf.plotComp40 %>%\n  mutate(svar = as.numeric(svarskategori)) %>%\n  mutate(item = fct_rev(item)) %>%\n  ggplot(\n    aes(\n      x = svar, y = item,\n      fill = group\n    )) +\n  geom_density_ridges(alpha = 0.6,\n                      scale = 1.5) +\n  scale_x_continuous('',\n                     labels = svarskategorier,\n                     limits = c(1,6),\n                     breaks = c(1:6)) +\n  scale_fill_cyclical('Grupp',\n    values = c(prevent_light_blue,prevent_yellow)\n  ) +\n  theme_minimal() +\n  theme_prevent() +\n  xlab(\"\") +\n  ylab(\"\") +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30))\n\n\n\n\n\n\n\n\n\n\n14.6.7 geom_point\n\n2020 grön skala20 med density20 grön med trend-pil740\n\n\n\n\nCode\ndf.pointComp <- df.plotComp20 %>%\n  dplyr::count(group, item, svarskategori) %>%\n  mutate(item = fct_rev(item)) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori))\n\nggplot() +\n  # layer for previous measurement\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = group),\n    alpha = 0.3,\n    shape = 16,\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = group),\n    # size = 3,\n    shape = 16\n  ) +\n  # create outline for each point\n  #     geom_point(data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n  #   aes(x = svarskategori, y = item, size = n * 1.5),\n  #   color = \"lightgrey\",\n  #   # size = 3,\n  #   shape = 1\n  # ) +\n  # text layer for showing number of responses in each category\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"white\"\n  ) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) +\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"grey\",\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"top\") +\n  scale_color_manual('',\n    values = c(prevent_light_blue,prevent_yellow)\n                     ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.pointComp <- df.plotComp20 %>%\n  dplyr::count(group, item, svarskategori) %>%\n  mutate(item = fct_rev(item)) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori))\n\nggplot() +\n  # layer for previous measurement\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    alpha = 0.3,\n    shape = 16,\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  # create outline for each point\n  #     geom_point(data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n  #   aes(x = svarskategori, y = item, size = n * 1.5),\n  #   color = \"lightgrey\",\n  #   # size = 3,\n  #   shape = 1\n  # ) +\n  # text layer for showing number of responses in each category\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"white\"\n  ) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) +\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"grey\",\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"top\") +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\nCode\ndf.pointComp <- df.plotComp20 %>%\n  dplyr::count(group, item, svarskategori) %>%\n  mutate(item = fct_rev(item)) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  mutate(svarNum = as.numeric(svarskategori)) %>% \n  mutate(svarSumma = svarNum * n)\n\ndf.groupdiff <- df.pointComp %>% \n  group_by(group, item) %>% \n  summarise(groupSum = sum(svarSumma)) %>% \n  pivot_wider(names_from = \"group\", values_from = \"groupSum\") %>% \n  janitor::clean_names() %>% \n  mutate(groupDiff = mattillfalle_2 - mattillfalle_1) # positive value = positive development\n  \n  # ggplot() +\n  # geom_col(aes(x = item, y = groupSum, group = group, fill = group),\n  #          position = \"dodge\")\nlibrary(metR)\nplotPrePost <- ggplot() +\n  # layer for previous measurement\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = group),\n    alpha = 0.3,\n    shape = 16,\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = group),\n    # size = 3,\n    shape = 16\n  ) +\n  # create outline for each point\n  #     geom_point(data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n  #   aes(x = svarskategori, y = item, size = n * 1.5),\n  #   color = \"lightgrey\",\n  #   # size = 3,\n  #   shape = 1\n  # ) +\n  # text layer for showing number of responses in each category\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"white\"\n  ) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) +\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"grey\",\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  # trend symbol\n  geom_arrow(\n    data = df.groupdiff,\n    aes(x = 0.4, y = item, angle = 0 + groupDiff, mag = 5),\n    show.legend = F\n  ) +\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"top\") +\n  scale_color_manual('',\n    values = c(prevent_light_blue,prevent_yellow)\n                     ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 22)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n#plotPrePost\n\n\n\n\n\n\nCode\nplotPrePost + densityPlot20 + plot_layout(widths = c(2.5, 1))\n\n\n\n\n\n\n\n\n\nCode\ndf.pointComp <- df.plotComp20 %>%\n  dplyr::count(group, item, svarskategori) %>%\n  mutate(item = fct_rev(item)) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  mutate(svarNum = as.numeric(svarskategori)) %>% \n  mutate(svarSumma = svarNum * n)\n\ndf.groupdiff <- df.pointComp %>% \n  group_by(group, item) %>% \n  summarise(groupSum = sum(svarSumma)) %>% \n  pivot_wider(names_from = \"group\", values_from = \"groupSum\") %>% \n  janitor::clean_names() %>% \n  mutate(groupDiff = mattillfalle_2 - mattillfalle_1) # positive value = positive development\n  \n  # ggplot() +\n  # geom_col(aes(x = item, y = groupSum, group = group, fill = group),\n  #          position = \"dodge\")\nlibrary(metR)\nggplot() +\n  # layer for previous measurement\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    alpha = 0.3,\n    shape = 16,\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  # create outline for each point\n  #     geom_point(data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n  #   aes(x = svarskategori, y = item, size = n * 1.5),\n  #   color = \"lightgrey\",\n  #   # size = 3,\n  #   shape = 1\n  # ) +\n  # text layer for showing number of responses in each category\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"white\"\n  ) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) +\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"grey\",\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  # trend symbol\n  geom_arrow(\n    data = df.groupdiff,\n    aes(x = 0.4, y = item, angle = 0 + groupDiff, mag = 5),\n    show.legend = F\n  ) +\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"top\") +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.pointComp <- df.plotComp7 %>%\n  dplyr::count(group, item, svarskategori) %>%\n  mutate(item = fct_rev(item)) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori))\n\nggplot() +\n  # layer for previous measurement\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = group),\n    alpha = 0.3,\n    shape = 16,\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = group),\n    # size = 3,\n    shape = 16\n  ) +\n  # create outline for each point\n  #     geom_point(data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n  #   aes(x = svarskategori, y = item, size = n * 1.5),\n  #   color = \"lightgrey\",\n  #   # size = 3,\n  #   shape = 1\n  # ) +\n  # text layer for showing number of responses in each category\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"white\"\n  ) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) +\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"grey\",\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"top\") +\n  scale_color_manual('',\n    values = c(prevent_light_blue,prevent_yellow)\n                     ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n\n\nCode\ndf.pointComp <- df.plotComp40 %>%\n  dplyr::count(group, item, svarskategori) %>%\n  mutate(item = fct_rev(item)) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori))\n\nggplot() +\n  # layer for previous measurement\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = group),\n    alpha = 0.3,\n    shape = 16,\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  geom_point(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = group),\n    # size = 3,\n    shape = 16\n  ) +\n  # create outline for each point\n  #     geom_point(data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n  #   aes(x = svarskategori, y = item, size = n * 1.5),\n  #   color = \"lightgrey\",\n  #   # size = 3,\n  #   shape = 1\n  # ) +\n  # text layer for showing number of responses in each category\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"white\"\n  ) +\n  scale_size_continuous(\n    range = c(7, 20), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) +\n  geom_text(\n    data = df.pointComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, label = n),\n    color = \"grey\",\n    position = position_nudge(x = 0.3, y = 0)\n  ) +\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"top\") +\n  scale_color_manual('',\n    values = c(prevent_light_blue,prevent_yellow)\n                     ) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))"
  },
  {
    "objectID": "osaVizFinal.html#setting-up",
    "href": "osaVizFinal.html#setting-up",
    "title": "15  Prevents föredragna visualiseringar",
    "section": "15.1 Setting up",
    "text": "15.1 Setting up\nFirst let’s load the necessary libraries. Some additional libraries will be loaded as we go along.\n\n\nCode\nlibrary(tidyverse)\nlibrary(ggdist)\nlibrary(ggpp)\nlibrary(foreign)\nlibrary(readxl)\nlibrary(showtext)\nlibrary(stringr)\nlibrary(patchwork)\nlibrary(glue)\nlibrary(ggridges)\nlibrary(scales)\n\n### some commands exist in multiple packages, here we define preferred ones that are frequently used\nselect <- dplyr::select\ncount <- dplyr::count\nrecode <- car::recode\nrename <- dplyr::rename\n\n\n\n15.1.1 Theming\nThen our fonts, colors, and the ggplot theme.\n\n\nCode\n## Loading Google fonts (https://fonts.google.com/)\nfont_add_google(\"Noto Sans\", \"noto\")\n## Flama font with regular and italic font faces\nfont_add(family = \"flama\", \n         regular = \"fonts/Flama-Font/Flama Regular.otf\", \n         italic = \"fonts/Flama-Font/Flama Italic.otf\",\n         bold = \"fonts/Flama-Font/FlamaBlack Regular.otf\")\n## Automatically use showtext to render text\nshowtext_auto()\n\nprevent_green <- \"#008332\"\nprevent_light_green <- \"#76A100\"\nprevent_dark_blue <- \"#003E6E\"\nprevent_blue <- \"#005F89\"\nprevent_light_blue <- \"#4398BA\"\nprevent_yellow <- \"#FBB900\"\nprevent_red <- \"#BE5014\"\nprevent_gray_red <- \"#6C5861\"\nprevent_light_gray <- \"#F0F0F0\"\nprevent_gray <- \"#d3d3d3\"\nprevent_dark_gray <- \"#3B3B3B\"\nprevent_turquoise <- \"#009a9d\"\nprevent_green_comp <- \"#D9ECE0\"\nprevent_light_green_comp <- \"#DCE7BF\"\nprevent_dark_blue_comp <- \"#BFCEDA\"\nprevent_blue_comp <- \"#BFD7E1\"\nprevent_light_blue_comp <- \"#D0E5EE\"\nprevent_yellow_comp <- \"#FEEDBF\"\nprevent_red_comp <- \"#EFD3C4\"\nprevent_green_contrast <- \"#006632\"\nprevent_blue_contrast <- \"#003E6E\"\nprevent_yellow_contrast <- \"#FBD128\"\nprevent_red_contrast <- \"#B01200\"\nprevent_gray_red_contrast <- \"#68534E\"\n\n# manual palette creation, 7 colors\nPREVENTpalette1 <- c(\"#6C5861\", \"#005F89\", \"#4398BA\", \"#76A100\", \"#008332\", \"#FBB900\", \"#FBD128\")\n\n# create palette with 12 colors based on Prevent colors above\nPREVENTpalette2 <- colorRampPalette(colors = c(\"#6C5861\", \"#005F89\", \"#4398BA\", \"#76A100\", \"#008332\", \"#FBB900\", \"#FBD128\"))(12)\n\ntheme_prevent <- function(fontfamily = \"flama\", axisTitleSize = 13, titlesize = 15,\n                          margins = 12, axisface = \"plain\", stripsize = 12,\n                          panelDist = 0.6, legendSize = 9, legendTsize = 10,\n                          axisTextSize = 10, ...) {\n  theme(\n    text = element_text(family = fontfamily),\n    axis.title.x = element_text(\n      margin = margin(t = margins),\n      size = axisTitleSize\n    ),\n    axis.title.y = element_text(\n      margin = margin(r = margins),\n      size = axisTitleSize\n    ),\n    plot.title = element_text(\n      #family = \"flama\",\n      face = \"bold\",\n      size = titlesize\n    ),\n    axis.title = element_text(\n      face = axisface\n    ),\n    axis.text = element_text(size = axisTextSize),\n    plot.caption = element_text(\n      face = \"italic\"\n    ),\n    legend.text = element_text(family = fontfamily, size = legendSize),\n    legend.title = element_text(family = fontfamily, size = legendTsize),\n    strip.text = element_text(size = stripsize),\n    panel.spacing = unit(panelDist, \"cm\", data = NULL),\n    legend.background = element_rect(color = \"lightgrey\"),\n    ...\n  )\n}\n\n# these rows are for specific geoms, such as geom_text() and geom_text_repel(), to match font family. Add as needed\n#    update_geom_defaults(\"text\", list(family = fontfamily)) +\n#    update_geom_defaults(\"text_repel\", list(family = fontfamily)) +\n#    update_geom_defaults(\"textpath\", list(family = fontfamily)) +\n#    update_geom_defaults(\"texthline\", list(family = fontfamily))\n\n\n\n\n15.1.2 Importing data\nMoving on to item labels.\n\n\nCode\n# get itemlabels for our sample domain (arbetsbelastning och krav)\nitemlabels <- read.csv(\"06_ldrskp/finalItems.csv\")\nitemlabels\n\n\n  itemnr                                                          item\n1    ls1       Min chef ger mig återkoppling på hur jag utför arbetet.\n2    ls2      Min chef har en god uppfattning om min arbetsbelastning.\n3    ls3 Min chef agerar om jag har allt för mycket arbete att utföra.\n4    ls5                 Min chef hanterar konflikter på ett bra sätt.\n5    ls6           Min chef och jag har tillräckligt med avstämningar.\n\n\nAnd loading data. We will use the items from the “Leadership” domain/subscale for the exampel visualizations.\n\n\nCode\nspssDatafile <- \"data/2023-04-26 Prevent OSA-enkat.sav\"\n\n# read unedited complete SurveyMonkey data file, downloaded in SPSS format\ndf <- read.spss(spssDatafile, to.data.frame = TRUE) %>%\n  select(starts_with(\"q0010\")) %>% # include only items from abk and å\n  select(!ends_with(\"04\")) %>% # remove item that did not work adequately in the psychometric analysis\n  na.omit() # remove participants with missing data (to simplify)\n\nnames(df) <- itemlabels$itemnr # set matching variable names - df and itemlabels need to have common \"itemnr\" labels\n\n# show first 5 rows of df\ndf %>% \n  head(5)\n\n\n          ls1         ls2         ls3         ls5         ls6\n1 Ganska ofta Mycket ofta Ganska ofta Ganska ofta Ganska ofta\n2      Sällan Ganska ofta Ganska ofta Ganska ofta      Sällan\n3 Ganska ofta Mycket ofta Ganska ofta      Alltid Mycket ofta\n4      Alltid Mycket ofta      Alltid Mycket ofta      Alltid\n8      Ibland      Sällan      Aldrig      Ibland      Ibland"
  },
  {
    "objectID": "osaVizFinal.html#person-scores-for-each-domain",
    "href": "osaVizFinal.html#person-scores-for-each-domain",
    "title": "15  Prevents föredragna visualiseringar",
    "section": "15.2 Person scores for each domain",
    "text": "15.2 Person scores for each domain\nWe also need person scores based on their item responses in the domain. There are two ways to get this. The most correct way is to estimate these using a function from the catR package, thetaEst. Another option is to use a transformation table, where raw responses are simply summarized for each participant, and the sum score is looked up in the table.\nWe’ll first do the estimation, then the transformation table.\n\n15.2.1 Direct estimation of person scores\nFor this, we first need to recode the responses into integers, where the lowest response (“Aldrig”) is coded as 0, and so on, until “Alltid” = 5.\n\n\nCode\n# vector of response categories\nsvarskategorier <- c(\"Aldrig\",\"Sällan\",\"Ibland\",\"Ganska ofta\",\"Mycket ofta\",\"Alltid\")\n\n# recode responses to numbers and save the output in a separate dataframe\ndf.scored <- df %>% \n  mutate(across(everything(), ~ car::recode(.x,\"'Aldrig'=0;\n                                            'Sällan' =1;\n                                            'Ibland'=2;\n                                            'Ganska ofta'=3;\n                                            'Mycket ofta'=4;\n                                            'Alltid'=5\",\n                                            as.factor = FALSE)))\n\n\nScored data means each participant has had their overall score estimated based on their responses on a subscale. The score is estimated based on the psychometric/Rasch analysis made separately for each scale.\nWe’ll borrow a simplified function from the RISEkbmRasch package, without actually loading the package.\n\n\nCode\n#library(RISEkbmRasch) # devtools::install_github(\"pgmj/RISEkbmRasch\")\nlibrary(catR)\nestimateScores <- function(dfin, itemParams, model = \"PCM\", method = \"WL\") {\n  estTheta <- function(\n      personResponse, itemParameters = itemParams,\n      rmod = model, est = method) {\n    thetaEst(itemParameters, as.numeric(as.vector(personResponse)),\n      model = rmod, method = est\n    )\n  }\n  dfin %>%\n    t() %>%\n    as_tibble() %>%\n    map_dbl(., estTheta)\n}\n\n# we need to use the item parameters from the Rasch analysis previously made from the whole sample. There is one CSV-file per domain/subscale. The object containing item parameters needs to be a matrix.\nitemParamsLeadership <- read.csv(\"06_ldrskp/itemParameters.csv\") %>% \n  as.matrix()\n\n# then estimate peron scores for this subscale/domain\ndf$score <- estimateScores(dfin = df.scored, \n                           itemParams = itemParamsLeadership)\n\ndf$score %>% \n  head(5)\n\n\n[1]  1.5071640  0.4207452  2.3109255  3.9888486 -0.4714489\n\n\nWe’ve stored the estimated person scores as variable df$score.\n\n\n15.2.2 Transformation table\nThis can be used as a simple lookup & replace table, where raw response data is replaced with integers (starting at 0, as shown earlier), and then summed within the items in the domain/subscale. This is the “ordinal sum score” in the table below, which should be replaced with the “Logit score”, which is on an interval scale.\n\n\nCode\nlibrary(eRm)\nscoringTable <- function(dfin) {\n  sink(nullfile())\n  ppar <- dfin %>%\n    PCM() %>%\n    person.parameter() %>%\n    print() %>%\n    as.data.frame()\n  sink()\n\n  scoreTable <- ppar %>%\n    dplyr::rename(\n      `Logit score` = \"X1.Estimate\", `Logit std.error` = \"X1.Std.Error\",\n      `Ordinal sum score` = \"X1.Raw.Score\"\n    ) %>%\n    remove_rownames() %>%\n    mutate(across(where(is.numeric), ~ round(.x, 2)))\n  ordinal_to_interval_table <<- scoreTable\n}\n\nscoringTable(df.scored)\nordinal_to_interval_table\n\n\n   Ordinal sum score Logit score Logit std.error\n1                  0       -4.11              NA\n2                  1       -3.21            1.06\n3                  2       -2.39            0.80\n4                  3       -1.85            0.68\n5                  4       -1.43            0.61\n6                  5       -1.08            0.57\n7                  6       -0.78            0.53\n8                  7       -0.51            0.51\n9                  8       -0.26            0.49\n10                 9       -0.02            0.48\n11                10        0.20            0.47\n12                11        0.42            0.46\n13                12        0.63            0.46\n14                13        0.85            0.47\n15                14        1.07            0.47\n16                15        1.29            0.48\n17                16        1.53            0.49\n18                17        1.78            0.51\n19                18        2.06            0.53\n20                19        2.36            0.56\n21                20        2.69            0.60\n22                21        3.09            0.65\n23                22        3.55            0.72\n24                23        4.15            0.84\n25                24        5.05            1.10\n26                25        6.01              NA\n\n\nA limitation of this table is that it will only list the values estimated in the sample used. Since our data is skewed it is safer to directly estimate the scores, as shown previously, to avoid issues with missing values in the lookup table. The table above (for the leadership domain) does contain values from ordinal sum score 0 up til the maximum ordinal sum score.\n\n\nCode\ndf.scored$score <- df$score"
  },
  {
    "objectID": "osaVizFinal.html#preparing-visualizations",
    "href": "osaVizFinal.html#preparing-visualizations",
    "title": "15  Prevents föredragna visualiseringar",
    "section": "15.3 Preparing visualizations",
    "text": "15.3 Preparing visualizations\nWe’ll subset a sample of 17 random respondents to use for the visualizations.\n\n\nCode\nset.seed(1523)\nsampleMed <- 17\n# pick random sample to use for visualization example\ndf.test20 <- df.scored %>%\n  slice_sample(n = sampleMed) %>%\n  add_column(group = \"Mättillfälle 1\")\n\n# get another sample for examples comparing two measurements\ndf.test20b <- df.scored %>%\n  slice_sample(n = sampleMed) %>%\n  add_column(group = \"Mättillfälle 2\")\n\n# combine data\ndf.compare20 <- rbind(df.test20, df.test20b)\n\ndf.compare20 %>% \n  head(5)\n\n\n  ls1 ls2 ls3 ls5 ls6    score          group\n1   2   2   2   3   1 0.210077 Mättillfälle 1\n2   3   3   3   1   2 0.629489 Mättillfälle 1\n3   3   4   3   3   3 1.507164 Mättillfälle 1\n4   4   5   5   5   5 4.000000 Mättillfälle 1\n5   2   2   2   3   3 0.629489 Mättillfälle 1"
  },
  {
    "objectID": "osaVizFinal.html#visualizing-person-scores-for-domains",
    "href": "osaVizFinal.html#visualizing-person-scores-for-domains",
    "title": "15  Prevents föredragna visualiseringar",
    "section": "15.4 Visualizing person scores for domains",
    "text": "15.4 Visualizing person scores for domains\nFirst we need to get scores for all domains that can be scored. These are estimated as described above, but will now be loaded from pre-estimated CSV-files.\n\n\nCode\ndf.scores <- read.csv(\"02_arbkrv/scored.csv\") %>%\n  select(score) %>%\n  rename(`Arbetsbelastning och krav` = score) %>%\n  add_column(id = seq_along(1:nrow(.)))\n\ndf.scores <- read.csv(\"03_mpvrk/scored.csv\") %>%\n  select(score) %>%\n  rename(`Möjlighet att påverka` = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores <- read.csv(\"04_std/scored.csv\") %>%\n  select(score) %>%\n  rename(Stöd = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores <- read.csv(\"05_rec/scored.csv\") %>%\n  select(score) %>%\n  rename(Återhämtning = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores <- read.csv(\"06_ldrskp/scored.csv\") %>%\n  select(score) %>%\n  rename(Ledarskap = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores <- read.csv(\"09_psyktry/scored.csv\") %>%\n  select(score) %>%\n  rename(`Psykologisk trygghet` = score) %>%\n  add_column(id = seq_along(1:nrow(.))) %>%\n  full_join(df.scores, by = \"id\")\n\ndf.scores$id <- NULL\n\ndf.scores %>% \n  head(5)\n\n\n  Psykologisk trygghet  Ledarskap Återhämtning      Stöd Möjlighet att påverka\n1            2.7406367  1.5071709   -0.5868049 0.9378689             2.2268184\n2            1.9836984  0.4207466    0.8421092 0.9378689             0.5369188\n3            3.7238499  2.3109342    2.5926417 2.4512128             2.2268184\n4            1.1630728  3.9888470    1.9049085 2.8888545             3.5311443\n5            0.9302564 -0.4714534   -0.2400615 0.3694309            -1.6064950\n  Arbetsbelastning och krav\n1                 0.1877164\n2                -0.3339124\n3                 1.3733517\n4                 0.6561426\n5                 0.1877164\n\n\nThe dataframe needs to be in long format for creating the figure/plot, and we’ll choose a random set of 17 participants for this too.\n\n\nCode\ndf.plot <- df.scores %>% \n  slice_sample(n = sampleMed) %>% \n  pivot_longer(everything(),\n               names_to = \"Område\",\n               values_to = \"Indexvärde\") %>% \n  group_by(Område) %>% \n  summarise(Medelvärde = mean(Indexvärde, na.rm = T))\n\ndf.plot\n\n\n# A tibble: 6 × 2\n  Område                    Medelvärde\n  <chr>                          <dbl>\n1 Arbetsbelastning och krav       1.18\n2 Ledarskap                       1.24\n3 Möjlighet att påverka           1.49\n4 Psykologisk trygghet            2.92\n5 Stöd                            1.64\n6 Återhämtning                    1.42\n\n\n\n15.4.1 Multiple domains\n\n\nCode\nggplot(df.plot) +\n  # plot mean values for each domain\n  geom_point(\n    aes(\n      x = Medelvärde,\n      y = Område\n    ),\n    color = prevent_green,\n    size = 10,\n    shape = 16,\n    alpha = 0.9\n  ) +\n  coord_cartesian(\n    xlim = c(-3, 4), # set x axis limits\n    clip = \"off\"\n  ) +\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(axisTextSize = 11) +\n  labs(\n    title = \"Översikt områden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Gröna cirklar indikerar medelvärden. Skalan sträcker sig från lägsta till högsta möjliga värde.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from x axis\n    axis.title = element_blank()\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 12)) + # wrap y label text\n  annotate(\"text\",\n    x = 4, y = 0.2,\n    label = \"Högsta\\nmöjliga\\nvärde\",\n    color = \"darkgrey\",\n    size = 3\n  ) +\n  annotate(\"text\",\n    x = -3, y = 0.2,\n    label = \"Lägsta\\nmöjliga\\nvärde\",\n    color = \"darkgrey\",\n    size = 3\n  ) +\n  update_geom_defaults(\"text\", list(family = \"flama\")) # sets default font for annotate for the rest of the session\n\n\n\n\n\n\n\n15.4.2 Multiple domains comparison\nWe need a comparison group.\n\n\nCode\nset.seed(1452)\ndf.plot2 <- df.scores %>% \n  slice_sample(n = sampleMed) %>% \n  pivot_longer(everything(),\n               names_to = \"Område\",\n               values_to = \"Indexvärde\") %>% \n  group_by(Område) %>% \n  summarise(Medelvärde = mean(Indexvärde, na.rm = T))\n\n\n\n\nCode\nggplot() +\n  # plot \"previous measurement\"\n  geom_point(\n    data = df.plot2,\n    aes(\n      x = Medelvärde,\n      y = Område\n    ),\n    color = prevent_green,\n    size = 8,\n    shape = 16,\n    alpha = 0.4\n  ) +\n  # plot mean values for each domain for the \"new measurement\n  geom_point(\n    data = df.plot,\n    aes(\n      x = Medelvärde,\n      y = Område\n    ),\n    color = prevent_green,\n    size = 10,\n    shape = 16,\n    alpha = 0.85 # slight transparency in case circles overlap\n  ) +\n  coord_cartesian(\n    xlim = c(-3, 4), # set x axis limits\n    clip = \"off\" # don't clip the annotate text set at the end of the code chunk\n  ) +\n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  labs(\n    title = \"Översikt områden\",\n    subtitle = \"Värden längre till höger är bättre\",\n    caption = \"Gröna cirklar indikerar medelvärden.\\nMörka cirklar = senaste mätningen.\\nLjusare/mindre cirklar = föregående mätning.\",\n    y = \"\",\n    x = \"\"\n  ) +\n  theme(\n    axis.text.x = element_blank(), # remove text from x axis\n    axis.title = element_blank()\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 12)) + # wrap y label text\n  annotate(\"text\",\n    x = 4, y = 0.2,\n    label = \"Högsta\\nmöjliga\\nvärde\",\n    color = \"darkgrey\",\n    size = 3\n  ) +\n  annotate(\"text\",\n    x = -3, y = 0.2,\n    label = \"Lägsta\\nmöjliga\\nvärde\",\n    color = \"darkgrey\",\n    size = 3\n  )\n\n\n\n\n\n\n\n15.4.3 Single domain item responses\nCreate dataframe with 17 random participants.\n\n\nCode\n# create random sample dataset\ndf.plot20 <- df %>%\n  slice_sample(n = sampleMed) %>%\n  select(all_of(itemlabels$itemnr), score) %>%\n  pivot_longer(!score) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 1\")\n\n# enable comparisons by adding another random group\ndf.plot20b <- df %>%\n  slice_sample(n = sampleMed) %>%\n  select(all_of(itemlabels$itemnr), score) %>%\n  pivot_longer(!score) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 2\")\n\ndf.plotComp20 <- rbind(df.plot20,df.plot20b)\n\ndf.plotComp20 %>% \n  head(10)\n\n\n# A tibble: 10 × 5\n   score itemnr svarskategori item                                         group\n   <dbl> <chr>  <fct>         <chr>                                        <chr>\n 1  2.64 ls1    Mycket ofta   Min chef ger mig återkoppling på hur jag ut… Mätt…\n 2  2.64 ls2    Mycket ofta   Min chef har en god uppfattning om min arbe… Mätt…\n 3  2.64 ls3    Mycket ofta   Min chef agerar om jag har allt för mycket … Mätt…\n 4  2.64 ls5    Mycket ofta   Min chef hanterar konflikter på ett bra sät… Mätt…\n 5  2.64 ls6    Mycket ofta   Min chef och jag har tillräckligt med avstä… Mätt…\n 6  1.51 ls1    Ganska ofta   Min chef ger mig återkoppling på hur jag ut… Mätt…\n 7  1.51 ls2    Mycket ofta   Min chef har en god uppfattning om min arbe… Mätt…\n 8  1.51 ls3    Ganska ofta   Min chef agerar om jag har allt för mycket … Mätt…\n 9  1.51 ls5    Ibland        Min chef hanterar konflikter på ett bra sät… Mätt…\n10  1.51 ls6    Mycket ofta   Min chef och jag har tillräckligt med avstä… Mätt…\n\n\nCalculate median responses\n\n\nCode\ndf.medians <- df.plot20 %>% \n  # create numeric responses where 1 = \"Aldrig, and 6 = \"Alltid\"\n  mutate(svarNum = as.integer(fct_rev(svarskategori))) %>% \n  add_column(id = rep(1:17, each = 5)) %>% # sample size = 17, and 5 questions in domain\n  select(itemnr,svarNum,id) %>% \n  pivot_wider(names_from = \"itemnr\",\n              values_from = \"svarNum\",\n              id_cols = \"id\")\ndf.medians %>% \n  head(10)\n\n\n# A tibble: 10 × 6\n      id   ls1   ls2   ls3   ls5   ls6\n   <int> <int> <int> <int> <int> <int>\n 1     1     5     5     5     5     5\n 2     2     4     5     4     3     5\n 3     3     2     1     2     3     5\n 4     4     4     4     3     6     6\n 5     5     3     4     3     4     3\n 6     6     3     3     3     3     4\n 7     7     5     3     3     5     5\n 8     8     4     4     3     3     4\n 9     9     1     1     2     5     2\n10    10     4     4     2     6     4\n\n\n\n\nCode\n# prepare dataframe to store values\nmedianResponses <- itemlabels\n# get median values (can be .5 when we have an even N)\nmedians <- c()\nfor (i in medianResponses$itemnr) {\n  med1 <- median(df.medians[[i]])\n  medians <- c(medians,med1)\n}\nmedianResponses$medians <- medians\nmedianResponses\n\n\n  itemnr                                                          item medians\n1    ls1       Min chef ger mig återkoppling på hur jag utför arbetet.       4\n2    ls2      Min chef har en god uppfattning om min arbetsbelastning.       4\n3    ls3 Min chef agerar om jag har allt för mycket arbete att utföra.       3\n4    ls5                 Min chef hanterar konflikter på ett bra sätt.       5\n5    ls6           Min chef och jag har tillräckligt med avstämningar.       5\n\n\n\n\n15.4.4 Median responses one domain\n\n\nCode\nggplot(medianResponses) +\n  geom_point(aes(x = medians,\n                 y = item),\n             color = prevent_green,\n             size = 12) +\n  theme_minimal() +\n  theme_prevent() +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Medianvärde per fråga\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(limits = svarskategorier,\n                   labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n15.4.5 All responses one domain\n\n\nCode\ndf.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori)) %>% \n  ggplot() +\n  \n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  geom_text(aes(x = svarskategori, y = item, label = n),\n            color = \"white\") +\n  scale_size_continuous(\n    range = c(7, 16), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) + \n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"none\") +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\" # remove legend for color aesthetic\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  #guides(color = guide_legend(override.aes = list(size = 7))) + # make points in legend bigger\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n15.4.6 Mixed median and single item full response\n\n\nCode\nmixPlot <- df.plot20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  mutate(svarskategori = fct_rev(svarskategori))\n\nggplot(mixPlot %>% filter(item == \"Min chef ger mig återkoppling på hur jag utför arbetet.\")) +\n  geom_point(data = medianResponses,\n             aes(x = medians,\n                 y = item),\n             color = prevent_green,\n             size = 12,\n             alpha = 0.4) +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  geom_text(aes(x = svarskategori, y = item, label = n),\n            color = \"white\") +\n  scale_size_continuous(\n    range = c(7, 16), # set minimum and maximum point size\n    guide = \"none\"\n  ) +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\" # remove legend for color aesthetic\n  ) +\n    ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent(legend.position = \"none\") +\n  scale_color_viridis_d(\"\",\n    begin = 0.2,\n    end = 0.8,\n    guide = \"none\" # remove legend for color aesthetic\n  ) +\n  # scale_color_manual(values = PREVENTpalette1) +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  #guides(color = guide_legend(override.aes = list(size = 7))) + # make points in legend bigger\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n15.4.7 Median comparison\n\n\nCode\ndf.medians <- df.plot20b %>% \n  # create numeric responses where 1 = \"Aldrig, and 6 = \"Alltid\"\n  mutate(svarNum = as.integer(fct_rev(svarskategori))) %>% \n  add_column(id = rep(1:17, each = 5)) %>% # sample size = 17, and 5 questions in domain\n  select(itemnr,svarNum,id) %>% \n  pivot_wider(names_from = \"itemnr\",\n              values_from = \"svarNum\",\n              id_cols = \"id\")\n\n\n\n\nCode\n# prepare dataframe to store values\nmedianResponses2 <- itemlabels\n# get median values (can be .5 when we have an even N)\nmedians <- c()\nfor (i in medianResponses2$itemnr) {\n  med1 <- median(df.medians[[i]])\n  medians <- c(medians,med1)\n}\nmedianResponses2$medians <- medians\n\n# medianComp <- rbind(medianResponses,medianResponses2) %>% \n#   add_column(Group = rep(1:2, each = 5))\n# medianComp\n\n\n\n\nCode\nggplot() +\n  geom_point(data = medianResponses,\n             aes(x = medians,\n                 y = item),\n             color = prevent_green,\n             size = 12,\n             alpha = 0.3,\n             position = position_nudge(x = 0.06, y = 0)\n             ) +\n  geom_point(data = medianResponses2, # add new responses\n             aes(x = medians,\n                 y = item),\n             color = prevent_green,\n             size = 12) +\n  theme_minimal() +\n  theme_prevent() +\n  labs(\n    title = \"Indexfrågor\",\n    subtitle = \"Medianvärde per fråga\",\n    caption = \"Ljusgröna cirklar indikerar föregående mätning.\\nÖverlappande cirklar indikerar samma medianvärde\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(limits = svarskategorier,\n                   labels = ~ stringr::str_wrap(.x, width = 8))\n\n\n\n\n\n\n\n15.4.8 Negative acts\n\n\nCode\n# read data again for negative acts questions, \"krbet\"\ndf.krbet <- read.spss(spssDatafile, to.data.frame = TRUE) %>% \n  select(starts_with(\"q0012\")) %>% \n  mutate(across(starts_with(\"q0012\"), ~ car::recode(.x,\"'Dagligen'='Varje vecka'\"))) %>% # merge categories\n  na.omit()\n# krbet itemlabels\nkrbet.itemlabels <- read_excel(\"data/Itemlabels.xlsx\") %>% \n  filter(str_detect(itemnr, pattern = \"kb\")) %>% \n  select(!Dimension)\n\nnames(df.krbet) <- krbet.itemlabels$itemnr\n\ndf.plot.krbet20 <- df.krbet %>%\n  slice_sample(n = 20) %>%\n  pivot_longer(everything()) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(krbet.itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 1\")\n\ndf.plot.krbet20b <- df.krbet %>%\n  slice_sample(n = 20) %>%\n  pivot_longer(everything()) %>% # we need long format for ggplot\n  rename(\n    itemnr = name,\n    svarskategori = value\n  ) %>%\n  left_join(krbet.itemlabels, by = \"itemnr\") %>%  # get item descriptions as a variable in the df\n  add_column(group = \"Mättillfälle 2\")\n\ndf.krbetComp <- rbind(df.plot.krbet20,df.plot.krbet20b)\n\nkrbet.svarskategorier <- c(\"Aldrig\",\"Det har hänt\",\"Varje månad\",\"Varje vecka\")\n\n\n\n\nCode\ndf.plot.krbet20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  scale_size_continuous(\n    range = c(7, 18), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) + \n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_manual(values = c(\"#008332\",\"#FBB900\",\"#BE5014\",\"#B01200\",\"#B01200\"),\n                     guide = \"none\") +\n  labs(\n    title = \"Kränkande beteenden\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(breaks = krbet.svarskategorier,\n                   limits = krbet.svarskategorier)\n\n\n\n\n\n\n\n15.4.9 Negativs acts comparison\n\n\nCode\nplot.krbetComp <- df.krbetComp %>%\n  dplyr::count(group, item, svarskategori) %>%\n  mutate(nFactor = factor(n))\n\nggplot() +\n  geom_point(\n    data = plot.krbetComp %>% filter(group == \"Mättillfälle 2\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    shape = 16\n  ) +\n  geom_point(\n    data = plot.krbetComp %>% filter(group == \"Mättillfälle 1\"),\n    aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    alpha = 0.3,\n    shape = 16,\n    position = position_nudge(x = 0.15, y = 0)\n  ) +\n  scale_size_continuous(\n    range = c(7, 18), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) + \n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_manual(\n    values = c(\"#008332\", \"#FBB900\", \"#BE5014\", \"#B01200\", \"#B01200\"),\n    guide = \"none\"\n  ) +\n  labs(\n    title = \"Kränkande beteenden\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(\n    breaks = krbet.svarskategorier,\n    limits = krbet.svarskategorier\n  )\n\n\n\n\n\n\n\n15.4.10 Negative acts with numbers\n\n\nCode\ndf.plot.krbet20 %>%\n  dplyr::count(item, svarskategori) %>%\n  mutate(nFactor = factor(n)) %>%\n  ggplot() +\n  geom_point(aes(x = svarskategori, y = item, size = n * 1.5, color = svarskategori),\n    # size = 3,\n    shape = 16\n  ) +\n  geom_text(aes(x = svarskategori, y = item, label = n),\n            color = \"white\") +\n  scale_size_continuous(\n    range = c(7, 18), # set minimum and maximum point size\n    guide = \"none\" # remove legend for size aesthetic\n  ) + \n  ### theming, colors, fonts, etc below\n  theme_minimal() +\n  theme_prevent() +\n  scale_color_manual(values = c(\"#008332\",\"#FBB900\",\"#BE5014\",\"#B01200\",\"#B01200\"),\n                     guide = \"none\") +\n  labs(\n    title = \"Kränkande beteenden\",\n    subtitle = \"Fördelning av svar\",\n    y = \"\",\n    x = \"\"\n  ) +\n  scale_y_discrete(labels = ~ stringr::str_wrap(.x, width = 30)) +\n  scale_x_discrete(breaks = krbet.svarskategorier,\n                   limits = krbet.svarskategorier)"
  },
  {
    "objectID": "software.html#lista-på-programvaror",
    "href": "software.html#lista-på-programvaror",
    "title": "16  Programvara som använts",
    "section": "16.1 Lista på programvaror",
    "text": "16.1 Lista på programvaror\n\n\nCode\nlibrary(grateful)\nlibrary(formattable)\n\npkgs <- cite_packages(cite.tidyverse = TRUE, \n                      output = \"table\",\n                      bib.file = \"grateful-refs.bib\",\n                      include.RStudio = TRUE,\n                      out.dir = getwd())\nformattable(pkgs, \n            table.attr = 'class=\\\"table table-striped\\\" style=\"font-size: 15px; font-family: Lato; width: 80%\"')\n\n\n\n\n\n\n\nPackage\n\n\nVersion\n\n\nCitation\n\n\n\n\n\n\nbase\n\n\n4.2.3\n\n\nR Core Team (2023)\n\n\n\n\ncar\n\n\n3.1.2\n\n\nFox and Weisberg (2019)\n\n\n\n\ncatR\n\n\n3.17\n\n\nMagis and Raîche (2012); Magis and Barrada (2017)\n\n\n\n\ncowplot\n\n\n1.1.1\n\n\nWilke (2020)\n\n\n\n\neRm\n\n\n1.0.2\n\n\nMair and Hatzinger (2007b); Mair and Hatzinger (2007a); Hatzinger and Rusch (2009); Rusch, Maier, and Hatzinger (2013); Koller, Maier, and Hatzinger (2015); Debelak and Koller (2019); Mair, Hatzinger, and Maier (2021)\n\n\n\n\nforeign\n\n\n0.8.84\n\n\nR Core Team (2022)\n\n\n\n\nformattable\n\n\n0.2.1\n\n\nRen and Russell (2021)\n\n\n\n\nggdist\n\n\n3.3.0\n\n\nKay (2023)\n\n\n\n\nggpp\n\n\n0.5.4\n\n\nAphalo (2023)\n\n\n\n\nggrepel\n\n\n0.9.3\n\n\nSlowikowski (2023)\n\n\n\n\nggridges\n\n\n0.5.4\n\n\nWilke (2022)\n\n\n\n\nglue\n\n\n1.6.2\n\n\nHester and Bryan (2022)\n\n\n\n\nhexbin\n\n\n1.28.3\n\n\nCarr et al. (2023)\n\n\n\n\njanitor\n\n\n2.2.0\n\n\nFirke (2023)\n\n\n\n\nkableExtra\n\n\n1.3.4\n\n\nZhu (2021)\n\n\n\n\nknitr\n\n\n1.42\n\n\nXie (2014); Xie (2015); Xie (2023)\n\n\n\n\nlavaan\n\n\n0.6.15\n\n\nRosseel (2012)\n\n\n\n\nlavaanPlot\n\n\n0.6.2\n\n\nLishinski (2021)\n\n\n\n\nmatrixStats\n\n\n0.63.0\n\n\nBengtsson (2022)\n\n\n\n\nmetR\n\n\n0.14.0\n\n\nCampitelli (2021)\n\n\n\n\nmirt\n\n\n1.40\n\n\nChalmers (2012)\n\n\n\n\npatchwork\n\n\n1.1.2\n\n\nPedersen (2022)\n\n\n\n\npsych\n\n\n2.3.6\n\n\nWilliam Revelle (2023)\n\n\n\n\npsychotree\n\n\n0.16.0\n\n\nTrepte and Verbeet (2010); Strobl, Wickelmaier, and Zeileis (2011); Strobl, Kopf, and Zeileis (2015); Komboz, Zeileis, and Strobl (2018); Wickelmaier and Zeileis (2018)\n\n\n\n\nreshape\n\n\n0.8.9\n\n\nWickham (2007)\n\n\n\n\nRISEkbmRasch\n\n\n0.1.20.1\n\n\nJohansson (2023)\n\n\n\n\nrmarkdown\n\n\n2.22\n\n\nXie, Allaire, and Grolemund (2018); Xie, Dervieux, and Riederer (2020); Allaire et al. (2023)\n\n\n\n\nscales\n\n\n1.2.1\n\n\nWickham and Seidel (2022)\n\n\n\n\nshowtext\n\n\n0.9.6\n\n\nQiu and See file AUTHORS for details. (2023)\n\n\n\n\nskimr\n\n\n2.1.5\n\n\nWaring et al. (2022)\n\n\n\n\ntidyverse\n\n\n2.0.0\n\n\nWickham et al. (2019)"
  },
  {
    "objectID": "software.html#referenser",
    "href": "software.html#referenser",
    "title": "16  Programvara som använts",
    "section": "16.2 Referenser",
    "text": "16.2 Referenser\n\n\n\n\nAllaire, JJ, Yihui Xie, Christophe Dervieux, Jonathan McPherson, Javier Luraschi, Kevin Ushey, Aron Atkins, et al. 2023. rmarkdown: Dynamic Documents for r. https://github.com/rstudio/rmarkdown.\n\n\nAphalo, Pedro J. 2023. ggpp: Grammar Extensions to “ggplot2”. https://CRAN.R-project.org/package=ggpp.\n\n\nBengtsson, Henrik. 2022. matrixStats: Functions That Apply to Rows and Columns of Matrices (and to Vectors). https://CRAN.R-project.org/package=matrixStats.\n\n\nCampitelli, Elio. 2021. metR: Tools for Easier Analysis of Meteorological Fields. https://doi.org/10.5281/zenodo.2593516.\n\n\nCarr, Dan, ported by Nicholas Lewin-Koh, Martin Maechler, and contains copies of lattice functions written by Deepayan Sarkar. 2023. hexbin: Hexagonal Binning Routines. https://CRAN.R-project.org/package=hexbin.\n\n\nChalmers, R. Philip. 2012. “mirt: A Multidimensional Item Response Theory Package for the R Environment.” Journal of Statistical Software 48 (6): 1–29. https://doi.org/10.18637/jss.v048.i06.\n\n\nDebelak, Rudolf, and Ingrid Koller. 2019. “Testing the Local Independence Assumption of the Rasch Model With Q3-Based Nonparametric Model Tests.” Applied Psychological Measurement. https://doi.org/10.1177/0146621619835501.\n\n\nFirke, Sam. 2023. janitor: Simple Tools for Examining and Cleaning Dirty Data. https://CRAN.R-project.org/package=janitor.\n\n\nFox, John, and Sanford Weisberg. 2019. An R Companion to Applied Regression. Third. Thousand Oaks CA: Sage. https://socialsciences.mcmaster.ca/jfox/Books/Companion/.\n\n\nHatzinger, Reinhold, and Thomas Rusch. 2009. “IRT models with relaxed assumptions in eRm: A manual-like instruction.” Psychology Science Quarterly 51.\n\n\nHester, Jim, and Jennifer Bryan. 2022. glue: Interpreted String Literals. https://CRAN.R-project.org/package=glue.\n\n\nJohansson, Magnus. 2023. RISEkbmRasch: Psychometric Analysis in r with Rasch Measurement Theory. https://github.com/pgmj/RISEkbmRasch.\n\n\nKay, Matthew. 2023. ggdist: Visualizations of Distributions and Uncertainty. https://doi.org/10.5281/zenodo.3879620.\n\n\nKoller, Ingrid, Marco Johannes Maier, and Reinhold Hatzinger. 2015. “An Empirical Power Analysis of Quasi-Exact Tests for the Rasch Model: Measurement Invariance in Small Samples.” Methodology 11. https://doi.org/10.1027/1614-2241/a000090.\n\n\nKomboz, Basil, Achim Zeileis, and Carolin Strobl. 2018. “Tree-Based Global Model Tests for Polytomous Rasch Models.” Educational and Psychological Measurement 78 (1): 128–66. https://doi.org/10.1177/0013164416664394.\n\n\nLishinski, Alex. 2021. lavaanPlot: Path Diagrams for “Lavaan” Models via “DiagrammeR”. https://CRAN.R-project.org/package=lavaanPlot.\n\n\nMagis, David, and Juan Ramon Barrada. 2017. “Computerized Adaptive Testing with R: Recent Updates of the Package catR.” Journal of Statistical Software, Code Snippets 76 (1): 1–19. https://doi.org/10.18637/jss.v076.c01.\n\n\nMagis, David, and Gilles Raîche. 2012. “Random Generation of Response Patterns Under Computerized Adaptive Testing with the R Package catR.” Journal of Statistical Software 48 (8): 1–31. https://doi.org/10.18637/jss.v048.i08.\n\n\nMair, Patrick, and Reinhold Hatzinger. 2007a. “CML based estimation of extended Rasch models with the eRm package in R.” Psychology Science 49.\n\n\n———. 2007b. “Extended Rasch modeling: The eRm package for the application of IRT models in R.” Journal of Statistical Software 20. https://www.jstatsoft.org/v20/i09.\n\n\nMair, Patrick, Reinhold Hatzinger, and Marco Johannes Maier. 2021. eRm: Extended Rasch Modeling. https://cran.r-project.org/package=eRm.\n\n\nPedersen, Thomas Lin. 2022. patchwork: The Composer of Plots. https://CRAN.R-project.org/package=patchwork.\n\n\nQiu, Yixuan, and authors/contributors of the included software. See file AUTHORS for details. 2023. showtext: Using Fonts More Easily in r Graphs. https://CRAN.R-project.org/package=showtext.\n\n\nR Core Team. 2022. foreign: Read Data Stored by “Minitab,” “S,” “SAS,” “SPSS,” “Stata,” “Systat,” “Weka,” “dBase,” ... https://CRAN.R-project.org/package=foreign.\n\n\n———. 2023. R: A Language and Environment for Statistical Computing. Vienna, Austria: R Foundation for Statistical Computing. https://www.R-project.org/.\n\n\nRen, Kun, and Kenton Russell. 2021. formattable: Create “Formattable” Data Structures. https://CRAN.R-project.org/package=formattable.\n\n\nRosseel, Yves. 2012. “lavaan: An R Package for Structural Equation Modeling.” Journal of Statistical Software 48 (2): 1–36. https://doi.org/10.18637/jss.v048.i02.\n\n\nRusch, Thomas, Marco Johannes Maier, and Reinhold Hatzinger. 2013. “Linear logistic models with relaxed assumptions in R.” In Algorithms from and for Nature and Life, edited by Berthold Lausen, Dirk van den Poel, and Alfred Ultsch. Studies in Classification, Data Analysis, and Knowledge Organization. New York: Springer. https://doi.org/10.1007/978-3-319-00035-0_34.\n\n\nSlowikowski, Kamil. 2023. ggrepel: Automatically Position Non-Overlapping Text Labels with “ggplot2”. https://CRAN.R-project.org/package=ggrepel.\n\n\nStrobl, Carolin, Julia Kopf, and Achim Zeileis. 2015. “Rasch Trees: A New Method for Detecting Differential Item Functioning in the Rasch Model.” Psychometrika 80 (2): 289–316. https://doi.org/10.1007/s11336-013-9388-3.\n\n\nStrobl, Carolin, Florian Wickelmaier, and Achim Zeileis. 2011. “Accounting for Individual Differences in Bradley-Terry Models by Means of Recursive Partitioning.” Journal of Educational and Behavioral Statistics 36 (2): 135–53. https://doi.org/10.3102/1076998609359791.\n\n\nTrepte, Sabine, and Markus Verbeet, eds. 2010. Allgemeinbildung in Deutschland – Erkenntnisse Aus Dem SPIEGEL Studentenpisa-Test. Wiesbaden: VS Verlag.\n\n\nWaring, Elin, Michael Quinn, Amelia McNamara, Eduardo Arino de la Rubia, Hao Zhu, and Shannon Ellis. 2022. skimr: Compact and Flexible Summaries of Data. https://CRAN.R-project.org/package=skimr.\n\n\nWickelmaier, Florian, and Achim Zeileis. 2018. “Using Recursive Partitioning to Account for Parameter Heterogeneity in Multinomial Processing Tree Models.” Behavior Research Methods 50 (3): 1217–33. https://doi.org/10.3758/s13428-017-0937-z.\n\n\nWickham, Hadley. 2007. “Reshaping Data with the Reshape Package.” Journal of Statistical Software 21 (12). https://www.jstatsoft.org/v21/i12/.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686.\n\n\nWickham, Hadley, and Dana Seidel. 2022. scales: Scale Functions for Visualization. https://CRAN.R-project.org/package=scales.\n\n\nWilke, Claus O. 2020. cowplot: Streamlined Plot Theme and Plot Annotations for “ggplot2”. https://CRAN.R-project.org/package=cowplot.\n\n\n———. 2022. ggridges: Ridgeline Plots in “ggplot2”. https://CRAN.R-project.org/package=ggridges.\n\n\nWilliam Revelle. 2023. psych: Procedures for Psychological, Psychometric, and Personality Research. Evanston, Illinois: Northwestern University. https://CRAN.R-project.org/package=psych.\n\n\nXie, Yihui. 2014. “knitr: A Comprehensive Tool for Reproducible Research in R.” In Implementing Reproducible Computational Research, edited by Victoria Stodden, Friedrich Leisch, and Roger D. Peng. Chapman; Hall/CRC.\n\n\n———. 2015. Dynamic Documents with R and Knitr. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. https://yihui.org/knitr/.\n\n\n———. 2023. knitr: A General-Purpose Package for Dynamic Report Generation in r. https://yihui.org/knitr/.\n\n\nXie, Yihui, J. J. Allaire, and Garrett Grolemund. 2018. R Markdown: The Definitive Guide. Boca Raton, Florida: Chapman; Hall/CRC. https://bookdown.org/yihui/rmarkdown.\n\n\nXie, Yihui, Christophe Dervieux, and Emily Riederer. 2020. R Markdown Cookbook. Boca Raton, Florida: Chapman; Hall/CRC. https://bookdown.org/yihui/rmarkdown-cookbook.\n\n\nZhu, Hao. 2021. kableExtra: Construct Complex Table with “kable” and Pipe Syntax. https://CRAN.R-project.org/package=kableExtra."
  }
]